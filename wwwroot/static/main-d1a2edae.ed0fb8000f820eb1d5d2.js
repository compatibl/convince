"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[4278],{18789:(e,t,r)=>{r.d(t,{Z:()=>j});var n=r(67294),a=r(93967),o=r.n(a),i=r(3280),u=r(28225),c=r(74823),l=r(95014),s=r(51879),f=r(96251),y=r(93674);const d="YHGF2",h="JIFET";var v=r(85893);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function m(e,t,r){return t=S(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,g()?Reflect.construct(t,r||[],S(e).constructor):t.apply(e,r))}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function C(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}var O=function(e){function t(){var e,r,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,i=new Array(o),u=0;u<o;u++)i[u]=arguments[u];return e=m(this,t,[].concat(i)),r=e,a={hasError:!1},(n=C(n="state"))in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(t,e),r=t,a=[{key:"getDerivedStateFromError",value:function(){return y.A.clear(),{hasError:!0}}}],(n=[{key:"componentDidCatch",value:function(e,t){c.Ty.saveFrontendError(e.toString())}},{key:"render",value:function(){return this.state.hasError?(0,v.jsxs)("div",{className:"d-flex flex-column bg-primary content position-relative",children:[(0,v.jsx)("div",{className:"container-fluid bg-header-background text-white",children:(0,v.jsxs)("div",{className:"row p-2 d-flex align-items-center",children:[(0,v.jsx)("div",{className:"col-1",children:(0,v.jsx)("img",{src:f.Z,width:160,onClick:function(){return window.open("https://github.com/compatibl/tradeentry")},style:{cursor:"pointer"}})}),(0,v.jsx)("div",{className:"offset-8 col-3 d-flex justify-content-end align-items-center",children:(0,v.jsx)("div",{className:o()("rounded-circle text-white fw-bold bg-header-background d-flex justify-content-center align-items-center",d),children:(0,v.jsx)(l.J,{SvgIcon:s.C.whiteThemeUserIcon,clickable:!1,color:"text-white"})})})]})}),(0,v.jsxs)("div",{className:"bg-primary bg-opacity-50 border-0 w-100 h-100 d-flex flex-column align-items-center justify-content-xl-center gap-3",children:[(0,v.jsx)("div",{className:"text-text2 fw-bolder",children:this.props.t("shared.somethingWentWrong")}),(0,v.jsx)(i.Z,{className:o()("bg-button border-0 text-text2 fw-bolder fs-13 c-button",h),onClick:function(){return window.location.reload()},children:(0,v.jsxs)("div",{className:"d-flex align-items-center p-1",children:[(0,v.jsx)(l.J,{SvgIcon:s.C.refresh,color:"text-text2",clickable:!1,className:"me-2"}),this.props.t("shared.reloadPage")]})})]})]}):this.props.children}}])&&b(r.prototype,n),a&&b(r,a),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,a}(n.Component);const j=(0,u.Zh)()(O)},64839:(e,t,r)=>{r.d(t,{o:()=>m});var n=r(28225),a=r(67294),o=r(86706),i=r(93967),u=r.n(i),c=r(92820),l=r(9135),s=r(92333),f=r(2249),y=r(38117),d=r(27794),h=r(78995),v=r(53346),p=r(41272),b=r(85893),m=function(e){var t,r,i,m=e.mainContainerClassname,g=e.gridTabsContainerClassname,S=e.mainContentClassname,w=e.mainTabContentClassname,C=e.mainNoDataClassname,O=(0,n.$G)().t,j=(0,s.z)().activeTab,x=(0,o.v9)(h.jX).schemaTypes,E=(0,a.useMemo)((function(){return Object.keys(x).some((function(e){var t=e;return(0,p.kJ)(x[t])&&x[t].length>0}))}),[x]);return(0,b.jsx)("div",{className:u()("d-flex justify-content-center flex-column h-100 overflow-auto",m),children:(0,b.jsx)(d.C,{containerClassname:S,leftPane:(0,b.jsx)("div",{className:"h-100 d-flex flex-column",children:null!=j&&j.id?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:g,children:(0,b.jsx)(l.E,{activeTabId:j.id})}),(0,b.jsx)("div",{className:u()("h-100 d-flex flex-column",w),children:(0,b.jsx)(c.P,{activeTabId:j.id,options:{dynamicId:null===(t=j.dynamicType)||void 0===t?void 0:t.id,isDynamicDashboard:(null===(r=j.dynamicType)||void 0===r?void 0:r.type)===y.g.DASHBOARD,isDynamicPrimaryDashboard:(null===(i=j.dynamicType)||void 0===i?void 0:i.type)===y.g.PRIMARY_DASHBOARD}})})]}):(0,b.jsx)(f.G,{containerClassname:C,title:O(E?"grid.noTypesSelected":"grid.pleaseContantTheAdministrator")})}),rightPane:v.U})})}},28361:(e,t,r)=>{r.d(t,{_:()=>s});var n=r(93967),a=r.n(n);const o="SYa5O",i="PS_7t",u="Z13Sa",c="ryGkU";var l=r(85893),s=function(e){var t=e.rightBlockRef,r=e.rightBlockWidth,n=e.startResizing,s=e.children;return(0,l.jsxs)("div",{ref:t,className:a()("d-flex flex-row h-100",o),style:{width:r},children:[(0,l.jsx)("div",{role:"button",tabIndex:0,"aria-label":"resizer",className:a()("bg-gray-100 h-100 d-flex align-items-center justify-content-center",i),onMouseDown:n,children:(0,l.jsx)("div",{className:u})}),(0,l.jsx)("div",{className:a()("d-flex flex-column h-100",c),children:s})]})}},43623:(e,t,r)=>{r.d(t,{W:()=>v,X:()=>p});var n=r(67294),a=r(86706),o=r(88541),i=r(73285),u=r(74823),c=r(49969),l=r(85893);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var y="task_progress",d="logs",h=(0,n.createContext)(void 0),v=function(){var e=(0,n.useContext)(h);return e||{error:"SSEContext not found"}},p=function(e){var t=e.children,r=(0,a.v9)(c.Gu),f=s((0,n.useState)(null),2),v=f[0],p=f[1],b=s((0,n.useState)(null),2),m=b[0],g=b[1],S=function(e){var t=e,r=JSON.parse(t.data);p(r)},w=function(e){var t=e,r=JSON.parse(t.data);g(r)};return(0,n.useEffect)((function(){if(!i.O.isSSEHandlers)return function(){};var e=new o.EventSourcePolyfill(u.TO.subscribe(),{headers:{Authorization:"Bearer ".concat(r)}});return e.addEventListener(y,S),e.addEventListener(d,w),function(){e.removeEventListener(y,S),e.removeEventListener(d,w),e.close()}}),[]),(0,l.jsx)(h.Provider,{value:{taskProgress:v,logsData:m},children:t})}},11253:(e,t,r)=>{r.d(t,{x:()=>i});var n=r(83123),a=r(92008),o=r(85893),i=function(e){var t=e.type;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a._,{}),(0,o.jsx)(n.K,{withKey:!1,showToolbar:!1,type:t,tabs:[],showEditor:!0,isDashboardType:!0})]})}},56296:(e,t,r)=>{r.d(t,{e:()=>qe});var n=r(67294),a=r(3909),o=r(93967),i=r.n(o),u=r(62057),c=r(41797),l=r(51452),s=r(67014),f=r(23426),y=r(44454),d=r(36952),h=r(86706),v=r(26467),p=r(41272),b=r(82659),m=r(92333),g=r(21651),S=r(10417);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var O=r(28721),j=r(74823);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==x(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var N=function(e){return(0,p.Kn)(e)&&"TextOutput"in e},I=function(e){for(var t,r=[],n=0;n<e.length;n+=2){var a=k(e.slice(n,n+2),2),o=a[0],i=a[1],u={id:(0,O.Z)(),status:d.h9.INITIAL};t=o,(0,p.Kn)(t)&&"TextInput"in t&&(u=A(A({},u),{},{question:{id:(0,O.Z)(),text:o.TextInput,files:Array.isArray(o.Files)?o.Files.map((function(e){var t=d.vj[e.Status]||d.nT.NONE;return{status:t,filename:e.FileNameWithExt,isSaved:!0,savedStatus:t}})):[]}})),N(i)&&(u=A(A({},u),{},{answer:{id:(0,O.Z)(),text:i.TextOutput,files:[]}})),r.push(u)}return r},D=function(e){var t=e.key,r=e.table,n=e.datasource,a=e.dataset,o=e.chatKey;return j.u$.run({key:t,table:r,dataset:a,method:"LoadChatHistory",dataSource:n,args:{CurrentChat:o}}).then(I)};function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){K(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return V(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var z=function(e){return new Promise((function(t,r){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(window.btoa(n.result))},n.onerror=r}))},G=function(e){var t=d.nT.NONE;return{isSaved:!0,filename:e.FileNameWithExt,savedStatus:t,status:t}},$=function(e){var t=e.key,r=e.dataset,n=e.table,a=e.datasource,o=e.chatKey;return j.u$.run({key:t,table:n,dataset:r,method:"LoadChatFiles",dataSource:a,args:{CurrentChat:o}}).then((function(e){return e.map(G)}))};function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var J=function(e){return e.map((function(e){return{ChatKey:e.ChatKey,Created:e.Created,IsEncrypted:e.IsEncrypted,Profile:e.Profile,Name:e.Name}}))},Q=function(e){var t=e.key,r=e.table,n=e.dataset,a=e.datasource,o=e.chatKey;return j.u$.run({key:t,table:r,dataset:n,method:"GetChatSessions",dataSource:a,args:{CurrentChat:o}}).then(J)},X=function(e){var t=e.key,r=e.table,n=e.datasource,a=e.dataset,o=e.session,i=e.activeChat;return j.u$.run({key:t,table:r,dataset:a,method:"SwitchChatSession",dataSource:n,args:{CurrentChat:o.ChatKey,ActiveChat:i}})},ee=function(e){var t=e.key,r=e.table,n=e.sessionChatKeys,a=e.dataset,o=e.datasource;return j.u$.run({key:t,table:r,dataset:a,method:"DeleteChatSessions",dataSource:o,args:{CurrentChats:n}})};function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}var re=["sessions"];function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=te(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==te(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ce(){var e=ie((0,n.useState)([]),2),t=e[0],r=e[1],a=(0,n.useCallback)((function(){r([])}),[]),o=(0,n.useCallback)((function(e){return Q(e).then((function(e){return r(e),e})).catch((function(){return a(),[]}))}),[a]),i=(0,n.useCallback)(X,[]),u=(0,n.useCallback)((function(e){var n=e.sessions,a=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,re),o=n.map((function(e){return e.ChatKey}));return ee(ae(ae({},a),{},{sessionChatKeys:o})).then((function(){var e=new Set(o),n=t.filter((function(t){return!e.has(t.ChatKey)}));return r(n),n}))}),[t]);return{sessions:t,load:o,select:i,reset:a,deleteMany:u}}var le=function(e){var t=e.key,r=e.table,n=e.datasource,a=e.dataset;return j.u$.run({key:t,table:r,dataset:a,method:"GetActiveChatSession",dataSource:n})};function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ye=function(e){var t=e.type;return j.yI.select({params:{type:t,table_format:!0,limit:1}}).then((function(e){return e.data[0]._key}))};function de(e){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},de(e)}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=de(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=de(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==de(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=function(e){var t=e.type,r=e.key,n=e.dataset;return j.yI.getRecord({type:t,key:r,dataset:n}).then((function(e){var t=e.data;return Boolean(t)})).catch((function(){return!1}))},me=function(e){return e.DatasetDataSliceReducer.datasetData.activeDatasetName},ge=function(e){return e.EnvironmentDataSliceReducer.environmentData.active};function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function we(){we=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var o=t&&t.prototype instanceof b?t:b,i=Object.create(o.prototype),u=new P(n||[]);return a(i,"_invoke",{value:E(e,r,u)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var y="suspendedStart",d="suspendedYield",h="executing",v="completed",p={};function b(){}function m(){}function g(){}var S={};l(S,i,(function(){return this}));var w=Object.getPrototypeOf,C=w&&w(w(N([])));C&&C!==r&&n.call(C,i)&&(S=C);var O=g.prototype=b.prototype=Object.create(S);function j(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(a,o,i,u){var c=f(e[a],e,o);if("throw"!==c.type){var l=c.arg,s=l.value;return s&&"object"==Se(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,u)}),(function(e){r("throw",e,i,u)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,u)}))}u(c.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,a){r(e,n,t,a)}))}return o=o?o.then(a,a):a()}})}function E(t,r,n){var a=y;return function(o,i){if(a===h)throw Error("Generator is already running");if(a===v){if("throw"===o)throw i;return{value:e,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=A(u,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===y)throw a=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=h;var l=f(t,r,n);if("normal"===l.type){if(a=n.done?v:d,l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(a=v,n.method="throw",n.arg=l.arg)}}}function A(t,r){var n=r.method,a=t.iterator[n];if(a===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,A(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var o=f(a,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function r(){for(;++a<t.length;)if(n.call(t,a))return r.value=t[a],r.done=!1,r;return r.value=e,r.done=!0,r};return o.next=o}}throw new TypeError(Se(t)+" is not iterable")}return m.prototype=g,a(O,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:m,configurable:!0}),m.displayName=l(g,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},t.awrap=function(e){return{__await:e}},j(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,a,o){void 0===o&&(o=Promise);var i=new x(s(e,r,n,a),o);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},j(O),l(O,c,"Generator"),l(O,i,(function(){return this})),l(O,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=N,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function a(n,a){return u.type="throw",u.arg=t,r.next=n,a&&(r.method="next",r.arg=e),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return a("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return a(i.catchLoc,!0);if(this.prev<i.finallyLoc)return a(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return a(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return a(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),k(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:N(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),p}},t}function Ce(e,t,r,n,a,o,i){try{var u=e[o](i),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,a)}function Oe(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){Ce(o,n,a,i,u,"next",e)}function u(e){Ce(o,n,a,i,u,"throw",e)}i(void 0)}))}}function je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e){var t=e.chatKey,r=e.isLoading,a=e.activeTypeTab,o=e.onChangeLoading,i=e.loadViewers,u=e.resetViewers,l=(0,m.z)().activeTab,s=(0,h.I0)(),f=(0,h.v9)(ge),y=(0,h.v9)(me),C=(0,v.d)(a),x=(0,n.useRef)(new AbortController),E=je((0,n.useState)(!1),2),A=E[0],T=E[1],k=(0,b.bp)().openTabParams,P=je((0,n.useState)(null),2),N=P[0],I=P[1],R=(0,n.useRef)(null),L=je((0,n.useState)(null),2),K=L[0],U=L[1],V=function(){var e=se((0,n.useState)(),2),t=e[0],r=e[1],a=se((0,n.useState)(d.z_.INTERNAL),2),o=a[0],i=a[1],u=(0,n.useMemo)((function(){return o===d.z_.ENCRYPTED}),[o]),c=(0,n.useMemo)((function(){return o===d.z_.INTERNAL}),[o]),l=(0,n.useMemo)((function(){return o===d.z_.PRIVATE}),[o]),s=(0,n.useCallback)((function(e){return i(e)}),[]),f=(0,n.useCallback)((function(e){return le(e).then((function(e){return e?(r(e),s(e.IsEncrypted?d.z_.PRIVATE:d.z_.INTERNAL),e):null})).catch((function(){return r(void 0)}))}),[s]);return{activeChat:t,chatType:o,isEncryptedType:u,isInternalType:c,isPrivateType:l,change:s,getActiveChat:f,setActiveChat:r}}(),G=V.activeChat,Y=V.chatType,B=V.isPrivateType,Z=V.getActiveChat,q=V.setActiveChat,J=ce(),Q=J.sessions,X=J.load,ee=J.select,te=J.deleteMany,re=function(){var e=W((0,n.useState)([]),2),t=e[0],r=e[1],a=W((0,n.useState)([]),2),o=a[0],i=a[1],u=(0,n.useCallback)((function(e){return $(e).then((function(e){i(e),r([])}))}),[]),c=(0,n.useCallback)((function(e){r((function(t){return t.filter((function(t){return t.name!==e}))})),i((function(t){return t.reduce((function(t,r){return r.filename===e?r.isSaved&&t.push(H(H({},r),{},{status:d.nT.REMOVED,savedStatus:d.nT.REMOVED})):t.push(r),t}),[])}))}),[]),l=(0,n.useCallback)((function(e){r((function(t){var r=e.map((function(e){return e.name}));return t.filter((function(e){return-1===r.indexOf(e.name)})).concat(e)})),i((function(t){for(var r=[],n=e.map((function(e){return e.name})),a=0;a<t.length;a+=1){var o=t[a];if(n.includes(o.filename)){r.push(H(H({},o),{},{status:d.nT.UPDATED}));var i=n.indexOf(o.filename);n.splice(i,1)}else r.push(o)}return r.concat(n.map((function(e){return{filename:e,status:d.nT.ADDED,savedStatus:d.nT.NONE,isSaved:!1}})))}))}),[]),s=(0,n.useCallback)((function(){return r([])}),[]),f=(0,n.useCallback)((function(){return t.map((function(e){return e.name}))}),[t]),y=(0,n.useCallback)((function(){var e=t.map((function(e){return e.name}));return o.filter((function(t){return e.includes(t.filename)||t.status===d.nT.REMOVED}))}),[o,t]),h=(0,n.useCallback)((function(){s(),i((function(e){return e.filter((function(e){return e.status!==d.nT.REMOVED})).map((function(e){return H(H({},e),{},{status:d.nT.NONE,savedStatus:d.nT.NONE,isSaved:!0})}))}))}),[s]),v=(0,n.useCallback)((function(){var e=t.map(z);return Promise.all(e)}),[t]),p=(0,n.useCallback)((function(){return o.filter((function(e){return e.status===d.nT.REMOVED})).map((function(e){return e.filename}))}),[o]);return{files:o,filesWithContent:t,onChange:l,onReset:s,getFileNames:f,getUnsavedFiles:y,getFilesAsBase64List:v,onRemove:c,loadChatFiles:u,getRemovedFileNames:p,onSend:h}}(),ne=re.files,ae=re.onChange,oe=re.getFilesAsBase64List,ie=re.getUnsavedFiles,ue=re.getRemovedFileNames,fe=re.onRemove,de=re.loadChatFiles,he=re.onSend,pe=re.getFileNames,Se=function(){var e=F((0,n.useState)([]),2),t=e[0],r=e[1],a=(0,n.useCallback)((function(e){return D(e).then((function(e){return r(e)}))}),[]),o=(0,n.useCallback)((function(){var e=(0,O.Z)();return r((function(t){return[].concat(_(t),[{id:e,status:d.h9.INITIAL}])})),e}),[]),i=(0,n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{id:(0,O.Z)(),text:e,files:t}}),[]),u=(0,n.useCallback)((function(e,t){r((function(r){return r.map((function(r){return r.id===e?M(M({},r),t):r}))}))}),[]),c=(0,n.useCallback)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];u(e,{status:d.h9.LOADING,question:i(t,r)})}),[u,i]);return{messageGroups:t,createGroup:o,addQuestion:c,addAnswer:(0,n.useCallback)((function(e,t){u(e,{status:d.h9.SUCCESS,answer:i(t)})}),[i,u]),updateStatus:(0,n.useCallback)((function(e,t){u(e,{status:t})}),[u]),onClear:(0,n.useCallback)((function(){r([])}),[]),load:a}}(),Ce=Se.messageGroups,xe=Se.addQuestion,Ee=Se.addAnswer,Ae=Se.createGroup,Te=Se.updateStatus,ke=Se.onClear,Pe=Se.load,Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(0,b.bp)().openTabParams,r=w((0,S._)("chat-message",e),2),a=r[0],o=r[1];(0,n.useEffect)((function(){t.chatAbout.getParams((function(e){e&&o("")}))}),[]);var i=(0,n.useCallback)((function(e){var t=e.target.value;o(t)}),[]),u=(0,n.useCallback)((function(){o(e)}),[e]);return{message:a,onChangeEvent:i,onChange:o,onClear:u}}(),Ie=Ne.message,De=Ne.onChange,Re=Ne.onChangeEvent,Le=Ne.onClear,Me=(0,n.useRef)(null),Ke=(0,n.useCallback)((function(e,t){var r=Me.current;if(null===r||(0,p.Yd)(f)||(0,p.Yd)(y))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');o(!0),function(e){var t=e.key,r=e.datasource,n=e.dataset,a=e.table,o=e.isEncrypted,i=void 0!==o&&o,u=e.promptId,c=e.activeChat;return j.u$.run({key:t,table:a,dataset:n,method:"StartNewChat",dataSource:r,args:ve(ve({encrypted:i},u&&{profile:{Name:u}}),{},{ActiveChat:c})})}({key:r,dataset:y,promptId:t,activeChat:null==G?void 0:G.ChatKey,table:C.current,datasource:f,isEncrypted:e===d.z_.PRIVATE}).then((function(e){Le(),ke(),u(),q(e);var t={key:r,dataset:y,chatKey:e.ChatKey,table:C.current,datasource:f};return Promise.all([i(e.ChatKey),de(t).then((function(){})),Pe(t),X(t)]).then((function(){N&&(ze(N.data),k.chatAbout.clearParams(),I(null))}))})).finally((function(){return o(!1)}))}),[G,f,y,o,C,Le,ke,u,de,i,Pe,X,N]),_e=(0,n.useCallback)((function(e){var t=Me.current;if(!(null===t||(0,p.Yd)(f)||(0,p.Yd)(y)||(0,p.Yd)(G))){var n=(e||Ie).trim(),a=ie();if(!(0===n.length&&0===a.length||r)){var u=Ae();xe(u,n,a),Le(),o(!0),T(!0),x.current=new AbortController,oe().then((function(e){return function(e){var t=e.dataset,r=e.fileNames,n=e.fileContentBytes,a=e.removedFileNames,o=e.key,i=e.table,u=e.prompt,c=e.datasource,l=e.chatKey,s=e.signal;return j.u$.postRun({signal:s,key:o,table:i,dataset:t,method:"SendPrompt",dataSource:c,args:{prompt:u,CurrentChat:l,RemovedFileNames:a,FileNames:r,FileContentBytes:n}})}({dataset:y,key:t,chatKey:G.ChatKey,fileNames:pe(),fileContentBytes:e,removedFileNames:ue(),datasource:f,table:C.current,prompt:n,signal:x.current.signal})})).then((function(e){return Ee(u,e),he(),Promise.all([i(G.ChatKey),de({dataset:y,key:t,chatKey:G.ChatKey,datasource:f,table:C.current})])})).catch((function(){return Te(u,d.h9.ERROR)})).finally((function(){o(!1),T(!1)}))}}}),[G,y,f,Ie,r,ie,pe,Ae,xe,Le,o,oe,C,Ee,i,Te,he,ue]),Fe=(0,n.useCallback)((function(){return x.current.abort()}),[]),Ue=(0,n.useCallback)((function(e){if(e.ChatKey!==(null==G?void 0:G.ChatKey)){var t=Me.current;if(null===t||(0,p.Yd)(f)||(0,p.Yd)(y))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');o(!0),ee({key:t,table:C.current,datasource:f,dataset:y,activeChat:null==G?void 0:G.ChatKey,session:e}).then((function(e){q(e),Le();var r={key:t,chatKey:e.ChatKey,table:C.current,datasource:f,dataset:y};return Promise.all([X(r),de(r),Pe(r),i(e.ChatKey)])})).finally((function(){return o(!1)}))}}),[null==G?void 0:G.ChatKey,y,f,de,Pe,i,o,C,ee]),Ve=(0,n.useCallback)((function(e){var t=Me.current;if(null===t||(0,p.Yd)(y)||(0,p.Yd)(f))throw new Error('Cannot execute request because one of these parameters is empty: "key", "dataset" or "environment"');o(!0),te({key:t,dataset:y,table:C.current,datasource:f,sessions:e}).then((function(e){if(0!==e.length){if(!e.some((function(e){return e.ChatKey===(null==G?void 0:G.ChatKey)}))){var t=e[0];Ue(t)}}else Ke(d.z_.INTERNAL)})).finally((function(){return o(!1)}))}),[y,f,o,te,C,Ke,null==G?void 0:G.ChatKey,Ue]),ze=function(e){e.attachmentType===c.hP.MessageInput?(De(e.content),_e(e.content)):ae([e.content])},Ge=(0,n.useCallback)((function(e){if(!R.current)throw new Error("Run missed required params: 'type' | 'key'.");o(!0),c.x9.runContentHandler({handler:e.handler,key:R.current.key,type:R.current.type,dataset:y,environment:f}).then(ze).finally((function(){o(!1)}))}),[y,f]),$e=(0,n.useCallback)((function(e){o(!0),c.x9.getContentHandlers({type:e.type,key:e.recordKey,dataset:y,environment:f}).then((function(t){if(!t.isExist)throw new Error("The record doesn't have any handlers.");return R.current={type:e.type,key:e.recordKey},t.isMultiChoice?(U(t),Promise.resolve()):Ge({handler:t.handlers[0]})})).finally((function(){return o(!1)}))}),[y,f,_e]),Ye=function(){var e=Oe(we().mark((function e(){return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!y){e.next=8;break}return e.next=3,be({dataset:y,key:t,type:C.current});case 3:if(e.sent||null==l||!l.id){e.next=7;break}throw s((0,g.on)({id:l.id})),new Error("Can not find the entity");case 7:return e.abrupt("return",t);case 8:return e.abrupt("return",ye({type:C.current}));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Oe(we().mark((function e(){var t;return we().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,p.Yd)(y)&&!(0,p.Yd)(f)){e.next=2;break}throw new Error('Cannot execute request because one of these parameters is empty: "dataset" or "environment"');case 2:return o(!0),e.prev=3,e.next=6,Ye();case 6:t=e.sent,Me.current=t,k.chatAbout.getParams((function(e){e?I(e):Z({key:t,dataset:y,table:C.current,datasource:f}).then((function(e){if(e){var r={key:t,dataset:y,chatKey:e.ChatKey,table:C.current,datasource:f};return Promise.all([de(r),Pe(r),X(r),i(e.ChatKey)])}throw new Error("Cannot load details about the chat without the chat key.")}))}));case 9:return e.prev=9,o(!1),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[3,,9,12]])})));return function(){return e.apply(this,arguments)}}();return(0,n.useEffect)((function(){Be()}),[t,f,C,y]),{getContentByHandler:Ge,contentHandlers:K,chatAboutParams:N,handleClearContentHandlers:function(){U(null),R.current=null},activeChat:G,isSending:A,chatType:Y,isPrivateType:B,sessions:Q,selectSession:Ue,deleteSelectedSessions:Ve,files:ne,onChangeFiles:ae,onRemoveFile:fe,message:Ie,messageGroups:Ce,sendMessage:_e,cancelSendMessage:Fe,startNewChat:Ke,onChangeInput:Re,getContentByKey:$e,getUnsavedFiles:ie}}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Te(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Te(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ke=r(65750);function Pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ne(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ne(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var Ie=r(10834),De=r(75011),Re=r(38117);function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Me(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _e(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Fe(e){var t=e.activeType,r=(0,v.d)(t),a=(0,h.v9)(De.n),o=(0,h.v9)(Ie.E),i=(0,n.useRef)(),u=function(){var e=(0,h.v9)(De.n),t=(0,h.v9)(Ie.E),r=Le((0,n.useState)(j.gN.INITIAL),2),a=r[0],o=r[1],i=Le((0,n.useState)(),2),u=i[0],c=i[1],l=Le((0,n.useState)([]),2),s=l[0],f=l[1],y=(0,n.useCallback)((function(e){return c(e)}),[]),d=(0,n.useCallback)((function(e){return f(e)}),[]),v=(0,n.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];f([]),c(void 0),e&&o(j.gN.INITIAL)}),[]);return{status:a,activeTab:u,tabs:s,loadTabs:(0,n.useCallback)((function(t,r){return o(j.gN.LOADING),j.lx.getListPanels({type:t,key:r,dataset:e}).then((function(e){var t=(0,p.HJ)(e.filter((function(e){return e.Type!==(null===Re.g||void 0===Re.g?void 0:Re.g.PRIMARY_DASHBOARD)})));f(t);var r=t[0];return r&&c(r.key),o(j.gN.SUCCESS),{tabs:t,activeTab:null==r?void 0:r.key}})).catch((function(e){return p.Am.error(e),o(j.gN.ERROR),v(!1),{tabs:[]}}))}),[e,t,v]),activateTab:y,updateOrderTabs:d,reset:v}}(),c=u.tabs,l=u.status,s=u.activeTab,f=u.loadTabs,y=u.activateTab,d=u.updateOrderTabs,b=u.reset,m=function(){var e=Ke((0,n.useState)(j.gN.INITIAL),2),t=e[0],r=e[1],a=Ke((0,n.useState)(),2),o=a[0],i=a[1],u=(0,n.useCallback)((function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(void 0),e&&r(j.gN.INITIAL)}),[]);return{status:t,data:o,loadViewerData:(0,n.useCallback)((function(e,t,n,a,o){r(j.gN.LOADING),j.lx.getPanel({panelId:e,type:t,dataset:n,key:o}).then((function(e){i(e),r(j.gN.SUCCESS)})).catch((function(){u(!1),r(j.gN.ERROR)}))}),[u]),reset:u}}(),g=m.loadViewerData,S=m.data,w=m.status,C=m.reset,O=(0,n.useMemo)((function(){return(0,p.I6)(S)}),[S]),x=(0,n.useMemo)((function(){return(0,p.hg)([l,w])}),[l,w]),E=(0,n.useCallback)((function(e){return i.current=e,f(r.current,e).then((function(t){var n=t.activeTab;n&&!(0,p.Yd)(a)&&g(n,r.current,a,o,e)}))}),[f,r,a,g,o]),A=(0,n.useCallback)((function(e){y(e.key),(0,p.Yd)(a)||g(e.key,r.current,a,o,i.current)}),[y,a,g,o,r]),T=(0,n.useCallback)((function(){b(),C(),i.current=void 0}),[b,C]);return{loading:x,loadingViewerData:(0,p.hg)([w]),activeTab:s,tabs:c,activeViewerType:O,viewerData:S,load:E,updateOrderTabs:d,switchTab:A,reset:T}}var Ue=r(50686),Ve=r(51489),ze=r(27079);const Ge="KA9vq",$e="fZWUj";var Ye=r(85893),Be=(0,n.memo)((function(e){var t=e.currentKey,r=e.type,n=e.isLoadingViewers,a=e.activeViewerType,o=e.tabs,u=e.activeTab,c=e.viewerData,l=e.switchTab,s=e.updateOrderTabs;return(0,Ye.jsx)("div",{className:i()("w-100 d-flex flex-column h-100",$e),children:(0,Ye.jsxs)("div",{className:i()("w-100 d-flex flex-column h-100",Ge),children:[(0,Ye.jsx)(Ue.m,{isChatTabs:!0,shouldTranslate:!0,openedTabs:o,activeTab:u,onChangeTab:l,onSetTabs:s}),n?(0,Ye.jsx)(ze.a,{}):(0,Ye.jsx)("div",{className:"h-100 overflow-auto",children:(0,Ye.jsx)(Ve.l,{panelKey:t,panelType:r,activeViewerType:a,data:c.ViewOf},u)})]})})}));Be.displayName="Content";const He="Nsk22";function Ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,u=[],c=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var qe=function(e){var t=e.type,r=e.chatKey,o=e.className,h=e.panelClassname,v="Chat",p=(0,n.useRef)(null),b=function(){var e=Ae((0,n.useState)([50,50]),2),t=e[0],r=e[1],a=(0,n.useMemo)((function(){return t[0]}),[t]),o=(0,n.useRef)(null),i=(0,n.useMemo)((function(){return 100===a}),[a]),u=(0,n.useCallback)((function(e){if(0!==e.length){var t=Ae(e,2),n=t[0],a=t[1];r([n,null!=a?a:100-n])}}),[]),c=(0,n.useCallback)((function(){var e=o.current;if(e){var t=e.getCollapsed()?50:0;e.resize(t)}}),[]);return{isMaximized:i,contentPanelRef:o,collapseContentPanel:c,onChangeSizes:u}}(),m=b.collapseContentPanel,g=b.contentPanelRef,w=b.isMaximized,C=b.onChangeSizes,O=function(){var e=Pe((0,n.useState)(!0),2),t=e[0],r=e[1],a=Pe((0,S._)(ke.w.SHOW_DISCLAIMER_ONCE,!1),2),o=a[0],i=a[1],u=(0,n.useMemo)((function(){return t&&!o}),[t,o]),c=(0,n.useCallback)((function(){return i((function(e){return!e}))}),[i]);return{isOpen:u,isOnce:o,toggleOnce:c,show:r}}(),j=O.isOpen,x=O.show,E=O.isOnce,A=O.toggleOnce,T=Ze((0,n.useState)(!1),2),k=T[0],P=T[1],N=Ze((0,l.k)(!1),2),I=N[0],D=N[1],R=D.setTrue,L=D.setFalse,M=(0,n.useMemo)((function(){return"ChatDashboard"===t}),[t]),K=Ze((0,n.useState)(!1),2),_=K[0],F=K[1],U=(0,n.useCallback)((function(e){return F(e)}),[]),V=Fe({activeType:v}),z=V.loadingViewerData,G=V.activeViewerType,$=V.viewerData,Y=V.tabs,B=V.activeTab,H=V.switchTab,Z=V.updateOrderTabs,W=V.load,q=V.reset,J=Ee({chatKey:r,activeTypeTab:t,isLoading:_,onChangeLoading:U,loadViewers:W,resetViewers:q}),Q=J.chatAboutParams,X=J.getContentByHandler,ee=J.contentHandlers,te=J.handleClearContentHandlers,re=J.files,ne=J.isSending,ae=J.isPrivateType,oe=J.message,ie=J.messageGroups,ue=J.activeChat,ce=J.sessions,le=J.selectSession,se=J.deleteSelectedSessions,fe=J.onChangeInput,ye=J.onChangeFiles,de=J.sendMessage,he=J.cancelSendMessage,ve=J.startNewChat,pe=J.onRemoveFile,be=J.getContentByKey,me=J.getUnsavedFiles;(0,n.useEffect)((function(){Q&&we(d.z_.INTERNAL,!0)}),[Q]);var ge=(0,n.useCallback)((function(e){var t;if(!p.current)throw new Error("Cannot start new chat without type");P(!1),ve(null===(t=p.current)||void 0===t?void 0:t.type,e),p.current=null}),[ve]),Se=(0,n.useCallback)((function(){var e;(x(!1),p.current)&&(null!==(e=p.current)&&void 0!==e&&e.isProfile?P(!0):ge(void 0))}),[x,ge]),we=(0,n.useCallback)((function(e,t){p.current={type:e,isProfile:t},x(!0),E&&(t?P(!0):ge(void 0))}),[E,ge,x]),Ce=(0,n.useMemo)((function(){return Y.length>0}),[Y.length]);return(0,Ye.jsxs)("div",{className:i()(He,o),children:[(0,Ye.jsx)(s.F,{isOpen:j,isOnce:E,toggleOnce:A,agree:Se}),k&&(0,Ye.jsx)(y.c,{activeSession:ue,create:ge,close:function(){P(!1),Q&&Q.handleMoveToPreviousTab()}}),I&&(0,Ye.jsx)(u.$,{isOpen:I,onSubmit:be,onClose:L}),(null==ee?void 0:ee.isMultiChoice)&&(0,Ye.jsx)(c.K7,{handlers:ee.handlers,isOpen:ee.isMultiChoice,onClose:te,onApply:X}),(0,Ye.jsxs)(a.eh,{direction:"horizontal",onLayout:C,children:[(0,Ye.jsx)(a.s_,{id:"chat-history",order:1,minSize:20,className:h,children:(0,Ye.jsx)(f.A,{isShowMaximizedButton:Ce,isMaximized:w,isTopic:M,files:re,isSending:ne,activeSession:ue,isPrivateType:ae,isLoading:_,sessions:ce,message:oe,messageGroups:ie,onChangeInput:fe,onSendMessage:de,cancelSendMessage:he,startNewChat:we,selectSession:le,deleteSelectedSessions:se,onChangeFiles:ye,onRemoveFile:pe,toggleMaximizedView:m,openKeyDialog:R,getUnsavedFiles:me})}),Y.length>0&&$&&(0,Ye.jsxs)(Ye.Fragment,{children:[(0,Ye.jsx)(a.OT,{className:"verticalPanelResizer"}),(0,Ye.jsx)(a.s_,{id:"chat-content",order:2,collapsible:!0,ref:g,minSize:0,className:h,children:(0,Ye.jsx)(Be,{currentKey:r||(null==ue?void 0:ue.ChatKey),type:v,activeViewerType:G,activeTab:B,tabs:Y,switchTab:H,updateOrderTabs:Z,viewerData:$,isLoadingViewers:z})})]})]})]})}},36952:(e,t,r)=>{r.d(t,{h9:()=>o,nT:()=>n,vj:()=>a,z_:()=>i});var n=function(e){return e.NONE="none",e.ADDED="added",e.UPDATED="updated",e.REMOVED="removed",e}({}),a={Added:n.ADDED,Removed:n.REMOVED,Updated:n.UPDATED},o=function(e){return e[e.INITIAL=0]="INITIAL",e[e.LOADING=1]="LOADING",e[e.ERROR=2]="ERROR",e[e.SUCCESS=3]="SUCCESS",e[e.CANCELED=4]="CANCELED",e}({}),i=function(e){return e.PRIVATE="private",e.INTERNAL="internal",e.ENCRYPTED="encrypted",e}({})}}]);