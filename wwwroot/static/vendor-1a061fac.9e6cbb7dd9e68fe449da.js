"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[5068],{29981:(e,t,n)=>{n.d(t,{v:()=>h});var i=n(97295),r=n(50187),s=n(90310);class h{constructor(e,t,n,i){this._uri=e,this._lines=t,this._eol=n,this._versionId=i,this._lineStarts=null,this._cachedTextValue=null}dispose(){this._lines.length=0}get version(){return this._versionId}getText(){return null===this._cachedTextValue&&(this._cachedTextValue=this._lines.join(this._eol)),this._cachedTextValue}onEvents(e){e.eol&&e.eol!==this._eol&&(this._eol=e.eol,this._lineStarts=null);const t=e.changes;for(const e of t)this._acceptDeleteRange(e.range),this._acceptInsertText(new r.L(e.range.startLineNumber,e.range.startColumn),e.text);this._versionId=e.versionId,this._cachedTextValue=null}_ensureLineStarts(){if(!this._lineStarts){const e=this._eol.length,t=this._lines.length,n=new Uint32Array(t);for(let i=0;i<t;i++)n[i]=this._lines[i].length+e;this._lineStarts=new s.oQ(n)}}_setLineText(e,t){this._lines[e]=t,this._lineStarts&&this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}_acceptDeleteRange(e){if(e.startLineNumber!==e.endLineNumber)this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.endLineNumber-1].substring(e.endColumn-1)),this._lines.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this._lineStarts&&this._lineStarts.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber);else{if(e.startColumn===e.endColumn)return;this._setLineText(e.startLineNumber-1,this._lines[e.startLineNumber-1].substring(0,e.startColumn-1)+this._lines[e.startLineNumber-1].substring(e.endColumn-1))}}_acceptInsertText(e,t){if(0===t.length)return;const n=(0,i.uq)(t);if(1===n.length)return void this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]+this._lines[e.lineNumber-1].substring(e.column-1));n[n.length-1]+=this._lines[e.lineNumber-1].substring(e.column-1),this._setLineText(e.lineNumber-1,this._lines[e.lineNumber-1].substring(0,e.column-1)+n[0]);const r=new Uint32Array(n.length-1);for(let t=1;t<n.length;t++)this._lines.splice(e.lineNumber+t-1,0,n[t]),r[t-1]=n[t].length+this._eol.length;this._lineStarts&&this._lineStarts.insertValues(e.lineNumber,r)}}},39125:(e,t,n)=>{n.d(t,{nD:()=>w,Lv:()=>O,Nr:()=>S,Xp:()=>N});var i=n(50187),r=n(24314),s=n(84973);class h{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==l)return f(this.right);let e=this;for(;e.parent!==l&&e.parent.left!==e;)e=e.parent;return e.parent===l?l:e.parent}prev(){if(this.left!==l)return o(this.left);let e=this;for(;e.parent!==l&&e.parent.right!==e;)e=e.parent;return e.parent===l?l:e.parent}detach(){this.parent=null,this.left=null,this.right=null}}const l=new h(null,0);function f(e){for(;e.left!==l;)e=e.left;return e}function o(e){for(;e.right!==l;)e=e.right;return e}function a(e){return e===l?0:e.size_left+e.piece.length+a(e.right)}function u(e){return e===l?0:e.lf_left+e.piece.lineFeedCnt+u(e.right)}function c(){l.parent=l}function d(e,t){const n=t.right;n.size_left+=t.size_left+(t.piece?t.piece.length:0),n.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=n.left,n.left!==l&&(n.left.parent=t),n.parent=t.parent,t.parent===l?e.root=n:t.parent.left===t?t.parent.left=n:t.parent.right=n,n.left=t,t.parent=n}function g(e,t){const n=t.left;t.left=n.right,n.right!==l&&(n.right.parent=t),n.parent=t.parent,t.size_left-=n.size_left+(n.piece?n.piece.length:0),t.lf_left-=n.lf_left+(n.piece?n.piece.lineFeedCnt:0),t.parent===l?e.root=n:t===t.parent.right?t.parent.right=n:t.parent.left=n,n.right=t,t.parent=n}function p(e,t){let n,i;if(t.left===l?(i=t,n=i.right):t.right===l?(i=t,n=i.left):(i=f(t.right),n=i.right),i===e.root)return e.root=n,n.color=0,t.detach(),c(),void(e.root.parent=l);const r=1===i.color;if(i===i.parent.left?i.parent.left=n:i.parent.right=n,i===t?(n.parent=i.parent,b(e,n)):(i.parent===t?n.parent=i:n.parent=i.parent,b(e,n),i.left=t.left,i.right=t.right,i.parent=t.parent,i.color=t.color,t===e.root?e.root=i:t===t.parent.left?t.parent.left=i:t.parent.right=i,i.left!==l&&(i.left.parent=i),i.right!==l&&(i.right.parent=i),i.size_left=t.size_left,i.lf_left=t.lf_left,b(e,i)),t.detach(),n.parent.left===n){const t=a(n),i=u(n);if(t!==n.parent.size_left||i!==n.parent.lf_left){const r=t-n.parent.size_left,s=i-n.parent.lf_left;n.parent.size_left=t,n.parent.lf_left=i,m(e,n.parent,r,s)}}if(b(e,n.parent),r)return void c();let s;for(;n!==e.root&&0===n.color;)n===n.parent.left?(s=n.parent.right,1===s.color&&(s.color=0,n.parent.color=1,d(e,n.parent),s=n.parent.right),0===s.left.color&&0===s.right.color?(s.color=1,n=n.parent):(0===s.right.color&&(s.left.color=0,s.color=1,g(e,s),s=n.parent.right),s.color=n.parent.color,n.parent.color=0,s.right.color=0,d(e,n.parent),n=e.root)):(s=n.parent.left,1===s.color&&(s.color=0,n.parent.color=1,g(e,n.parent),s=n.parent.left),0===s.left.color&&0===s.right.color?(s.color=1,n=n.parent):(0===s.left.color&&(s.right.color=0,s.color=1,d(e,s),s=n.parent.left),s.color=n.parent.color,n.parent.color=0,s.left.color=0,g(e,n.parent),n=e.root));n.color=0,c()}function _(e,t){for(b(e,t);t!==e.root&&1===t.parent.color;)if(t.parent===t.parent.parent.left){const n=t.parent.parent.right;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&d(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,g(e,t.parent.parent))}else{const n=t.parent.parent.left;1===n.color?(t.parent.color=0,n.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&g(e,t=t.parent),t.parent.color=0,t.parent.parent.color=1,d(e,t.parent.parent))}e.root.color=0}function m(e,t,n,i){for(;t!==e.root&&t!==l;)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}function b(e,t){let n=0,i=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(n=a((t=t.parent).left)-t.size_left,i=u(t.left)-t.lf_left,t.size_left+=n,t.lf_left+=i;t!==e.root&&(0!==n||0!==i);)t.parent.left===t&&(t.parent.size_left+=n,t.parent.lf_left+=i),t=t.parent}}l.parent=l,l.left=l,l.right=l,l.color=0;var L=n(77277);const C=65535;function x(e){let t;return t=e[e.length-1]<65536?new Uint16Array(e.length):new Uint32Array(e.length),t.set(e,0),t}class I{constructor(e,t,n,i,r){this.lineStarts=e,this.cr=t,this.lf=n,this.crlf=i,this.isBasicASCII=r}}function N(e,t=!0){const n=[0];let i=1;for(let t=0,r=e.length;t<r;t++){const s=e.charCodeAt(t);13===s?t+1<r&&10===e.charCodeAt(t+1)?(n[i++]=t+2,t++):n[i++]=t+1:10===s&&(n[i++]=t+1)}return t?x(n):n}function S(e,t){e.length=0,e[0]=0;let n=1,i=0,r=0,s=0,h=!0;for(let l=0,f=t.length;l<f;l++){const o=t.charCodeAt(l);13===o?l+1<f&&10===t.charCodeAt(l+1)?(s++,e[n++]=l+2,l++):(i++,e[n++]=l+1):10===o?(r++,e[n++]=l+1):h&&9!==o&&(o<32||o>126)&&(h=!1)}const l=new I(x(e),i,r,s,h);return e.length=0,l}class v{constructor(e,t,n,i,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=r}}class O{constructor(e,t){this.buffer=e,this.lineStarts=t}}class B{constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==l&&e.iterate(e.root,(e=>(e!==l&&this._pieces.push(e.piece),!0)))}read(){return 0===this._pieces.length?0===this._index?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:0===this._index?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}}class A{constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){const n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1;const n=this._cache;for(let i=0;i<n.length;i++){const r=n[i];(null===r.node.parent||r.nodeStartOffset>=e)&&(n[i]=null,t=!0)}if(t){const e=[];for(const t of n)null!==t&&e.push(t);this._cache=e}}}class w{constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new O("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=l,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let t=0,n=e.length;t<n;t++)if(e[t].buffer.length>0){e[t].lineStarts||(e[t].lineStarts=N(e[t].buffer));const n=new v(t+1,{line:0,column:0},{line:e[t].lineStarts.length-1,column:e[t].buffer.length-e[t].lineStarts[e[t].lineStarts.length-1]},e[t].lineStarts.length-1,e[t].buffer.length);this._buffers.push(e[t]),i=this.rbInsertRight(i,n)}this._searchCache=new A(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){const t=C,n=t-Math.floor(21845),i=2*n;let r="",s=0;const h=[];if(this.iterate(this.root,(t=>{const l=this.getNodeContent(t),f=l.length;if(s<=n||s+f<i)return r+=l,s+=f,!0;const o=r.replace(/\r\n|\r|\n/g,e);return h.push(new O(o,N(o))),r=l,s=f,!0})),s>0){const t=r.replace(/\r\n|\r|\n/g,e);h.push(new O(t,N(t)))}this.create(h,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new B(this,e)}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==l;)if(i.left!==l&&i.lf_left+1>=e)i=i.left;else{if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;return n+(this.getAccumulatedValue(i,e-i.lf_left-2)+t-1)}e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0;const r=e;for(;t!==l;)if(0!==t.size_left&&t.size_left>=e)t=t.left;else{if(t.size_left+t.piece.length>=e){const s=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+s.index,0===s.index){const e=r-this.getOffsetAt(n+1,1);return new i.L(n+1,e+1)}return new i.L(n+1,s.remainder+1)}if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===l){const t=r-e-this.getOffsetAt(n+1,1);return new i.L(n+1,t+1)}t=t.right}return new i.L(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,i);return t?t===this._EOL&&this._EOLNormalized&&t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){const n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.substring(r+e.remainder,r+t.remainder)}let n=e.node;const i=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);let s=i.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==l;){const e=this._buffers[n.piece.bufferIndex].buffer,i=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=e.substring(i,i+t.remainder);break}s+=e.substr(i,n.piece.length),n=n.next()}return s}getLinesContent(){const e=[];let t=0,n="",i=!1;return this.iterate(this.root,(r=>{if(r===l)return!0;const s=r.piece;let h=s.length;if(0===h)return!0;const f=this._buffers[s.bufferIndex].buffer,o=this._buffers[s.bufferIndex].lineStarts,a=s.start.line,u=s.end.line;let c=o[a]+s.start.column;if(i&&(10===f.charCodeAt(c)&&(c++,h--),e[t++]=n,n="",i=!1,0===h))return!0;if(a===u)return this._EOLNormalized||13!==f.charCodeAt(c+h-1)?n+=f.substr(c,h):(i=!0,n+=f.substr(c,h-1)),!0;n+=this._EOLNormalized?f.substring(c,Math.max(c,o[a+1]-this._EOLLength)):f.substring(c,o[a+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let i=a+1;i<u;i++)n=this._EOLNormalized?f.substring(o[i],o[i+1]-this._EOLLength):f.substring(o[i],o[i+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return this._EOLNormalized||13!==f.charCodeAt(o[u]+s.end.column-1)?n=f.substr(o[u],s.end.column):(i=!0,0===s.end.column?t--:n=f.substr(o[u],s.end.column-1)),!0})),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e||(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,"")),this._lastVisitedLine.value}_getCharCode(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}{const t=this._buffers[e.node.piece.bufferIndex],n=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(n)}}getLineCharCode(e,t){const n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}findMatchesInNode(e,t,n,i,s,h,l,f,o,a,u){const c=this._buffers[e.piece.bufferIndex],d=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),g=this.offsetInBuffer(e.piece.bufferIndex,s),p=this.offsetInBuffer(e.piece.bufferIndex,h);let _;const m={line:0,column:0};let b,C;t._wordSeparators?(b=c.buffer.substring(g,p),C=e=>e+g,t.reset(0)):(b=c.buffer,C=e=>e,t.reset(g));do{if(_=t.next(b),_){if(C(_.index)>=p)return a;this.positionInBuffer(e,C(_.index)-d,m);const t=this.getLineFeedCnt(e.piece.bufferIndex,s,m),h=m.line===s.line?m.column-s.column+i:m.column+1,l=h+_[0].length;if(u[a++]=(0,L.iE)(new r.e(n+t,h,n+t,l),_,f),C(_.index)+_[0].length>=p)return a;if(a>=o)return a}}while(_);return a}findMatchesLineByLine(e,t,n,i){const r=[];let s=0;const h=new L.sz(t.wordSeparators,t.regex);let l=this.nodeAt2(e.startLineNumber,e.startColumn);if(null===l)return[];const f=this.nodeAt2(e.endLineNumber,e.endColumn);if(null===f)return[];let o=this.positionInBuffer(l.node,l.remainder);const a=this.positionInBuffer(f.node,f.remainder);if(l.node===f.node)return this.findMatchesInNode(l.node,h,e.startLineNumber,e.startColumn,o,a,t,n,i,s,r),r;let u=e.startLineNumber,c=l.node;for(;c!==f.node;){const f=this.getLineFeedCnt(c.piece.bufferIndex,o,c.piece.end);if(f>=1){const l=this._buffers[c.piece.bufferIndex].lineStarts,a=this.offsetInBuffer(c.piece.bufferIndex,c.piece.start),d=l[o.line+f],g=u===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(c,h,u,g,o,this.positionInBuffer(c,d-a),t,n,i,s,r),s>=i)return r;u+=f}const a=u===e.startLineNumber?e.startColumn-1:0;if(u===e.endLineNumber){const l=this.getLineContent(u).substring(a,e.endColumn-1);return s=this._findMatchesInLine(t,h,l,e.endLineNumber,a,s,r,n,i),r}if(s=this._findMatchesInLine(t,h,this.getLineContent(u).substr(a),u,a,s,r,n,i),s>=i)return r;u++,l=this.nodeAt2(u,1),c=l.node,o=this.positionInBuffer(l.node,l.remainder)}if(u===e.endLineNumber){const l=u===e.startLineNumber?e.startColumn-1:0,f=this.getLineContent(u).substring(l,e.endColumn-1);return s=this._findMatchesInLine(t,h,f,e.endLineNumber,l,s,r,n,i),r}const d=u===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(f.node,h,u,d,o,a,t,n,i,s,r),r}_findMatchesInLine(e,t,n,i,h,l,f,o,a){const u=e.wordSeparators;if(!o&&e.simpleSearch){const t=e.simpleSearch,o=t.length,c=n.length;let d=-o;for(;-1!==(d=n.indexOf(t,d+o));)if((!u||(0,L.cM)(u,n,c,d,o))&&(f[l++]=new s.tk(new r.e(i,d+1+h,i,d+1+o+h),null),l>=a))return l;return l}let c;t.reset(0);do{if(c=t.next(n),c&&(f[l++]=(0,L.iE)(new r.e(i,c.index+1+h,i,c.index+1+c[0].length+h),c,o),l>=a))return l}while(c);return l}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==l){const{node:n,remainder:i,nodeStartOffset:r}=this.nodeAt(e),s=n.piece,h=s.bufferIndex,l=this.positionInBuffer(n,i);if(0===n.piece.bufferIndex&&s.end.line===this._lastChangeBufferPos.line&&s.end.column===this._lastChangeBufferPos.column&&r+s.length===e&&t.length<C)return this.appendToNode(n,t),void this.computeBufferMetadata();if(r===e)this.insertContentToNodeLeft(t,n),this._searchCache.validate(e);else if(r+n.piece.length>e){const e=[];let r=new v(s.bufferIndex,l,s.end,this.getLineFeedCnt(s.bufferIndex,l,s.end),this.offsetInBuffer(h,s.end)-this.offsetInBuffer(h,l));if(this.shouldCheckCRLF()&&this.endWithCR(t)){if(10===this.nodeCharCodeAt(n,i)){const e={line:r.start.line+1,column:0};r=new v(r.bufferIndex,e,r.end,this.getLineFeedCnt(r.bufferIndex,e,r.end),r.length-1),t+="\n"}}if(this.shouldCheckCRLF()&&this.startWithLF(t)){if(13===this.nodeCharCodeAt(n,i-1)){const r=this.positionInBuffer(n,i-1);this.deleteNodeTail(n,r),t="\r"+t,0===n.piece.length&&e.push(n)}else this.deleteNodeTail(n,l)}else this.deleteNodeTail(n,l);const f=this.createNewPieces(t);r.length>0&&this.rbInsertRight(n,r);let o=n;for(let e=0;e<f.length;e++)o=this.rbInsertRight(o,f[e]);this.deleteNodes(e)}else this.insertContentToNodeRight(t,n)}else{const e=this.createNewPieces(t);let n=this.rbInsertLeft(null,e[0]);for(let t=1;t<e.length;t++)n=this.rbInsertRight(n,e[t])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===l)return;const n=this.nodeAt(e),i=this.nodeAt(e+t),r=n.node,s=i.node;if(r===s){const s=this.positionInBuffer(r,n.remainder),h=this.positionInBuffer(r,i.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){const e=r.next();return p(this,r),this.validateCRLFWithPrevNode(e),void this.computeBufferMetadata()}return this.deleteNodeHead(r,h),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),void this.computeBufferMetadata()}return n.nodeStartOffset+r.piece.length===e+t?(this.deleteNodeTail(r,s),this.validateCRLFWithNextNode(r),void this.computeBufferMetadata()):(this.shrinkNode(r,s,h),void this.computeBufferMetadata())}const h=[],f=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,f),this._searchCache.validate(e),0===r.piece.length&&h.push(r);const o=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,o),0===s.piece.length&&h.push(s);for(let e=r.next();e!==l&&e!==s;e=e.next())h.push(e);const a=0===r.piece.length?r.prev():r;this.deleteNodes(h),this.validateCRLFWithNextNode(a),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){const n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){const i=t.piece,r={line:i.start.line+1,column:0},s=new v(i.bufferIndex,r,i.end,this.getLineFeedCnt(i.bufferIndex,r,i.end),i.length-1);t.piece=s,e+="\n",m(this,t,-1,-1),0===t.piece.length&&n.push(t)}const i=this.createNewPieces(e);let r=this.rbInsertLeft(t,i[i.length-1]);for(let e=i.length-2;e>=0;e--)r=this.rbInsertLeft(r,i[e]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+="\n");const n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]);let r=i;for(let e=1;e<n.length;e++)r=this.rbInsertRight(r,n[e]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){const i=e.piece,r=e.piece.bufferIndex,s=this._buffers[r].lineStarts,h=s[i.start.line]+i.start.column+t;let l=i.start.line,f=i.end.line,o=0,a=0,u=0;for(;l<=f&&(o=l+(f-l)/2|0,u=s[o],o!==f);)if(a=s[o+1],h<u)f=o-1;else{if(!(h>=a))break;l=o+1}return n?(n.line=o,n.column=h-u,null):{line:o,column:h-u}}getLineFeedCnt(e,t,n){if(0===n.column)return n.line-t.line;const i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;const r=i[n.line+1],s=i[n.line]+n.column;if(r>s+1)return n.line-t.line;const h=s-1;return 13===this._buffers[e].buffer.charCodeAt(h)?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)p(this,e[t])}createNewPieces(e){if(e.length>C){const t=[];for(;e.length>C;){const n=e.charCodeAt(65534);let i;13===n||n>=55296&&n<=56319?(i=e.substring(0,65534),e=e.substring(65534)):(i=e.substring(0,C),e=e.substring(C));const r=N(i);t.push(new v(this._buffers.length,{line:0,column:0},{line:r.length-1,column:i.length-r[r.length-1]},r.length-1,i.length)),this._buffers.push(new O(i,r))}const n=N(e);return t.push(new v(this._buffers.length,{line:0,column:0},{line:n.length-1,column:e.length-n[n.length-1]},n.length-1,e.length)),this._buffers.push(new O(e,n)),t}let t=this._buffers[0].buffer.length;const n=N(e,!1);let i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&0!==t&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let e=0;e<n.length;e++)n[e]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(0!==t)for(let e=0;e<n.length;e++)n[e]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}const r=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,h={line:s,column:r-this._buffers[0].lineStarts[s]},l=new v(0,i,h,this.getLineFeedCnt(0,i,h),r-t);return this._lastChangeBufferPos=h,[l]}getLineRawContent(e,t=0){let n=this.root,i="";const r=this._searchCache.get2(e);if(r){n=r.node;const s=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),h=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt!==e){const i=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return h.substring(l+s,l+i-t)}i=h.substring(l+s,l+n.piece.length)}else{let r=0;const s=e;for(;n!==l;)if(n.left!==l&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){const i=this.getAccumulatedValue(n,e-n.lf_left-2),h=this.getAccumulatedValue(n,e-n.lf_left-1),l=this._buffers[n.piece.bufferIndex].buffer,f=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return r+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:r,nodeStartLineNumber:s-(e-1-n.lf_left)}),l.substring(f+i,f+h-t)}if(n.lf_left+n.piece.lineFeedCnt===e-1){const t=this.getAccumulatedValue(n,e-n.lf_left-2),r=this._buffers[n.piece.bufferIndex].buffer,s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=r.substring(s+t,s+n.piece.length);break}e-=n.lf_left+n.piece.lineFeedCnt,r+=n.size_left+n.piece.length,n=n.right}}for(n=n.next();n!==l;){const e=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const r=this.getAccumulatedValue(n,0),s=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=e.substring(s,s+r-t),i}{const t=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=e.substr(t,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==l;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){const n=e.piece,i=this.positionInBuffer(e,t),r=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){const t=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(t!==r)return{index:t,remainder:0}}return{index:r,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;const n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[r]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){const n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),s=t,h=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),f=l-i,o=h-r,a=n.length+o;e.piece=new v(n.bufferIndex,n.start,s,l,a),m(this,e,o,f)}deleteNodeHead(e,t){const n=e.piece,i=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),s=t,h=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=h-i,f=r-this.offsetInBuffer(n.bufferIndex,s),o=n.length+f;e.piece=new v(n.bufferIndex,s,n.end,h,o),m(this,e,f,l)}shrinkNode(e,t,n){const i=e.piece,r=i.start,s=i.end,h=i.length,l=i.lineFeedCnt,f=t,o=this.getLineFeedCnt(i.bufferIndex,i.start,f),a=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,r);e.piece=new v(i.bufferIndex,i.start,f,o,a),m(this,e,a-h,o-l);const u=new v(i.bufferIndex,n,s,this.getLineFeedCnt(i.bufferIndex,n,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,n)),c=this.rbInsertRight(e,u);this.validateCRLFWithPrevNode(c)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+="\n");const n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;const r=N(t,!1);for(let e=0;e<r.length;e++)r[e]+=i;if(n){const e=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-e}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));const s=this._buffers[0].lineStarts.length-1,h={line:s,column:this._buffers[0].buffer.length-this._buffers[0].lineStarts[s]},l=e.piece.length+t.length,f=e.piece.lineFeedCnt,o=this.getLineFeedCnt(0,e.piece.start,h),a=o-f;e.piece=new v(e.piece.bufferIndex,e.piece.start,h,o,l),this._lastChangeBufferPos=h,m(this,e,t.length,a)}nodeAt(e){let t=this.root;const n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==l;)if(t.size_left>e)t=t.left;else{if(t.size_left+t.piece.length>=e){i+=t.size_left;const n={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(n),n}e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right}return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==l;)if(n.left!==l&&n.lf_left>=e-1)n=n.left;else{if(n.lf_left+n.piece.lineFeedCnt>e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(r+t-1,s),nodeStartOffset:i}}if(n.lf_left+n.piece.lineFeedCnt===e-1){const r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:i};t-=n.piece.length-r;break}e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==l;){if(n.piece.lineFeedCnt>0){const e=this.getAccumulatedValue(n,0),i=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,e),nodeStartOffset:i}}if(n.piece.length>=t-1){return{node:n,remainder:t-1,nodeStartOffset:this.offsetOfNode(n)}}t-=n.piece.length,n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;const n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&"\n"===this._EOL)}startWithLF(e){if("string"==typeof e)return 10===e.charCodeAt(0);if(e===l||0===e.piece.lineFeedCnt)return!1;const t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,r=n[i]+t.start.column;if(i===n.length-1)return!1;return!(n[i+1]>r+1)&&10===this._buffers[t.bufferIndex].buffer.charCodeAt(r)}endWithCR(e){return"string"==typeof e?13===e.charCodeAt(e.length-1):e!==l&&0!==e.piece.lineFeedCnt&&13===this.nodeCharCodeAt(e,e.piece.length-1)}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){const t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){const n=[],i=this._buffers[e.piece.bufferIndex].lineStarts;let r;r=0===e.piece.end.column?{line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:{line:e.piece.end.line,column:e.piece.end.column-1};const s=e.piece.length-1,h=e.piece.lineFeedCnt-1;e.piece=new v(e.piece.bufferIndex,e.piece.start,r,h,s),m(this,e,-1,-1),0===e.piece.length&&n.push(e);const l={line:t.piece.start.line+1,column:0},f=t.piece.length-1,o=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new v(t.piece.bufferIndex,l,t.piece.end,o,f),m(this,t,-1,-1),0===t.piece.length&&n.push(t);const a=this.createNewPieces("\r\n");this.rbInsertRight(e,a[0]);for(let e=0;e<n.length;e++)p(this,n[e])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){const n=t.next();if(this.startWithLF(n)){if(e+="\n",1===n.piece.length)p(this,n);else{const e=n.piece,t={line:e.start.line+1,column:0},i=e.length-1,r=this.getLineFeedCnt(e.bufferIndex,t,e.end);n.piece=new v(e.bufferIndex,t,e.end,r,i),m(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===l)return t(l);const n=this.iterate(e.left,t);return n?t(e)&&this.iterate(e.right,t):n}getNodeContent(e){if(e===l)return"";const t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,r)}getPieceContent(e){const t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){const n=new h(t,1);n.left=l,n.right=l,n.parent=l,n.size_left=0,n.lf_left=0;if(this.root===l)this.root=n,n.color=0;else if(e.right===l)e.right=n,n.parent=e;else{const t=f(e.right);t.left=n,n.parent=t}return _(this,n),n}rbInsertLeft(e,t){const n=new h(t,1);if(n.left=l,n.right=l,n.parent=l,n.size_left=0,n.lf_left=0,this.root===l)this.root=n,n.color=0;else if(e.left===l)e.left=n,n.parent=e;else{const t=o(e.left);t.right=n,n.parent=t}return _(this,n),n}}},91567:(e,t,n)=>{n.d(t,{A:()=>u});var i=n(4669),r=n(97295),s=n(24314),h=n(84973),l=n(39125),f=n(23795),o=n(93033),a=n(5976);class u extends a.JT{constructor(e,t,n,r,s,h,f){super(),this._onDidChangeContent=this._register(new i.Q5),this._BOM=t,this._mightContainNonBasicASCII=!h,this._mightContainRTL=r,this._mightContainUnusualLineTerminators=s,this._pieceTree=new l.nD(e,n,f)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){const n=e+t,i=this.getPositionAt(e),r=this.getPositionAt(n);return new s.e(i.lineNumber,i.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";const n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;const n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn);let r=0;const s=this._getEndOfLine(t),h=this.getEOL();if(s.length!==h.length){r=(s.length-h.length)*(e.endLineNumber-e.startLineNumber)}return i-n+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0;const i=e.startLineNumber,s=e.endLineNumber;for(let t=i;t<=s;t++){const h=this.getLineContent(t),l=t===i?e.startColumn-1:0,f=t===s?e.endColumn-1:h.length;for(let e=l;e<f;e++)r.ZG(h.charCodeAt(e))?(n+=1,e+=1):n+=1}return n+=this._getEndOfLine(t).length*(s-i),n}return this.getValueLengthInRange(e,t)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineFirstNonWhitespaceColumn(e){const t=r.LC(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=r.ow(this.getLineContent(e));return-1===t?0:t+2}_getEndOfLine(e){switch(e){case 1:return"\n";case 2:return"\r\n";case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,s=this._mightContainUnusualLineTerminators,l=this._mightContainNonBasicASCII,a=!0,c=[];for(let t=0;t<e.length;t++){const n=e[t];a&&n._isTracked&&(a=!1);const h=n.range;if(n.text){let e=!0;l||(e=!r.$i(n.text),l=e),!i&&e&&(i=r.Ut(n.text)),!s&&e&&(s=r.ab(n.text))}let o="",u=0,d=0,g=0;if(n.text){let e;[u,d,g,e]=(0,f.Q)(n.text);const t=this.getEOL();o=0===e||e===("\r\n"===t?2:1)?n.text:n.text.replace(/\r\n|\r|\n/g,t)}c[t]={sortIndex:t,identifier:n.identifier||null,range:h,rangeOffset:this.getOffsetAt(h.startLineNumber,h.startColumn),rangeLength:this.getValueLengthInRange(h),text:o,eolCount:u,firstLineLength:d,lastLineLength:g,forceMoveMarkers:Boolean(n.forceMoveMarkers),isAutoWhitespaceEdit:n.isAutoWhitespaceEdit||!1}}c.sort(u._sortOpsAscending);let d=!1;for(let e=0,t=c.length-1;e<t;e++){const t=c[e].range.getEndPosition(),n=c[e+1].range.getStartPosition();if(n.isBeforeOrEqual(t)){if(n.isBefore(t))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(c=this._reduceOperations(c));const g=n||t?u._getInverseEditRanges(c):[],p=[];if(t)for(let e=0;e<c.length;e++){const t=c[e],n=g[e];if(t.isAutoWhitespaceEdit&&t.range.isEmpty())for(let e=n.startLineNumber;e<=n.endLineNumber;e++){let i="";e===n.startLineNumber&&(i=this.getLineContent(t.range.startLineNumber),-1!==r.LC(i))||p.push({lineNumber:e,oldContent:i})}}let _=null;if(n){let e=0;_=[];for(let t=0;t<c.length;t++){const n=c[t],i=g[t],r=this.getValueInRange(n.range),s=n.rangeOffset+e;e+=n.text.length-r.length,_[t]={sortIndex:n.sortIndex,identifier:n.identifier,range:i,text:r,textChange:new o.q(n.rangeOffset,r,s,n.text)}}d||_.sort(((e,t)=>e.sortIndex-t.sortIndex))}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=s,this._mightContainNonBasicASCII=l;const m=this._doApplyEdits(c);let b=null;if(t&&p.length>0){p.sort(((e,t)=>t.lineNumber-e.lineNumber)),b=[];for(let e=0,t=p.length;e<t;e++){const t=p[e].lineNumber;if(e>0&&p[e-1].lineNumber===t)continue;const n=p[e].oldContent,i=this.getLineContent(t);0!==i.length&&i!==n&&-1===r.LC(i)&&b.push(t)}}return this._onDidChangeContent.fire(),new h.je(_,m,b)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1;const n=e[0].range,i=e[e.length-1].range,r=new s.e(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn);let h=n.startLineNumber,l=n.startColumn;const o=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=i.range;t=t||i.forceMoveMarkers,o.push(this.getValueInRange(new s.e(h,l,r.startLineNumber,r.startColumn))),i.text.length>0&&o.push(i.text),h=r.endLineNumber,l=r.endColumn}const a=o.join(""),[u,c,d]=(0,f.Q)(a);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:a,eolCount:u,firstLineLength:c,lastLineLength:d,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(u._sortOpsDescending);const t=[];for(let n=0;n<e.length;n++){const i=e[n],r=i.range.startLineNumber,h=i.range.startColumn,l=i.range.endLineNumber,f=i.range.endColumn;if(r===l&&h===f&&0===i.text.length)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);const o=new s.e(r,h,l,f);t.push({range:o,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}static _getInverseEditRanges(e){const t=[];let n=0,i=0,r=null;for(let h=0,l=e.length;h<l;h++){const l=e[h];let f,o,a;if(r?r.range.endLineNumber===l.range.startLineNumber?(f=n,o=i+(l.range.startColumn-r.range.endColumn)):(f=n+(l.range.startLineNumber-r.range.endLineNumber),o=l.range.startColumn):(f=l.range.startLineNumber,o=l.range.startColumn),l.text.length>0){const e=l.eolCount+1;a=1===e?new s.e(f,o,f,o+l.firstLineLength):new s.e(f,o,f+e-1,l.lastLineLength+1)}else a=new s.e(f,o,f,o);n=a.endLineNumber,i=a.endColumn,t.push(a),r=l}return t}static _sortOpsAscending(e,t){const n=s.e.compareRangesUsingEnds(e.range,t.range);return 0===n?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){const n=s.e.compareRangesUsingEnds(e.range,t.range);return 0===n?t.sortIndex-e.sortIndex:-n}}},89676:(e,t,n)=>{n.d(t,{M:()=>l});var i=n(97295),r=n(39125),s=n(91567);class h{constructor(e,t,n,i,r,s,h,l,f){this._chunks=e,this._bom=t,this._cr=n,this._lf=i,this._crlf=r,this._containsRTL=s,this._containsUnusualLineTerminators=h,this._isBasicASCII=l,this._normalizeEOL=f}_getEOL(e){const t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return 0===t?1===e?"\n":"\r\n":n>t/2?"\r\n":"\n"}create(e){const t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&("\r\n"===t&&(this._cr>0||this._lf>0)||"\n"===t&&(this._cr>0||this._crlf>0)))for(let e=0,i=n.length;e<i;e++){const i=n[e].buffer.replace(/\r\n|\r|\n/g,t),s=(0,r.Xp)(i);n[e]=new r.Lv(i,s)}const i=new s.A(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}}class l{constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(0===e.length)return;0===this.chunks.length&&i.uS(e)&&(this.BOM=i.c1,e=e.substr(1));const t=e.charCodeAt(e.length-1);13===t||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){(t||0!==e.length)&&(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){const t=(0,r.Nr)(this._tmpLineStarts,e);this.chunks.push(new r.Lv(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=i.Ut(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=i.ab(e)))}finish(e=!0){return this._finish(),new h(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(0===this.chunks.length&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;const e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);const t=(0,r.Xp)(e.buffer);e.lineStarts=t,13===this._previousChar&&this.cr++}}}},90310:(e,t,n)=>{n.d(t,{Ck:()=>h,oQ:()=>s});var i=n(9488),r=n(85427);class s{constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}insertValues(e,t){e=(0,r.A)(e);const n=this.values,i=this.prefixSum,s=t.length;return 0!==s&&(this.values=new Uint32Array(n.length+s),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e),e+s),this.values.set(t,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,t){return e=(0,r.A)(e),t=(0,r.A)(t),this.values[e]!==t&&(this.values[e]=t,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,t){e=(0,r.A)(e),t=(0,r.A)(t);const n=this.values,i=this.prefixSum;if(e>=n.length)return!1;const s=n.length-e;return t>=s&&(t=s),0!==t&&(this.values=new Uint32Array(n.length-t),this.values.set(n.subarray(0,e),0),this.values.set(n.subarray(e+t),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return 0===this.values.length?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=(0,r.A)(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let t=this.prefixSumValidIndex[0]+1;0===t&&(this.prefixSum[0]=this.values[0],t++),e>=this.values.length&&(e=this.values.length-1);for(let n=t;n<=e;n++)this.prefixSum[n]=this.prefixSum[n-1]+this.values[n];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,n=this.values.length-1,i=0,r=0,s=0;for(;t<=n;)if(i=t+(n-t)/2|0,r=this.prefixSum[i],s=r-this.values[i],e<s)n=i-1;else{if(!(e>=r))break;t=i+1}return new l(i,e-s)}}class h{constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),0===e?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();const t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new l(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=(0,i.Zv)(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){const t=this._values[e],n=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=n+t;for(let i=0;i<t;i++)this._indexBySum[n+i]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}}class l{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}}}}]);