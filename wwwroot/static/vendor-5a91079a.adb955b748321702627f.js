"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[803],{74961:(e,t,i)=>{i.d(t,{_:()=>d,t:()=>r});var s=i(9488),o=i(75392),n=i(97295);class r{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}}class d{constructor(e,t,i,s,n,r,l=o.mX.default,a=void 0){this.clipboardText=a,this._snippetCompareFn=d._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=s,this._options=n,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=l,"top"===r?this._snippetCompareFn=d._compareCompletionItemsSnippetsUp:"bottom"===r&&(this._snippetCompareFn=d._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();const e=new Set;for(const[t,i]of this.getItemsByProvider())i.length>0&&i[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let r="",d="";const l=1===this._refilterKind?this._items:this._filteredItems,a=[],h=!this._options.filterGraceful||l.length>2e3?o.EW:o.l7;for(let s=0;s<l.length;s++){const c=l[s];if(c.isInvalid)continue;const g=this._itemsByProvider.get(c.provider);g?g.push(c):this._itemsByProvider.set(c.provider,[c]);const u=c.position.column-c.editStart.column,p=u+i-(c.position.column-this._column);if(r.length!==p&&(r=0===p?"":t.slice(-p),d=r.toLowerCase()),c.word=r,0===p)c.score=o.CL.Default;else{let e=0;for(;e<u;){const t=r.charCodeAt(e);if(32!==t&&9!==t)break;e+=1}if(e>=p)c.score=o.CL.Default;else if("string"==typeof c.completion.filterText){const t=h(r,d,e,c.completion.filterText,c.filterTextLow,0,this._fuzzyScoreOptions);if(!t)continue;0===(0,n.zY)(c.completion.filterText,c.textLabel)?c.score=t:(c.score=(0,o.jB)(r,d,e,c.textLabel,c.labelLow,0),c.score[0]=t[0])}else{const t=h(r,d,e,c.textLabel,c.labelLow,0,this._fuzzyScoreOptions);if(!t)continue;c.score=t}}c.idx=s,c.distance=this._wordDistance.distance(c.position,c.completion),a.push(c),e.push(c.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,s.HW)(e.length-.85,e,((e,t)=>e-t)):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return d._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return d._compareCompletionItems(e,t)}}},37626:(e,t,i)=>{i.d(t,{n:()=>Ke});var s,o=i(85152),n=i(9488),r=i(71050),d=i(17301),l=i(4669),a=i(8313),h=i(5976),c=i(1432),g=i(84013),u=i(98401),p=i(43407),_=i(16830),m=i(69386),f=i(50187),S=i(24314),v=i(29102),w=i(98762),b=i(35084),y=i(80378),x=i(42035),C=i(63580),D=i(94565),I=i(93983),N=i(72065),L=i(43557),T=i(55621),O=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},k=function(e,t){return function(i,s){t(i,s,e)}};let M=s=class{constructor(e,t){this._editor=e,this._index=0,this._ckOtherSuggestions=s.OtherSuggestions.bindTo(t)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},i){if(0===e.items.length)return void this.reset();s._moveIndex(!0,e,t)!==t?(this._acceptNext=i,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(e,t,i){let s=i;for(let o=t.items.length;o>0&&(s=(s+t.items.length+(e?1:-1))%t.items.length,s!==i)&&t.items[s].completion.additionalTextEdits;o--);return s}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=s._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};M.OtherSuggestions=new I.uy("hasOtherSuggestions",!1),M=s=O([k(1,I.i6)],M);var P=i(44906);class A{constructor(e,t,i,s){this._disposables=new h.SL,this._disposables.add(i.onDidSuggest((e=>{0===e.completionModel.items.length&&this.reset()}))),this._disposables.add(i.onDidCancel((e=>{this.reset()}))),this._disposables.add(t.onDidShow((()=>this._onItem(t.getFocusedItem())))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType((o=>{if(this._active&&!t.isFrozen()&&0!==i.state){const t=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&s(this._active.item)}})))}_onItem(e){if(!e||!(0,n.Of)(e.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===e.item)return;const t=new P.q;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var R=i(85996);class F{constructor(e,t){this._disposables=new h.SL,this._lastOvertyped=[],this._locked=!1,this._disposables.add(e.onWillType((()=>{if(this._locked||!e.hasModel())return;const t=e.getSelections(),i=t.length;let s=!1;for(let e=0;e<i;e++)if(!t[e].isEmpty()){s=!0;break}if(!s)return void(0!==this._lastOvertyped.length&&(this._lastOvertyped.length=0));this._lastOvertyped=[];const o=e.getModel();for(let e=0;e<i;e++){const i=t[e];if(o.getValueLengthInRange(i)>F._maxSelectionLength)return;this._lastOvertyped[e]={value:o.getValueInRange(i),multiline:i.startLineNumber!==i.endLineNumber}}}))),this._disposables.add(t.onDidTrigger((e=>{this._locked=!0}))),this._disposables.add(t.onDidCancel((e=>{this._locked=!1})))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}}F._maxSelectionLength=51200;var z=i(65321),W=i(43799),E=i(15393),H=i(59870),V=i(97295),B=i(22874),$=i(90317),K=i(27628),G=i(84144),j=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,s){t(i,s,e)}};class q extends K.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();this.label&&(this.label.textContent=(0,C.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,q.symbolPrintEnter(e)))}static symbolPrintEnter(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"⏎")}}let Q=class{constructor(e,t,i,s,o){this._menuId=t,this._menuService=s,this._contextKeyService=o,this._menuDisposables=new h.SL,this.element=z.R3(e,z.$(".suggest-status-bar"));const n=e=>e instanceof G.U8?i.createInstance(q,e,void 0):void 0;this._leftActions=new $.o(this.element,{actionViewItemProvider:n}),this._rightActions=new $.o(this.element,{actionViewItemProvider:n}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){const e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{const t=[],i=[];for(const[s,o]of e.getActions())"left"===s?t.push(...o):i.push(...o);this._leftActions.clear(),this._leftActions.push(t),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange((()=>t()))),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};Q=j([U(2,N.TG),U(3,G.co),U(4,I.i6)],Q);i(71713);var Z=i(52365),J=i(82992),X=i(92321),Y=i(97781),ee=i(17735),te=i(59538),ie=i(32429),se=i(25670),oe=i(59365),ne=i(72545),re=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},de=function(e,t){return function(i,s){t(i,s,e)}};function le(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}let ae=class{constructor(e,t){this._editor=e,this._onDidClose=new l.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new l.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new h.SL,this._renderDisposeable=new h.SL,this._borderWidth=1,this._size=new z.Ro(330,0),this.domNode=z.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(ne.$,{editor:e}),this._body=z.$(".body"),this._scrollbar=new te.s$(this._body,{alwaysConsumeMouseWheel:!0}),z.R3(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=z.R3(this._body,z.$(".header")),this._close=z.R3(this._header,z.$("span"+se.k.asCSSSelector(ie.l.close))),this._close.title=C.NC("details.close","Close"),this._type=z.R3(this._header,z.$("p.type")),this._docs=z.R3(this._body,z.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._configureFont()})))}dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){const e=this._editor.getOptions(),t=e.get(50),i=t.getMassagedFontFamily(),s=e.get(119)||t.fontSize,o=e.get(120)||t.lineHeight,n=t.fontWeight,r=`${s}px`,d=`${o}px`;this.domNode.style.fontSize=r,this.domNode.style.lineHeight=""+o/s,this.domNode.style.fontWeight=n,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=d,this._close.style.width=d}getLayoutInfo(){const e=this._editor.getOption(120)||this._editor.getOption(50).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=C.NC("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}renderItem(e,t){var i,s;this._renderDisposeable.clear();let{detail:o,documentation:n}=e.completion;if(t){let t="";t+=`score: ${e.score[0]}\n`,t+=`prefix: ${null!==(i=e.word)&&void 0!==i?i:"(no prefix)"}\n`,t+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}\n`,t+=`distance: ${e.distance} (localityBonus-setting)\n`,t+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}\n`,t+=`commit_chars: ${null===(s=e.completion.commitCharacters)||void 0===s?void 0:s.join("")}\n`,n=(new oe.W5).appendCodeblock("empty",t),o=`Provider: ${e.provider._debugDisplayName}`}if(t||le(e)){if(this.domNode.classList.remove("no-docs","no-type"),o){const e=o.length>1e5?`${o.substr(0,1e5)}…`:o;this._type.textContent=e,this._type.title=e,z.$Z(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(e))}else z.PO(this._type),this._type.title="",z.Cp(this._type),this.domNode.classList.add("no-type");if(z.PO(this._docs),"string"==typeof n)this._docs.classList.remove("markdown-docs"),this._docs.textContent=n;else if(n){this._docs.classList.add("markdown-docs"),z.PO(this._docs);const e=this._markdownRenderer.render(n);this._docs.appendChild(e.element),this._renderDisposeable.add(e),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=e=>{e.preventDefault(),e.stopPropagation()},this._close.onclick=e=>{e.preventDefault(),e.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){const i=new z.Ro(e,t);z.Ro.equals(i,this._size)||(this._size=i,z.dp(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}};ae=re([de(1,N.TG)],ae);class he{constructor(e,t){let i,s;this.widget=e,this._editor=t,this.allowEditorOverflow=!0,this._disposables=new h.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new ee.f,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let o=0,n=0;this._disposables.add(this._resizable.onDidWillResize((()=>{i=this._topLeft,s=this._resizable.size}))),this._disposables.add(this._resizable.onDidResize((e=>{if(i&&s){this.widget.layout(e.dimension.width,e.dimension.height);let t=!1;e.west&&(n=s.width-e.dimension.width,t=!0),e.north&&(o=s.height-e.dimension.height,t=!0),t&&this._applyTopLeft({top:i.top+o,left:i.left+n})}e.done&&(i=void 0,s=void 0,o=0,n=0,this._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((()=>{var e;this._anchorBox&&this._placeAtAnchor(this._anchorBox,null!==(e=this._userSize)&&void 0!==e?e:this.widget.size,this._preferAlignAtTop)})))}dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){var i;const s=e.getBoundingClientRect();this._anchorBox=s,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,null!==(i=this._userSize)&&void 0!==i?i:this.widget.size,t)}_placeAtAnchor(e,t,i){var s;const o=z.D6(this.getDomNode().ownerDocument.body),n=this.widget.getLayoutInfo(),r=new z.Ro(220,2*n.lineHeight),d=e.top,l=function(){const i=o.width-(e.left+e.width+n.borderWidth+n.horizontalPadding),s=-n.borderWidth+e.left+e.width,l=new z.Ro(i,o.height-e.top-n.borderHeight-n.verticalPadding),a=l.with(void 0,e.top+e.height-n.borderHeight-n.verticalPadding);return{top:d,left:s,fit:i-t.width,maxSizeTop:l,maxSizeBottom:a,minSize:r.with(Math.min(i,r.width))}}(),a=function(){const i=e.left-n.borderWidth-n.horizontalPadding,s=Math.max(n.horizontalPadding,e.left-t.width-n.borderWidth),l=new z.Ro(i,o.height-e.top-n.borderHeight-n.verticalPadding),a=l.with(void 0,e.top+e.height-n.borderHeight-n.verticalPadding);return{top:d,left:s,fit:i-t.width,maxSizeTop:l,maxSizeBottom:a,minSize:r.with(Math.min(i,r.width))}}(),h=function(){const i=e.left,s=-n.borderWidth+e.top+e.height,d=new z.Ro(e.width-n.borderHeight,o.height-e.top-e.height-n.verticalPadding);return{top:s,left:i,fit:d.height-t.height,maxSizeBottom:d,maxSizeTop:d,minSize:r.with(d.width)}}(),c=[l,a,h],g=null!==(s=c.find((e=>e.fit>=0)))&&void 0!==s?s:c.sort(((e,t)=>t.fit-e.fit))[0],u=e.top+e.height-n.borderHeight;let p,_=t.height;const m=Math.max(g.maxSizeTop.height,g.maxSizeBottom.height);let f;_>m&&(_=m),i?_<=g.maxSizeTop.height?(p=!0,f=g.maxSizeTop):(p=!1,f=g.maxSizeBottom):_<=g.maxSizeBottom.height?(p=!1,f=g.maxSizeBottom):(p=!0,f=g.maxSizeTop);let{top:S,left:v}=g;!p&&_>e.height&&(S=u-_);const w=this._editor.getDomNode();if(w){const e=w.getBoundingClientRect();S-=e.top,v-=e.left}this._applyTopLeft({left:v,top:S}),this._resizable.enableSashes(!p,g===l,p,g!==l),this._resizable.minSize=g.minSize,this._resizable.maxSize=f,this._resizable.layout(_,Math.min(f.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}}var ce,ge=i(59834),ue=i(75392),pe=i(70666),_e=i(71204),me=i(22016),fe=i(73733),Se=i(72042),ve=i(75761),we=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},be=function(e,t){return function(i,s){t(i,s,e)}};function ye(e){return`suggest-aria-id:${e}`}const xe=(0,i(59554).q5)("suggest-more-info",ie.l.chevronRight,C.NC("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Ce=new((ce=class{extract(e,t){if(e.textLabel.match(ce._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(ce._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){const i="string"==typeof e.completion.documentation?e.completion.documentation:e.completion.documentation.value,s=ce._regexRelaxed.exec(i);if(s&&(0===s.index||s.index+s[0].length===i.length))return t[0]=s[0],!0}return!1}})._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,ce._regexStrict=new RegExp(`^${ce._regexRelaxed.source}$`,"i"),ce);let De=class{constructor(e,t,i,s){this._editor=e,this._modelService=t,this._languageService=i,this._themeService=s,this._onDidToggleDetails=new l.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){const t=new h.SL,i=e;i.classList.add("show-file-icons");const s=(0,z.R3)(e,(0,z.$)(".icon")),o=(0,z.R3)(s,(0,z.$)("span.colorspan")),n=(0,z.R3)(e,(0,z.$)(".contents")),r=(0,z.R3)(n,(0,z.$)(".main")),d=(0,z.R3)(r,(0,z.$)(".icon-label.codicon")),l=(0,z.R3)(r,(0,z.$)("span.left")),a=(0,z.R3)(r,(0,z.$)("span.right")),c=new ge.g(l,{supportHighlights:!0,supportIcons:!0});t.add(c);const g=(0,z.R3)(l,(0,z.$)("span.signature-label")),u=(0,z.R3)(l,(0,z.$)("span.qualifier-label")),p=(0,z.R3)(a,(0,z.$)("span.details-label")),_=(0,z.R3)(a,(0,z.$)("span.readMore"+se.k.asCSSSelector(xe)));_.title=C.NC("readMore","Read More");return{root:i,left:l,right:a,icon:s,colorspan:o,iconLabel:c,iconContainer:d,parametersLabel:g,qualifierLabel:u,detailsLabel:p,readMore:_,disposables:t,configureFont:()=>{const e=this._editor.getOptions(),t=e.get(50),o=t.getMassagedFontFamily(),n=t.fontFeatureSettings,d=e.get(119)||t.fontSize,l=e.get(120)||t.lineHeight,a=t.fontWeight,h=`${d}px`,c=`${l}px`,g=`${t.letterSpacing}px`;i.style.fontSize=h,i.style.fontWeight=a,i.style.letterSpacing=g,r.style.fontFamily=o,r.style.fontFeatureSettings=n,r.style.lineHeight=c,s.style.height=c,s.style.width=c,_.style.height=c,_.style.width=c}}}renderElement(e,t,i){i.configureFont();const{completion:s}=e;i.root.id=ye(t),i.colorspan.style.backgroundColor="";const o={labelEscapeNewLines:!0,matches:(0,ue.mB)(e.score)},n=[];if(19===s.kind&&Ce.extract(e,n))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=n[0];else if(20===s.kind&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";const t=(0,me.r)(this._modelService,this._languageService,pe.o.from({scheme:"fake",path:e.textLabel}),ve.R.FILE),n=(0,me.r)(this._modelService,this._languageService,pe.o.from({scheme:"fake",path:s.detail}),ve.R.FILE);o.extraClasses=t.length>n.length?t:n}else 23===s.kind&&this._themeService.getFileIconTheme().hasFolderIcons?(i.icon.className="icon hide",i.iconContainer.className="icon hide",o.extraClasses=[(0,me.r)(this._modelService,this._languageService,pe.o.from({scheme:"fake",path:e.textLabel}),ve.R.FOLDER),(0,me.r)(this._modelService,this._languageService,pe.o.from({scheme:"fake",path:s.detail}),ve.R.FOLDER)].flat()):(i.icon.className="icon hide",i.iconContainer.className="",i.iconContainer.classList.add("suggest-icon",...se.k.asClassNameArray(_e.gX.toIcon(s.kind))));s.tags&&s.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,o),"string"==typeof s.label?(i.parametersLabel.textContent="",i.detailsLabel.textContent=Ie(s.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=Ie(s.label.detail||""),i.detailsLabel.textContent=Ie(s.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(118).showInlineDetails?(0,z.$Z)(i.detailsLabel):(0,z.Cp)(i.detailsLabel),le(e)?(i.right.classList.add("can-expand-details"),(0,z.$Z)(i.readMore),i.readMore.onmousedown=e=>{e.stopPropagation(),e.preventDefault()},i.readMore.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),(0,z.Cp)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};function Ie(e){return e.replace(/\r\n|\r|\n/g,"")}De=we([be(1,fe.q),be(2,Se.O),be(3,Y.XE)],De);var Ne,Le=i(86253),Te=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},Oe=function(e,t){return function(i,s){t(i,s,e)}};(0,J.P6G)("editorSuggestWidget.background",{dark:J.D0T,light:J.D0T,hcDark:J.D0T,hcLight:J.D0T},C.NC("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,J.P6G)("editorSuggestWidget.border",{dark:J.D1_,light:J.D1_,hcDark:J.D1_,hcLight:J.D1_},C.NC("editorSuggestWidgetBorder","Border color of the suggest widget."));const ke=(0,J.P6G)("editorSuggestWidget.foreground",{dark:J.NOs,light:J.NOs,hcDark:J.NOs,hcLight:J.NOs},C.NC("editorSuggestWidgetForeground","Foreground color of the suggest widget."));(0,J.P6G)("editorSuggestWidget.selectedForeground",{dark:J.NPS,light:J.NPS,hcDark:J.NPS,hcLight:J.NPS},C.NC("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,J.P6G)("editorSuggestWidget.selectedIconForeground",{dark:J.cbQ,light:J.cbQ,hcDark:J.cbQ,hcLight:J.cbQ},C.NC("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));const Me=(0,J.P6G)("editorSuggestWidget.selectedBackground",{dark:J.Vqd,light:J.Vqd,hcDark:J.Vqd,hcLight:J.Vqd},C.NC("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));(0,J.P6G)("editorSuggestWidget.highlightForeground",{dark:J.Gwp,light:J.Gwp,hcDark:J.Gwp,hcLight:J.Gwp},C.NC("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,J.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:J.PX0,light:J.PX0,hcDark:J.PX0,hcLight:J.PX0},C.NC("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,J.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,J.ZnX)(ke,.5),light:(0,J.ZnX)(ke,.5),hcDark:(0,J.ZnX)(ke,.5),hcLight:(0,J.ZnX)(ke,.5)},C.NC("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class Pe{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof B.H}`}restore(){var e;const t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{const e=JSON.parse(t);if(z.Ro.is(e))return z.Ro.lift(e)}catch(e){}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let Ae=Ne=class{constructor(e,t,i,s,o){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._pendingLayout=new h.XK,this._pendingShowDetails=new h.XK,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new E._F,this._disposables=new h.SL,this._onDidSelect=new l.K3,this._onDidFocus=new l.K3,this._onDidHide=new l.Q5,this._onDidShow=new l.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new l.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new ee.f,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new Re(this,e),this._persistedSize=new Pe(t,e);class n{constructor(e,t,i=!1,s=!1){this.persistedSize=e,this.currentSize=t,this.persistHeight=i,this.persistWidth=s}}let r;this._disposables.add(this.element.onDidWillResize((()=>{this._contentWidget.lockPreference(),r=new n(this._persistedSize.restore(),this.element.size)}))),this._disposables.add(this.element.onDidResize((e=>{var t,i,s,o;if(this._resize(e.dimension.width,e.dimension.height),r&&(r.persistHeight=r.persistHeight||!!e.north||!!e.south,r.persistWidth=r.persistWidth||!!e.east||!!e.west),e.done){if(r){const{itemHeight:e,defaultSize:n}=this.getLayoutInfo(),d=Math.round(e/2);let{width:l,height:a}=this.element.size;(!r.persistHeight||Math.abs(r.currentSize.height-a)<=d)&&(a=null!==(i=null===(t=r.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:n.height),(!r.persistWidth||Math.abs(r.currentSize.width-l)<=d)&&(l=null!==(o=null===(s=r.persistedSize)||void 0===s?void 0:s.width)&&void 0!==o?o:n.width),this._persistedSize.store(new z.Ro(l,a))}this._contentWidget.unlockPreference(),r=void 0}}))),this._messageElement=z.R3(this.element.domNode,z.$(".message")),this._listElement=z.R3(this.element.domNode,z.$(".tree"));const d=this._disposables.add(o.createInstance(ae,this.editor));d.onDidClose(this.toggleDetails,this,this._disposables),this._details=new he(d,this.editor);const a=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(118).showIcons);a();const c=o.createInstance(De,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails((()=>this.toggleDetails()))),this._list=new W.aV("SuggestWidget",this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>C.NC("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:e=>{let t=e.textLabel;if("string"!=typeof e.completion.label){const{detail:i,description:s}=e.completion.label;i&&s?t=C.NC("label.full","{0} {1}, {2}",t,i,s):i?t=C.NC("label.detail","{0} {1}",t,i):s&&(t=C.NC("label.desc","{0}, {1}",t,s))}if(!e.isResolved||!this._isDetailsVisible())return t;const{documentation:i,detail:s}=e.completion,o=V.WU("{0}{1}",s||"",i?"string"==typeof i?i:i.value:"");return C.NC("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",t,o)}}}),this._list.style((0,Le.TU)({listInactiveFocusBackground:Me,listInactiveFocusOutline:J.xL1})),this._status=o.createInstance(Q,this.element.domNode,T.GI);const g=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(118).showStatusBar);g(),this._disposables.add(s.onDidColorThemeChange((e=>this._onThemeChange(e)))),this._onThemeChange(s.getColorTheme()),this._disposables.add(this._list.onMouseDown((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onTap((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onDidChangeSelection((e=>this._onListSelection(e)))),this._disposables.add(this._list.onDidChangeFocus((e=>this._onListFocus(e)))),this._disposables.add(this.editor.onDidChangeCursorSelection((()=>this._onCursorSelectionChanged()))),this._disposables.add(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(118)&&(g(),a()),this._completionModel&&(e.hasChanged(50)||e.hasChanged(119)||e.hasChanged(120))&&this._list.splice(0,this._list.length,this._completionModel.items)}))),this._ctxSuggestWidgetVisible=T._y.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=T._y.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=T._y.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=T._y.HasFocusedSuggestion.bindTo(i),this._disposables.add(z.mu(this._details.widget.domNode,"keydown",(e=>{this._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((e=>this._onEditorMouseDown(e))))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){void 0!==e.element&&void 0!==e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=(0,X.c3)(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const i=e.elements[0],s=e.indexes[0];i!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(s),this._currentSuggestionDetails=(0,E.PG)((async e=>{const t=(0,E.Vg)((()=>{this._isDetailsVisible()&&this.showDetails(!0)}),250),s=e.onCancellationRequested((()=>t.dispose()));try{return await i.resolve(e)}finally{t.dispose(),s.dispose()}})),this._currentSuggestionDetails.then((()=>{s>=this._list.length||i!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[i]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:ye(s)}))})).catch(d.dL)),this._onDidFocus.fire({item:i,index:s,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",4===e),this.element.domNode.classList.remove("message"),e){case 0:z.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=Ne.LOADING_MESSAGE,z.Cp(this._listElement,this._status.element),z.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,o.i7)(Ne.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=Ne.NO_SUGGESTIONS_MESSAGE,z.Cp(this._listElement,this._status.element),z.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,(0,o.i7)(Ne.NO_SUGGESTIONS_MESSAGE);break;case 3:case 4:z.Cp(this._messageElement),z.$Z(this._listElement,this._status.element),this._show();break;case 5:z.Cp(this._messageElement),z.$Z(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)}),100)}showTriggered(e,t){0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,E.Vg)((()=>this._setState(1)),t)))}showSuggestions(e,t,i,s,o){var n,r;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(n=this._loadingTimeout)||void 0===n||n.dispose(),null===(r=this._currentSuggestionDetails)||void 0===r||r.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state)return void this._setState(4);const d=this._completionModel.items.length,l=0===d;if(this._ctxSuggestWidgetMultipleSuggestions.set(d>1),l)return this._setState(s?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=z.lI(z.Jj(this.element.domNode),(()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}))}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!le(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._pendingShowDetails.value=z.lI(z.Jj(this.element.domNode),(()=>{this._pendingShowDetails.clear(),this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details")),this.editor.focus()}))}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return 4===this._state}_afterRender(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(e){var t,i,s;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())return;const o=z.D6(this.element.domNode.ownerDocument.body),n=this.getLayoutInfo();e||(e=n.defaultSize);let r=e.height,d=e.width;if(this._status.element.style.height=`${n.itemHeight}px`,2===this._state||1===this._state)r=n.itemHeight+n.borderHeight,d=n.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new z.Ro(d,r),this._contentWidget.setPreference(2);else{const l=o.width-n.borderHeight-2*n.horizontalPadding;d>l&&(d=l);const a=this._completionModel?this._completionModel.stats.pLabelLen*n.typicalHalfwidthCharacterWidth:d,h=n.statusBarHeight+this._list.contentHeight+n.borderHeight,c=n.itemHeight+n.statusBarHeight,g=z.i(this.editor.getDomNode()),u=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=g.top+u.top+u.height,_=Math.min(o.height-p-n.verticalPadding,h),m=g.top+u.top-n.verticalPadding,f=Math.min(m,h);let S=Math.min(Math.max(f,_)+n.borderHeight,h);r===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(r=this._cappedHeight.wanted),r<c&&(r=c),r>S&&(r=S);const v=150;r>_||this._forceRenderingAbove&&m>v?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),S=f):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),S=_),this.element.preferredSize=new z.Ro(a,n.defaultSize.height),this.element.maxSize=new z.Ro(l,S),this.element.minSize=new z.Ro(220,c),this._cappedHeight=r===h?{wanted:null!==(s=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==s?s:e.height,capped:r}:void 0}this._resize(d,r)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=t-o+"px",this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,2===(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0]))}getLayoutInfo(){const e=this.editor.getOption(50),t=(0,H.uZ)(this.editor.getOption(120)||e.lineHeight,8,1e3),i=this.editor.getOption(118).showStatusBar&&2!==this._state&&1!==this._state?t:0,s=this._details.widget.borderWidth,o=2*s;return{itemHeight:t,statusBarHeight:i,borderWidth:s,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new z.Ro(430,i+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};Ae.LOADING_MESSAGE=C.NC("suggestWidget.loading","Loading..."),Ae.NO_SUGGESTIONS_MESSAGE=C.NC("suggestWidget.noSuggestions","No suggestions."),Ae=Ne=Te([Oe(1,Z.Uy),Oe(2,I.i6),Oe(3,Y.XE),Oe(4,N.TG)],Ae);class Re{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:s}=this._widget.getLayoutInfo();return new z.Ro(t+2*i+s,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}var Fe,ze=i(10829),We=i(95935),Ee=i(89954),He=i(54530),Ve=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},Be=function(e,t){return function(i,s){t(i,s,e)}};class $e{constructor(e,t){this._model=e,this._position=t,this._decorationOptions=He.qx.register({description:"suggest-line-suffix",stickiness:1});if(e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),s=e.getPositionAt(i+1);e.changeDecorations((e=>{this._marker&&e.removeDecoration(this._marker),this._marker=e.addDecoration(S.e.fromPositions(t,s),this._decorationOptions)}))}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations((e=>{e.removeDecoration(this._marker),this._marker=void 0}))}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let Ke=Fe=class{static get(e){return e.getContribution(Fe.ID)}constructor(e,t,i,s,o,n,r){this._memoryService=t,this._commandService=i,this._contextKeyService=s,this._instantiationService=o,this._logService=n,this._telemetryService=r,this._lineSuffix=new h.XK,this._toDispose=new h.SL,this._selectors=new Ge((e=>e.priority)),this._onWillInsertSuggestItem=new l.Q5,this.onWillInsertSuggestItem=this._onWillInsertSuggestItem.event,this.editor=e,this.model=o.createInstance(R.U,this.editor),this._selectors.register({priority:0,select:(e,t,i)=>this._memoryService.select(e,t,i)});const d=T._y.InsertMode.bindTo(s);d.set(e.getOption(118).insertMode),this._toDispose.add(this.model.onDidTrigger((()=>d.set(e.getOption(118).insertMode)))),this.widget=this._toDispose.add(new z.vx((0,z.Jj)(e.getDomNode()),(()=>{const e=this._instantiationService.createInstance(Ae,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect((e=>this._insertSuggestion(e,0)),this));const t=new A(this.editor,e,this.model,(e=>this._insertSuggestion(e,2)));this._toDispose.add(t);const i=T._y.MakesTextEdit.bindTo(this._contextKeyService),s=T._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),o=T._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,h.OF)((()=>{i.reset(),s.reset(),o.reset()}))),this._toDispose.add(e.onDidFocus((({item:e})=>{const t=this.editor.getPosition(),n=e.editStart.column,r=t.column;let d=!0;if(!("smart"!==this.editor.getOption(1)||2!==this.model.state||e.completion.additionalTextEdits||4&e.completion.insertTextRules||r-n!==e.completion.insertText.length)){d=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:n,endLineNumber:t.lineNumber,endColumn:r})!==e.completion.insertText}i.set(d),s.set(!f.L.equals(e.editInsertEnd,e.editReplaceEnd)),o.set(Boolean(e.provider.resolveCompletionItem)||Boolean(e.completion.documentation)||e.completion.detail!==e.completion.label)}))),this._toDispose.add(e.onDetailsKeyDown((e=>{e.toKeyCodeChord().equals(new a.$M(!0,!1,!1,!1,33))||c.dz&&e.toKeyCodeChord().equals(new a.$M(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeyCodeChord().isModifierKey()||this.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new z.vx((0,z.Jj)(e.getDomNode()),(()=>this._toDispose.add(new F(this.editor,this.model))))),this._alternatives=this._toDispose.add(new z.vx((0,z.Jj)(e.getDomNode()),(()=>this._toDispose.add(new M(this.editor,this._contextKeyService))))),this._toDispose.add(o.createInstance(x.p,e)),this._toDispose.add(this.model.onDidTrigger((e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new $e(this.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((e=>{if(e.triggerOptions.shy)return;let t=-1;for(const i of this._selectors.itemsOrderedByPriorityDesc)if(t=i.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items),-1!==t)break;if(-1===t&&(t=0),0===this.model.state)return;let i=!1;if(e.triggerOptions.auto){const t=this.editor.getOption(118);"never"===t.selectionMode||"always"===t.selectionMode?i="never"===t.selectionMode:"whenTriggerCharacter"===t.selectionMode?i=1!==e.triggerOptions.triggerKind:"whenQuickSuggestion"===t.selectionMode&&(i=1===e.triggerOptions.triggerKind&&!e.triggerOptions.refilter)}this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.triggerOptions.auto,i)}))),this._toDispose.add(this.model.onDidCancel((e=>{e.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{this.model.cancel(),this.model.clear()})));const g=T._y.AcceptSuggestionsOnEnter.bindTo(s),u=()=>{const e=this.editor.getOption(1);g.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>u()))),u()}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const i=w.f.get(this.editor);if(!i)return;this._onWillInsertSuggestItem.fire({item:e.item});const s=this.editor.getModel(),o=s.getAlternativeVersionId(),{item:n}=e,l=[],a=new r.AU;1&t||this.editor.pushUndoStop();const h=this.getOverwriteInfo(n,Boolean(8&t));this._memoryService.memorize(s,this.editor.getPosition(),n);const c=n.isResolved;let u=-1,_=-1;if(Array.isArray(n.completion.additionalTextEdits)){this.model.cancel();const e=p.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",n.completion.additionalTextEdits.map((e=>{let t=S.e.lift(e.range);if(t.startLineNumber===n.position.lineNumber&&t.startColumn>n.position.column){const e=this.editor.getPosition().column-n.position.column,i=e,s=S.e.spansMultipleLines(t)?0:e;t=new S.e(t.startLineNumber,t.startColumn+i,t.endLineNumber,t.endColumn+s)}return m.h.replaceMove(t,e.text)}))),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!c){const e=new g.G;let i;const o=s.onDidChangeContent((e=>{if(e.isFlush)return a.cancel(),void o.dispose();for(const t of e.changes){const e=S.e.getEndPosition(t.range);i&&!f.L.isBefore(e,i)||(i=e)}})),r=t;t|=2;let d=!1;const h=this.editor.onWillType((()=>{h.dispose(),d=!0,2&r||this.editor.pushUndoStop()}));l.push(n.resolve(a.token).then((()=>{if(!n.completion.additionalTextEdits||a.token.isCancellationRequested)return;if(i&&n.completion.additionalTextEdits.some((e=>f.L.isBefore(i,S.e.getStartPosition(e.range)))))return!1;d&&this.editor.pushUndoStop();const e=p.Z.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",n.completion.additionalTextEdits.map((e=>m.h.replaceMove(S.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor),!d&&2&r||this.editor.pushUndoStop(),!0})).then((t=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",e.elapsed(),t),_=!0===t?1:!1===t?0:-2})).finally((()=>{o.dispose(),h.dispose()})))}let{insertText:v}=n.completion;if(4&n.completion.insertTextRules||(v=b.Yj.escape(v)),this.model.cancel(),i.insert(v,{overwriteBefore:h.overwriteBefore,overwriteAfter:h.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&n.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),n.completion.command)if(n.completion.command.id===je.id)this.model.trigger({auto:!0,retrigger:!0});else{const e=new g.G;l.push(this._commandService.executeCommand(n.completion.command.id,...n.completion.command.arguments?[...n.completion.command.arguments]:[]).catch((e=>{n.completion.extensionId?(0,d.Cp)(e):(0,d.dL)(e)})).finally((()=>{u=e.elapsed()})))}4&t&&this._alternatives.value.set(e,(e=>{for(a.cancel();s.canUndo();){o!==s.getAlternativeVersionId()&&s.undo(),this._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(n),Promise.all(l).finally((()=>{this._reportSuggestionAcceptedTelemetry(n,s,c,u,_),this.model.clear(),a.dispose()}))}_reportSuggestionAcceptedTelemetry(e,t,i,s,o){var n,r,d;0!==Math.floor(100*Math.random())&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:null!==(r=null===(n=e.extensionId)||void 0===n?void 0:n.value)&&void 0!==r?r:"unknown",providerId:null!==(d=e.provider._debugDisplayName)&&void 0!==d?d:"unknown",kind:e.completion.kind,basenameHash:(0,Ee.vp)((0,We.EZ)(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:(0,We.DZ)(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:s,additionalEditsAsync:o})}getOverwriteInfo(e,t){(0,u.p_)(this.editor.hasModel());let i="replace"===this.editor.getOption(118).insertMode;t&&(i=!i);const s=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:s+(this.editor.getPosition().column-e.position.column),overwriteAfter:o+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(e){if((0,n.Of)(e.completion.additionalTextEdits)){const t=C.NC("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,o.Z9)(t)}}triggerSuggest(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:null!=t&&t,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},s=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;const t=this.editor.getPosition(),i=e.editStart.column,s=t.column;if(s-i!==e.completion.insertText.length)return!0;return this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:i,endLineNumber:t.lineNumber,endColumn:s})!==e.completion.insertText};l.ju.once(this.model.onDidTrigger)((e=>{const t=[];l.ju.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{(0,h.B9)(t),i()}),void 0,t),this.model.onDidSuggest((({completionModel:e})=>{if((0,h.B9)(t),0===e.items.length)return void i();const o=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),n=e.items[o];s(n)?(this.editor.pushUndoStop(),this._insertSuggestion({index:o,item:n,model:e},7)):i()}),void 0,t)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let s=0;e&&(s|=4),t&&(s|=8),this._insertSuggestion(i,s)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};Ke.ID="editor.contrib.suggestController",Ke=Fe=Ve([Be(1,y.Fh),Be(2,D.H),Be(3,I.i6),Be(4,N.TG),Be(5,L.VZ),Be(6,ze.b)],Ke);class Ge{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(-1!==this._items.indexOf(e))throw new Error("Value is already registered");return this._items.push(e),this._items.sort(((e,t)=>this.prioritySelector(t)-this.prioritySelector(e))),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class je extends _.R6{constructor(){super({id:je.id,label:C.NC("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:I.Ao.and(v.u.writable,v.u.hasCompletionItemProvider,T._y.Visible.toNegated()),kbOpts:{kbExpr:v.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const s=Ke.get(t);if(!s)return;let o;i&&"object"==typeof i&&!0===i.auto&&(o=!0),s.triggerSuggest(void 0,o,void 0)}}je.id="editor.action.triggerSuggest",(0,_._K)(Ke.ID,Ke,2),(0,_.Qr)(je);const Ue=190,qe=_._l.bindToContribution(Ke.get);(0,_.fK)(new qe({id:"acceptSelectedSuggestion",precondition:I.Ao.and(T._y.Visible,T._y.HasFocusedSuggestion),handler(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:I.Ao.and(T._y.Visible,v.u.textInputFocus),weight:Ue},{primary:3,kbExpr:I.Ao.and(T._y.Visible,v.u.textInputFocus,T._y.AcceptSuggestionsOnEnter,T._y.MakesTextEdit),weight:Ue}],menuOpts:[{menuId:T.GI,title:C.NC("accept.insert","Insert"),group:"left",order:1,when:T._y.HasInsertAndReplaceRange.toNegated()},{menuId:T.GI,title:C.NC("accept.insert","Insert"),group:"left",order:1,when:I.Ao.and(T._y.HasInsertAndReplaceRange,T._y.InsertMode.isEqualTo("insert"))},{menuId:T.GI,title:C.NC("accept.replace","Replace"),group:"left",order:1,when:I.Ao.and(T._y.HasInsertAndReplaceRange,T._y.InsertMode.isEqualTo("replace"))}]})),(0,_.fK)(new qe({id:"acceptAlternativeSelectedSuggestion",precondition:I.Ao.and(T._y.Visible,v.u.textInputFocus,T._y.HasFocusedSuggestion),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:T.GI,group:"left",order:2,when:I.Ao.and(T._y.HasInsertAndReplaceRange,T._y.InsertMode.isEqualTo("insert")),title:C.NC("accept.replace","Replace")},{menuId:T.GI,group:"left",order:2,when:I.Ao.and(T._y.HasInsertAndReplaceRange,T._y.InsertMode.isEqualTo("replace")),title:C.NC("accept.insert","Insert")}]})),D.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,_.fK)(new qe({id:"hideSuggestWidget",precondition:T._y.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:9,secondary:[1033]}})),(0,_.fK)(new qe({id:"selectNextSuggestion",precondition:I.Ao.and(T._y.Visible,I.Ao.or(T._y.MultipleSuggestions,T._y.HasFocusedSuggestion.negate())),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,_.fK)(new qe({id:"selectNextPageSuggestion",precondition:I.Ao.and(T._y.Visible,I.Ao.or(T._y.MultipleSuggestions,T._y.HasFocusedSuggestion.negate())),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:12,secondary:[2060]}})),(0,_.fK)(new qe({id:"selectLastSuggestion",precondition:I.Ao.and(T._y.Visible,I.Ao.or(T._y.MultipleSuggestions,T._y.HasFocusedSuggestion.negate())),handler:e=>e.selectLastSuggestion()})),(0,_.fK)(new qe({id:"selectPrevSuggestion",precondition:I.Ao.and(T._y.Visible,I.Ao.or(T._y.MultipleSuggestions,T._y.HasFocusedSuggestion.negate())),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,_.fK)(new qe({id:"selectPrevPageSuggestion",precondition:I.Ao.and(T._y.Visible,I.Ao.or(T._y.MultipleSuggestions,T._y.HasFocusedSuggestion.negate())),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:11,secondary:[2059]}})),(0,_.fK)(new qe({id:"selectFirstSuggestion",precondition:I.Ao.and(T._y.Visible,I.Ao.or(T._y.MultipleSuggestions,T._y.HasFocusedSuggestion.negate())),handler:e=>e.selectFirstSuggestion()})),(0,_.fK)(new qe({id:"focusSuggestion",precondition:I.Ao.and(T._y.Visible,T._y.HasFocusedSuggestion.negate()),handler:e=>e.focusSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,_.fK)(new qe({id:"focusAndAcceptSuggestion",precondition:I.Ao.and(T._y.Visible,T._y.HasFocusedSuggestion.negate()),handler:e=>{e.focusSuggestion(),e.acceptSelectedSuggestion(!0,!1)}})),(0,_.fK)(new qe({id:"toggleSuggestionDetails",precondition:I.Ao.and(T._y.Visible,T._y.HasFocusedSuggestion),handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:T.GI,group:"right",order:1,when:I.Ao.and(T._y.DetailsVisible,T._y.CanResolve),title:C.NC("detail.more","show less")},{menuId:T.GI,group:"right",order:1,when:I.Ao.and(T._y.DetailsVisible.toNegated(),T._y.CanResolve),title:C.NC("detail.less","show more")}]})),(0,_.fK)(new qe({id:"toggleExplainMode",precondition:T._y.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2138}})),(0,_.fK)(new qe({id:"toggleSuggestionFocus",precondition:T._y.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,_.fK)(new qe({id:"insertBestCompletion",precondition:I.Ao.and(v.u.textInputFocus,I.Ao.equals("config.editor.tabCompletion","on"),x.p.AtEnd,T._y.Visible.toNegated(),M.OtherSuggestions.toNegated(),w.f.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest((0,u.Kn)(t)?{fallback:"tab",...t}:{fallback:"tab"})},kbOpts:{weight:Ue,primary:2}})),(0,_.fK)(new qe({id:"insertNextSuggestion",precondition:I.Ao.and(v.u.textInputFocus,I.Ao.equals("config.editor.tabCompletion","on"),M.OtherSuggestions,T._y.Visible.toNegated(),w.f.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:2}})),(0,_.fK)(new qe({id:"insertPrevSuggestion",precondition:I.Ao.and(v.u.textInputFocus,I.Ao.equals("config.editor.tabCompletion","on"),M.OtherSuggestions,T._y.Visible.toNegated(),w.f.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:Ue,kbExpr:v.u.textInputFocus,primary:1026}})),(0,_.Qr)(class extends _.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:C.NC("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(e,t){var i;null===(i=Ke.get(t))||void 0===i||i.resetWidgetSize()}})},88088:(e,t,i)=>{var s=i(71050),o=i(75392),n=i(53725),r=i(5976),d=i(11640),l=i(24314),a=i(10637),h=i(71922),c=i(74961),g=i(55621),u=i(80378),p=i(85996),_=i(24477),m=i(84972),f=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,s){t(i,s,e)}};class v{constructor(e,t,i,s,o,n){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=s,this.command=o,this.completion=n}}let w=class extends r.L6{constructor(e,t,i,s,o,n){super(o.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=s,this._suggestMemoryService=n}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&0===this.completionModel.getIncompleteProvider().size}get items(){var e;const t=[],{items:i}=this.completionModel,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},i),d=n.$.slice(i,r),a=n.$.slice(i,0,r);let h=5;for(const i of n.$.concat(d,a)){if(i.score===o.CL.Default)continue;const n=new l.e(i.editStart.lineNumber,i.editStart.column,i.editInsertEnd.lineNumber,i.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),r=i.completion.insertTextRules&&4&i.completion.insertTextRules?{snippet:i.completion.insertText}:i.completion.insertText;t.push(new v(n,r,null!==(e=i.filterTextLow)&&void 0!==e?e:i.labelLow,i.completion.additionalTextEdits,i.completion.command,i)),h-- >=0&&i.resolve(s.Ts.None)}return t}};w=f([S(5,u.Fh)],w);let b=class extends r.JT{constructor(e,t,i,s){super(),this._languageFeatureService=e,this._clipboardService=t,this._suggestMemoryService=i,this._editorService=s,this._store.add(e.inlineCompletionsProvider.register("*",this))}async provideInlineCompletions(e,t,i,s){var o;if(i.selectedSuggestionInfo)return;let n;for(const t of this._editorService.listCodeEditors())if(t.getModel()===e){n=t;break}if(!n)return;const r=n.getOption(89);if(g.tG.isAllOff(r))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const d=e.tokenization.getLineTokens(t.lineNumber),a=d.getStandardTokenType(d.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if("inline"!==g.tG.valueFor(r,a))return;let h,u,m=e.getWordAtPosition(t);if((null==m?void 0:m.word)||(h=this._getTriggerCharacterInfo(e,t)),!(null==m?void 0:m.word)&&!h)return;if(m||(m=e.getWordUntilPosition(t)),m.endColumn!==t.column)return;const f=e.getValueInRange(new l.e(t.lineNumber,1,t.lineNumber,t.column));if(!h&&(null===(o=this._lastResult)||void 0===o?void 0:o.canBeReused(e,t.lineNumber,m))){const e=new c.t(f,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=e,this._lastResult.acquire(),u=this._lastResult}else{const i=await(0,g.kL)(this._languageFeatureService.completionProvider,e,t,new g.A9(void 0,p.U.createSuggestFilter(n).itemKind,null==h?void 0:h.providers),h&&{triggerKind:1,triggerCharacter:h.ch},s);let o;i.needsClipboard&&(o=await this._clipboardService.readText());const r=new c._(i.items,t.column,new c.t(f,0),_.K.None,n.getOption(118),n.getOption(112),{boostFullMatch:!1,firstMatchCanBeWeak:!1},o);u=new w(e,t.lineNumber,m,r,i,this._suggestMemoryService)}return this._lastResult=u,u}handleItemDidShow(e,t){t.completion.resolve(s.Ts.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var i;const s=e.getValueInRange(l.e.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),o=new Set;for(const t of this._languageFeatureService.completionProvider.all(e))(null===(i=t.triggerCharacters)||void 0===i?void 0:i.includes(s))&&o.add(t);if(0!==o.size)return{providers:o,ch:s}}};b=f([S(0,h.p),S(1,m.p),S(2,u.Fh),S(3,d.$)],b),(0,a.y)(b)},80378:(e,t,i)=>{i.d(t,{Fh:()=>S});var s,o=i(15393),n=i(5976),r=i(43702),d=i(4767),l=i(71204),a=i(33108),h=i(65026),c=i(72065),g=i(52365),u=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},p=function(e,t){return function(i,s){t(i,s,e)}};class _{constructor(e){this.name=e}select(e,t,i){if(0===i.length)return 0;const s=i[0].score[0];for(let e=0;e<i.length;e++){const{score:t,completion:o}=i[e];if(t[0]!==s)break;if(o.preselect)return e}return 0}}class m extends _{constructor(){super("first")}memorize(e,t,i){}toJSON(){}fromJSON(){}}let f=s=class{constructor(e,t){this._storageService=e,this._configService=t,this._disposables=new n.SL,this._persistSoon=new o.pY((()=>this._saveState()),500),this._disposables.add(e.onWillSaveState((e=>{e.reason===g.fk.SHUTDOWN&&this._saveState()})))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}select(e,t,i){return this._withStrategy(e,t).select(e,t,i)}_withStrategy(e,t){var i;const o=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if((null===(i=this._strategy)||void 0===i?void 0:i.name)!==o){this._saveState();const e=s._strategyCtors.get(o)||m;this._strategy=new e;try{const e=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,t=this._storageService.get(`${s._storagePrefix}/${o}`,e);t&&this._strategy.fromJSON(JSON.parse(t))}catch(e){}}return this._strategy}_saveState(){if(this._strategy){const e=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,t=JSON.stringify(this._strategy);this._storageService.store(`${s._storagePrefix}/${this._strategy.name}`,t,e,1)}}};f._strategyCtors=new Map([["recentlyUsedByPrefix",class extends _{constructor(){super("recentlyUsedByPrefix"),this._trie=d.Id.forStrings(),this._seq=0}memorize(e,t,i){const{word:s}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${s}`;this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(e,t,i){const{word:s}=e.getWordUntilPosition(t);if(!s)return super.select(e,t,i);const o=`${e.getLanguageId()}/${s}`;let n=this._trie.get(o);if(n||(n=this._trie.findSubstr(o)),n)for(let e=0;e<i.length;e++){const{kind:t,insertText:s}=i[e].completion;if(t===n.type&&s===n.insertText)return e}return super.select(e,t,i)}toJSON(){const e=[];return this._trie.forEach(((t,i)=>e.push([i,t]))),e.sort(((e,t)=>-(e[1].touch-t[1].touch))).forEach(((e,t)=>e[1].touch=t)),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(const[t,i]of e)i.type="number"==typeof i.type?i.type:l.gX.fromString(i.type),this._trie.set(t,i)}}}],["recentlyUsed",class extends _{constructor(){super("recentlyUsed"),this._cache=new r.z6(300,.66),this._seq=0}memorize(e,t,i){const s=`${e.getLanguageId()}/${i.textLabel}`;this._cache.set(s,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(e,t,i){if(0===i.length)return 0;const s=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(s))return super.select(e,t,i);const o=i[0].score[0];let n=-1,r=-1,d=-1;for(let t=0;t<i.length&&i[t].score[0]===o;t++){const s=`${e.getLanguageId()}/${i[t].textLabel}`,o=this._cache.peek(s);if(o&&o.touch>d&&o.type===i[t].completion.kind&&o.insertText===i[t].completion.insertText&&(d=o.touch,r=t),i[t].completion.preselect&&-1===n)return t}return-1!==r?r:-1!==n?n:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();for(const[t,i]of e)i.touch=0,i.type="number"==typeof i.type?i.type:l.gX.fromString(i.type),this._cache.set(t,i);this._seq=this._cache.size}}],["first",m]]),f._storagePrefix="suggest/memories",f=s=u([p(0,g.Uy),p(1,a.Ui)],f);const S=(0,c.yh)("ISuggestMemories");(0,h.z)(S,f,1)},85996:(e,t,i)=>{i.d(t,{U:()=>T});var s,o=i(15393),n=i(71050),r=i(17301),d=i(4669),l=i(5976),a=i(97295),h=i(3860),c=i(85215),g=i(24477),u=i(84972),p=i(33108),_=i(93983),m=i(43557),f=i(10829),S=i(74961),v=i(55621),w=i(71922),b=i(75392),y=i(98401),x=i(78573),C=i(98762),D=i(48814),I=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},N=function(e,t){return function(i,s){t(i,s,e)}};class L{static shouldAutoTrigger(e){if(!e.hasModel())return!1;const t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);const s=t.getWordAtPosition(i);return!!s&&((s.endColumn===i.column||s.startColumn+1===i.column)&&!!isNaN(Number(s.word)))}constructor(e,t,i){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=i}}let T=s=class{constructor(e,t,i,s,n,r,a,c,g){this._editor=e,this._editorWorkerService=t,this._clipboardService=i,this._telemetryService=s,this._logService=n,this._contextKeyService=r,this._configurationService=a,this._languageFeaturesService=c,this._envService=g,this._toDispose=new l.SL,this._triggerCharacterListener=new l.SL,this._triggerQuickSuggest=new o._F,this._triggerState=void 0,this._completionDisposables=new l.SL,this._onDidCancel=new d.Q5,this._onDidTrigger=new d.Q5,this._onDidSuggest=new d.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new h.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((()=>{this._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})));let u=!1;this._toDispose.add(this._editor.onDidCompositionStart((()=>{u=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((()=>{u=!1,this._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((e=>{u||this._onCursorChange(e)}))),this._toDispose.add(this._editor.onDidChangeModelContent((()=>{u||void 0===this._triggerState||this._refilterCompletionItems()}))),this._updateTriggerCharacters()}dispose(){(0,l.B9)(this._triggerCharacterListener),(0,l.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(91)||!this._editor.hasModel()||!this._editor.getOption(121))return;const e=new Map;for(const t of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of t.triggerCharacters||[]){let s=e.get(i);s||(s=new Set,s.add((0,v.ZJ)()),e.set(i,s)),s.add(t)}const t=t=>{var i;if(!function(e,t,i){if(!Boolean(t.getContextKeyValue("inlineSuggestionVisible")))return!0;const s=t.getContextKeyValue(x.f.suppressSuggestions.key);return void 0!==s?!s:!e.getOption(62).suppressSuggestions}(this._editor,this._contextKeyService,this._configurationService))return;if(L.shouldAutoTrigger(this._editor))return;if(!t){const e=this._editor.getPosition();t=this._editor.getModel().getLineContent(e.lineNumber).substr(0,e.column-1)}let s="";(0,a.YK)(t.charCodeAt(t.length-1))?(0,a.ZG)(t.charCodeAt(t.length-2))&&(s=t.substr(t.length-2)):s=t.charAt(t.length-1);const o=e.get(s);if(o){const e=new Map;if(this._completionModel)for(const[t,i]of this._completionModel.getItemsByProvider())o.has(t)||e.set(t,i);this.trigger({auto:!0,triggerKind:1,triggerCharacter:s,retrigger:Boolean(this._completionModel),clipboardText:null===(i=this._completionModel)||void 0===i?void 0:i.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:e}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((()=>t())))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){var t;void 0!==this._triggerState&&(this._triggerQuickSuggest.cancel(),null===(t=this._requestToken)||void 0===t||t.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){void 0!==this._triggerState&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}_onCursorChange(e){if(!this._editor.hasModel())return;const t=this._currentSelection;this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source?this.cancel():void 0===this._triggerState&&0===e.reason?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():void 0!==this._triggerState&&3===e.reason&&this._refilterCompletionItems()}_onCompositionEnd(){void 0===this._triggerState?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var e;v.tG.isAllOff(this._editor.getOption(89))||this._editor.getOption(118).snippetsPreventQuickSuggestions&&(null===(e=C.f.get(this._editor))||void 0===e?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((()=>{if(void 0!==this._triggerState)return;if(!L.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const e=this._editor.getModel(),t=this._editor.getPosition(),i=this._editor.getOption(89);if(!v.tG.isAllOff(i)){if(!v.tG.isAllOn(i)){e.tokenization.tokenizeIfCheap(t.lineNumber);const s=e.tokenization.getLineTokens(t.lineNumber),o=s.getStandardTokenType(s.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if("on"!==v.tG.valueFor(i,o))return}(function(e,t,i){if(!Boolean(t.getContextKeyValue(x.f.inlineSuggestionVisible.key)))return!0;const s=t.getContextKeyValue(x.f.suppressSuggestions.key);return void 0!==s?!s:!e.getOption(62).suppressSuggestions})(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0})}}),this._editor.getOption(90)))}_refilterCompletionItems(){(0,y.p_)(this._editor.hasModel()),(0,y.p_)(void 0!==this._triggerState);const e=this._editor.getModel(),t=this._editor.getPosition(),i=new L(e,t,{...this._triggerState,refilter:!0});this._onNewContext(i)}trigger(e){var t,i,o,d,l,a;if(!this._editor.hasModel())return;const h=this._editor.getModel(),c=new L(h,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:null!==(t=e.shy)&&void 0!==t&&t,position:this._editor.getPosition()}),this._context=c;let u={triggerKind:null!==(i=e.triggerKind)&&void 0!==i?i:0};e.triggerCharacter&&(u={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new n.AU;let p=1;switch(this._editor.getOption(112)){case"top":p=0;break;case"bottom":p=2}const{itemKind:_,showDeprecated:m}=s.createSuggestFilter(this._editor),f=new v.A9(p,null!==(d=null===(o=e.completionOptions)||void 0===o?void 0:o.kindFilter)&&void 0!==d?d:_,null===(l=e.completionOptions)||void 0===l?void 0:l.providerFilter,null===(a=e.completionOptions)||void 0===a?void 0:a.providerItemsToReuse,m),w=g.K.create(this._editorWorkerService,this._editor),y=(0,v.kL)(this._languageFeaturesService.completionProvider,h,this._editor.getPosition(),f,u,this._requestToken.token);Promise.all([y,w]).then((async([t,i])=>{var s;if(null===(s=this._requestToken)||void 0===s||s.dispose(),!this._editor.hasModel())return;let o=null==e?void 0:e.clipboardText;if(!o&&t.needsClipboard&&(o=await this._clipboardService.readText()),void 0===this._triggerState)return;const n=this._editor.getModel(),r=new L(n,this._editor.getPosition(),e),d={...b.mX.default,firstMatchCanBeWeak:!this._editor.getOption(118).matchOnWordStartOnly};if(this._completionModel=new S._(t.items,this._context.column,{leadingLineContent:r.leadingLineContent,characterCountDelta:r.column-this._context.column},i,this._editor.getOption(118),this._editor.getOption(112),d,o),this._completionDisposables.add(t.disposable),this._onNewContext(r),this._reportDurationsTelemetry(t.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(const e of t.items)e.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${e.provider._debugDisplayName}`,e.completion)})).catch(r.dL)}_reportDurationsTelemetry(e){this._telemetryGate++%230==0&&setTimeout((()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)}))}static createSuggestFilter(e){const t=new Set;"none"===e.getOption(112)&&t.add(27);const i=e.getOption(118);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if((0,a.V8)(e.leadingLineContent)===(0,a.V8)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(L.shouldAutoTrigger(this._editor)&&this._context){const e=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:e}})}}else if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&0!==e.leadingWord.word.length){const e=new Map,t=new Set;for(const[i,s]of this._completionModel.getItemsByProvider())s.length>0&&s[0].container.incomplete?t.add(i):e.set(i,s);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:t,providerItemsToReuse:e}})}else{const t=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){const s=L.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(s&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=t,i=this._completionModel.items.length>0,i&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:i})}}else this.cancel();else this.cancel()}};T=s=I([N(1,c.p),N(2,u.p),N(3,f.b),N(4,m.VZ),N(5,_.i6),N(6,p.Ui),N(7,w.p),N(8,D.Y)],T)}}]);