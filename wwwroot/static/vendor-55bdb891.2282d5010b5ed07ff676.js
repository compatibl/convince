"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[7686],{96020:(e,t,i)=>{i.d(t,{Np:()=>s,OW:()=>o,Ou:()=>n});const n="editor.action.inlineSuggest.commit",s="editor.action.inlineSuggest.showPrevious",o="editor.action.inlineSuggest.showNext"},20757:(e,t,i)=>{i.d(t,{HL:()=>u,NY:()=>d,Vb:()=>a,bY:()=>h,s1:()=>c});var n=i(9488),s=i(97295),o=i(50187),r=i(24314),l=i(81129);class a{constructor(e,t){this.lineNumber=e,this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every(((t,i)=>t.equals(e.parts[i])))}renderForScreenReader(e){if(0===this.parts.length)return"";const t=this.parts[this.parts.length-1],i=e.substr(0,t.column-1);return new l.PY([...this.parts.map((e=>new l.At(r.e.fromPositions(new o.L(1,e.column)),e.lines.join("\n"))))]).applyToString(i).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every((e=>0===e.lines.length))}get lineCount(){return 1+this.parts.reduce(((e,t)=>e+t.lines.length-1),0)}}class d{constructor(e,t,i){this.column=e,this.text=t,this.preview=i,this.lines=(0,s.uq)(this.text)}equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every(((t,i)=>t===e.lines[i]))}}class c{constructor(e,t,i,n=0){this.lineNumber=e,this.columnRange=t,this.text=i,this.additionalReservedLineCount=n,this.parts=[new d(this.columnRange.endColumnExclusive,this.text,!1)],this.newLines=(0,s.uq)(this.text)}renderForScreenReader(e){return this.newLines.join("\n")}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every((e=>0===e.lines.length))}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every(((t,i)=>t===e.newLines[i]))&&this.additionalReservedLineCount===e.additionalReservedLineCount}}function h(e,t){return(0,n.fS)(e,t,u)}function u(e,t){return e===t||!(!e||!t)&&((e instanceof a&&t instanceof a||e instanceof c&&t instanceof c)&&e.equals(t))}},50630:(e,t,i)=>{i.d(t,{Wd:()=>w,rw:()=>I});var n=i(77514),s=i(4669),o=i(5976),r=i(21070),l=i(97295),a=i(52136),d=i(64141),c=i(50187),h=i(24314),u=i(50072),g=i(72042),p=i(84973),m=i(77378),v=i(92550),f=i(91557),S=i(20757),b=i(8396),C=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},x=function(e,t){return function(i,n){t(i,n,e)}};const _="ghost-text";let w=class extends o.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,r.uh)(this,!1),this.currentTextModel=(0,r.rD)(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this.uiState=(0,r.nK)(this,(e=>{if(this.isDisposed.read(e))return;const t=this.currentTextModel.read(e);if(t!==this.model.targetTextModel.read(e))return;const i=this.model.ghostText.read(e);if(!i)return;const n=i instanceof S.s1?i.columnRange:void 0,s=[],o=[];function r(e,t){if(o.length>0){const i=o[o.length-1];t&&i.decorations.push(new v.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)o.push({content:i,decorations:t?[new v.Kp(1,i.length+1,t,0)]:[]})}const l=t.getLineContent(i.lineNumber);let a,d=0;for(const e of i.parts){let t=e.lines;void 0===a?(s.push({column:e.column,text:t[0],preview:e.preview}),t=t.slice(1)):r([l.substring(d,e.column-1)],void 0),t.length>0&&(r(t,_),void 0===a&&e.column<=l.length&&(a=e.column)),d=e.column-1}void 0!==a&&r([l.substring(d)],void 0);const c=void 0!==a?new b.rv(a,l.length+1):void 0;return{replacedRange:n,inlineTexts:s,additionalLines:o,hiddenRange:c,lineNumber:i.lineNumber,additionalReservedLineCount:this.model.minReservedLineCount.read(e),targetTextModel:t}})),this.decorations=(0,r.nK)(this,(e=>{const t=this.uiState.read(e);if(!t)return[];const i=[];t.replacedRange&&i.push({range:t.replacedRange.toRange(t.lineNumber),options:{inlineClassName:"inline-completion-text-to-replace",description:"GhostTextReplacement"}}),t.hiddenRange&&i.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"ghost-text-hidden",description:"ghost-text-hidden"}});for(const e of t.inlineTexts)i.push({range:h.e.fromPositions(new c.L(t.lineNumber,e.column)),options:{description:_,after:{content:e.text,inlineClassName:e.preview?"ghost-text-decoration-preview":"ghost-text-decoration",cursorStops:p.RM.Left},showIfCollapsed:!0}});return i})),this.additionalLinesWidget=this._register(new I(this.editor,this.languageService.languageIdCodec,(0,r.nK)((e=>{const t=this.uiState.read(e);return t?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0})))),this._register((0,o.OF)((()=>{this.isDisposed.set(!0,void 0)}))),this._register((0,b.RP)(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};w=C([x(2,g.O)],w);class I extends o.JT{get viewZoneId(){return this._viewZoneId}constructor(e,t,i){super(),this.editor=e,this.languageIdCodec=t,this.lines=i,this._viewZoneId=void 0,this.editorOptionsChanged=(0,r.aq)("editorOptionChanged",s.ju.filter(this.editor.onDidChangeConfiguration,(e=>e.hasChanged(33)||e.hasChanged(117)||e.hasChanged(99)||e.hasChanged(94)||e.hasChanged(51)||e.hasChanged(50)||e.hasChanged(67)))),this._register((0,r.EH)((e=>{const t=this.lines.read(e);this.editorOptionsChanged.read(e),t?this.updateLines(t.lineNumber,t.additionalLines,t.minReservedLineCount):this.clear()})))}dispose(){super.dispose(),this.clear()}clear(){this.editor.changeViewZones((e=>{this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0)}))}updateLines(e,t,i){const n=this.editor.getModel();if(!n)return;const{tabSize:s}=n.getOptions();this.editor.changeViewZones((n=>{this._viewZoneId&&(n.removeZone(this._viewZoneId),this._viewZoneId=void 0);const o=Math.max(t.length,i);if(o>0){const i=document.createElement("div");!function(e,t,i,n,s){const o=n.get(33),r=n.get(117),c="none",h=n.get(94),g=n.get(51),p=n.get(50),v=n.get(67),S=new u.HT(1e4);S.appendString('<div class="suggest-preview-text">');for(let e=0,n=i.length;e<n;e++){const n=i[e],a=n.content;S.appendString('<div class="view-line'),S.appendString('" style="top:'),S.appendString(String(e*v)),S.appendString('px;width:1000000px;">');const u=l.$i(a),b=l.Ut(a),C=m.A.createEmpty(a,s);(0,f.d1)(new f.IJ(p.isMonospace&&!o,p.canUseHalfwidthRightwardsArrow,a,!1,u,b,0,C,n.decorations,t,0,p.spaceWidth,p.middotWidth,p.wsmiddotWidth,r,c,h,g!==d.n0.OFF,null),S),S.appendString("</div>")}S.appendString("</div>"),(0,a.N)(e,p);const b=S.build(),C=y?y.createHTML(b):b;e.innerHTML=C}(i,s,t,this.editor.getOptions(),this.languageIdCodec),this._viewZoneId=n.addZone({afterLineNumber:e,heightInLines:o,domNode:i,afterColumnAffinity:1})}}))}}const y=(0,n.Z)("editorGhostText",{createHTML:e=>e})},78573:(e,t,i)=>{i.d(t,{f:()=>d});var n=i(21070),s=i(97295),o=i(7988),r=i(93983),l=i(5976),a=i(63580);class d extends l.JT{constructor(e,t){super(),this.contextKeyService=e,this.model=t,this.inlineCompletionVisible=d.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=d.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=d.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService),this.suppressSuggestions=d.suppressSuggestions.bindTo(this.contextKeyService),this._register((0,n.EH)((e=>{const t=this.model.read(e),i=null==t?void 0:t.state.read(e),n=!!(null==i?void 0:i.inlineCompletion)&&void 0!==(null==i?void 0:i.primaryGhostText)&&!(null==i?void 0:i.primaryGhostText.isEmpty());this.inlineCompletionVisible.set(n),(null==i?void 0:i.primaryGhostText)&&(null==i?void 0:i.inlineCompletion)&&this.suppressSuggestions.set(i.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)}))),this._register((0,n.EH)((e=>{const t=this.model.read(e);let i=!1,n=!0;const r=null==t?void 0:t.primaryGhostText.read(e);if((null==t?void 0:t.selectedSuggestItem)&&r&&r.parts.length>0){const{column:e,lines:l}=r.parts[0],a=l[0];if(e<=t.textModel.getLineIndentColumn(r.lineNumber)){let e=(0,s.LC)(a);-1===e&&(e=a.length-1),i=e>0;const r=t.textModel.getOptions().tabSize;n=o.i.visibleColumnFromColumn(a,e+1,r)<r}}this.inlineCompletionSuggestsIndentation.set(i),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(n)})))}}d.inlineSuggestionVisible=new r.uy("inlineSuggestionVisible",!1,(0,a.NC)("inlineSuggestionVisible","Whether an inline suggestion is visible")),d.inlineSuggestionHasIndentation=new r.uy("inlineSuggestionHasIndentation",!1,(0,a.NC)("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),d.inlineSuggestionHasIndentationLessThanTabSize=new r.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,(0,a.NC)("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),d.suppressSuggestions=new r.uy("inlineSuggestionSuppressSuggestions",void 0,(0,a.NC)("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"))},87134:(e,t,i)=>{var n=i(16830),s=i(66520),o=i(21070),r=i(96512),l=i(29102),a=i(96020),d=i(78573),c=i(65321),h=i(85152),u=i(15393),g=i(71050),p=i(69103),m=i(5976),v=i(86367),f=i(98401),S=i(96623),b=i(50187),C=i(88191),x=i(71922),_=i(50630),w=i(43677),I=i(9488),y=i(35534),T=i(17301),A=i(97295),P=i(69386),N=i(24314),R=i(3860),O=i(81129),L=i(59722),M=i(71204),D=i(51381),V=i(20757),E=i(75392),K=i(35146),W=i(43702),H=i(87494),k=i(8396),F=i(35084);async function q(e,t,i,n,s=g.Ts.None,o){const r=function(e,t){const i=t.getWordAtPosition(e),n=t.getLineMaxColumn(e.lineNumber);return i?new N.e(e.lineNumber,i.startColumn,e.lineNumber,n):N.e.fromPositions(e,e.with(void 0,n))}(t,i),l=e.all(i),a=new W.ri;for(const e of l)e.groupId&&a.add(e.groupId,e);function d(e){if(!e.yieldsToGroupIds)return[];const t=[];for(const i of e.yieldsToGroupIds||[]){const e=a.get(i);for(const i of e)t.push(i)}return t}const c=new Map,h=new Set;function p(e,t){if(t=[...t,e],h.has(e))return t;h.add(e);try{const i=d(e);for(const e of i){const i=p(e,t);if(i)return i}}finally{h.delete(e)}}function m(e){const o=c.get(e);if(o)return o;const r=p(e,[]);r&&(0,T.Cp)(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${r.map((e=>e.toString?e.toString():""+e)).join(" -> ")}`));const l=new u.CR;return c.set(e,l.p),(async()=>{if(!r){const t=d(e);for(const e of t){const t=await m(e);if(t&&t.items.length>0)return}}try{return await e.provideInlineCompletions(i,t,n,s)}catch(e){return void(0,T.Cp)(e)}})().then((e=>l.complete(e)),(e=>l.error(e))),l.p}const v=await Promise.all(l.map((async e=>({provider:e,completions:await m(e)})))),f=new Map,S=[];for(const e of v){const t=e.completions;if(!t)continue;const n=new U(t,e.provider);S.push(n);for(const e of t.items){const t=B.from(e,n,r,i,o);f.set(t.hash(),t)}}return new G(Array.from(f.values()),new Set(f.keys()),S)}class G{constructor(e,t,i){this.completions=e,this.hashs=t,this.providerResults=i}has(e){return this.hashs.has(e.hash())}dispose(){for(const e of this.providerResults)e.removeRef()}}class U{constructor(e,t){this.inlineCompletions=e,this.provider=t,this.refCount=1}addRef(){this.refCount++}removeRef(){this.refCount--,0===this.refCount&&this.provider.freeInlineCompletions(this.inlineCompletions)}}class B{static from(e,t,i,n,s){let o,r,l=e.range?N.e.lift(e.range):i;if("string"==typeof e.insertText){if(o=e.insertText,s&&e.completeBracketPairs){o=Z(o,l.getStartPosition(),n,s);const t=o.length-e.insertText.length;0!==t&&(l=new N.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+t))}r=void 0}else if("snippet"in e.insertText){const t=e.insertText.snippet.length;if(s&&e.completeBracketPairs){e.insertText.snippet=Z(e.insertText.snippet,l.getStartPosition(),n,s);const i=e.insertText.snippet.length-t;0!==i&&(l=new N.e(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+i))}const i=(new F.Yj).parse(e.insertText.snippet);1===i.children.length&&i.children[0]instanceof F.xv?(o=i.children[0].value,r=void 0):(o=i.toString(),r={snippet:e.insertText.snippet,range:l})}else(0,K.vE)(e.insertText);return new B(o,e.command,l,o,r,e.additionalTextEdits||(0,k.He)(),e,t)}constructor(e,t,i,n,s,o,r,l){this.filterText=e,this.command=t,this.range=i,this.insertText=n,this.snippetInfo=s,this.additionalTextEdits=o,this.sourceInlineCompletion=r,this.source=l,n=(e=e.replace(/\r\n|\r/g,"\n")).replace(/\r\n|\r/g,"\n")}withRange(e){return new B(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}}function Z(e,t,i,n){const s=i.getLineContent(t.lineNumber).substring(0,t.column-1)+e,o=i.tokenization.tokenizeLineWithEdit(t,s.length-(t.column-1),e),r=null==o?void 0:o.sliceAndInflate(t.column-1,s.length,0);if(!r)return e;return(0,H.r)(r,n)}var j=i(2484);function z(e,t,i){const n=i?e.range.intersectRanges(i):e.range;if(!n)return e;const s=t.getValueInRange(n,1),o=(0,A.Mh)(s,e.text),r=L.A.ofText(s.substring(0,o)).addToPosition(e.range.getStartPosition()),l=e.text.substring(o),a=N.e.fromPositions(r,e.range.getEndPosition());return new O.At(a,l)}function Y(e,t){return e.text.startsWith(t.text)&&(i=e.range,(n=t.range).getStartPosition().equals(i.getStartPosition())&&n.getEndPosition().isBeforeOrEqual(i.getEndPosition()));var i,n}function $(e,t,i,n,s=0){let o=z(e,t);if(o.range.endLineNumber!==o.range.startLineNumber)return;const r=t.getLineContent(o.range.startLineNumber),l=(0,A.V8)(r).length;if(o.range.startColumn-1<=l){const e=(0,A.V8)(o.text).length,t=r.substring(o.range.startColumn-1,l),[i,n]=[o.range.getStartPosition(),o.range.getEndPosition()],s=i.column+t.length<=n.column?i.delta(0,t.length):n,a=N.e.fromPositions(s,n),d=o.text.startsWith(t)?o.text.substring(t.length):o.text.substring(e);o=new O.At(a,d)}const a=t.getValueInRange(o.range),d=function(e,t){if((null==J?void 0:J.originalValue)===e&&(null==J?void 0:J.newValue)===t)return null==J?void 0:J.changes;{let i=X(e,t,!0);if(i){const n=Q(i);if(n>0){const s=X(e,t,!1);s&&Q(s)<n&&(i=s)}}return J={originalValue:e,newValue:t,changes:i},i}}(a,o.text);if(!d)return;const c=o.range.startLineNumber,h=new Array;if("prefix"===i){const e=d.filter((e=>0===e.originalLength));if(e.length>1||1===e.length&&e[0].originalStart!==a.length)return}const u=o.text.length-s;for(const e of d){const t=o.range.startColumn+e.originalStart+e.originalLength;if("subwordSmart"===i&&n&&n.lineNumber===o.range.startLineNumber&&t<n.column)return;if(e.originalLength>0)return;if(0===e.modifiedLength)continue;const s=e.modifiedStart+e.modifiedLength,r=Math.max(e.modifiedStart,Math.min(s,u)),l=o.text.substring(e.modifiedStart,r),a=o.text.substring(r,Math.max(e.modifiedStart,s));l.length>0&&h.push(new V.NY(t,l,!1)),a.length>0&&h.push(new V.NY(t,a,!0))}return new V.Vb(c,h)}let J;function Q(e){let t=0;for(const i of e)t+=i.originalLength;return t}function X(e,t,i){if(e.length>5e3||t.length>5e3)return;function n(e){let t=0;for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);n>t&&(t=n)}return t}const s=Math.max(n(e),n(t));function o(e){if(e<0)throw new Error("unexpected");return s+e+1}function r(e){let t=0,n=0;const s=new Int32Array(e.length);for(let r=0,l=e.length;r<l;r++)if(i&&"("===e[r]){const e=100*n+t;s[r]=o(2*e),t++}else if(i&&")"===e[r]){t=Math.max(t-1,0);const e=100*n+t;s[r]=o(2*e+1),0===t&&n++}else s[r]=e.charCodeAt(r);return s}const l=r(e),a=r(t);return new j.Hs({getElements:()=>l},{getElements:()=>a}).ComputeDiff(!1).changes}var ee=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},te=function(e,t){return function(i,n){t(i,n,e)}};let ie=class extends m.JT{constructor(e,t,i,n,s){super(),this.textModel=e,this.versionId=t,this._debounceValue=i,this.languageFeaturesService=n,this.languageConfigurationService=s,this._updateOperation=this._register(new m.XK),this.inlineCompletions=(0,o.DN)("inlineCompletions",void 0),this.suggestWidgetInlineCompletions=(0,o.DN)("suggestWidgetInlineCompletions",void 0),this._register(this.textModel.onDidChangeContent((()=>{this._updateOperation.clear()})))}fetch(e,t,i){var n,s;const r=new ne(e,t,this.textModel.getVersionId()),l=t.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(null===(n=this._updateOperation.value)||void 0===n?void 0:n.request.satisfies(r))return this._updateOperation.value.promise;if(null===(s=l.get())||void 0===s?void 0:s.request.satisfies(r))return Promise.resolve(!0);const a=!!this._updateOperation.value;this._updateOperation.clear();const d=new g.AU,c=(async()=>{var n,s;if((a||t.triggerKind===M.bw.Automatic)&&await(n=this._debounceValue.get(this.textModel),s=d.token,new Promise((e=>{let t;const i=setTimeout((()=>{t&&t.dispose(),e()}),n);s&&(t=s.onCancellationRequested((()=>{clearTimeout(i),t&&t.dispose(),e()})))}))),d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const c=new Date,h=await q(this.languageFeaturesService.inlineCompletionsProvider,e,this.textModel,t,d.token,this.languageConfigurationService);if(d.token.isCancellationRequested||this.textModel.getVersionId()!==r.versionId)return!1;const u=new Date;this._debounceValue.update(this.textModel,u.getTime()-c.getTime());const g=new oe(h,r,this.textModel,this.versionId);if(i){const t=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,e)&&!h.has(t)&&g.prepend(i.inlineCompletion,t.range,!0)}return this._updateOperation.clear(),(0,o.PS)((e=>{l.set(g,e)})),!0})(),h=new se(r,d,c);return this._updateOperation.value=h,c}clear(e){this._updateOperation.clear(),this.inlineCompletions.set(void 0,e),this.suggestWidgetInlineCompletions.set(void 0,e)}clearSuggestWidgetInlineCompletions(e){var t;(null===(t=this._updateOperation.value)||void 0===t?void 0:t.request.context.selectedSuggestionInfo)&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,e)}cancelUpdate(){this._updateOperation.clear()}};ie=ee([te(3,x.p),te(4,D.c_)],ie);class ne{constructor(e,t,i){this.position=e,this.context=t,this.versionId=i}satisfies(e){return this.position.equals(e.position)&&(0,p.Tx)(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,(0,p.$h)())&&(e.context.triggerKind===M.bw.Automatic||this.context.triggerKind===M.bw.Explicit)&&this.versionId===e.versionId}}class se{constructor(e,t,i){this.request=e,this.cancellationTokenSource=t,this.promise=i}dispose(){this.cancellationTokenSource.cancel()}}class oe{get inlineCompletions(){return this._inlineCompletions}constructor(e,t,i,n){this.inlineCompletionProviderResult=e,this.request=t,this._textModel=i,this._versionId=n,this._refCount=1,this._prependedInlineCompletionItems=[];const s=i.deltaDecorations([],e.completions.map((e=>({range:e.range,options:{description:"inline-completion-tracking-range"}}))));this._inlineCompletions=e.completions.map(((e,t)=>new re(e,s[t],this._textModel,this._versionId)))}clone(){return this._refCount++,this}dispose(){if(this._refCount--,0===this._refCount){setTimeout((()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map((e=>e.decorationId)),[])}),0),this.inlineCompletionProviderResult.dispose();for(const e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,i){i&&e.source.addRef();const n=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new re(e,n,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}}class re{get forwardStable(){var e;return null!==(e=this.inlineCompletion.source.inlineCompletions.enableForwardStability)&&void 0!==e&&e}constructor(e,t,i,n){this.inlineCompletion=e,this.decorationId=t,this._textModel=i,this._modelVersion=n,this.semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]),this._updatedRange=(0,o.bk)({owner:this,equalsFn:N.e.equalsRange},(e=>(this._modelVersion.read(e),this._textModel.getDecorationRange(this.decorationId))))}toInlineCompletion(e){var t;return this.inlineCompletion.withRange(null!==(t=this._updatedRange.read(e))&&void 0!==t?t:le)}toSingleTextEdit(e){var t;return new O.At(null!==(t=this._updatedRange.read(e))&&void 0!==t?t:le,this.inlineCompletion.insertText)}isVisible(e,t,i){const n=z(this._toFilterTextReplacement(i),e),s=this._updatedRange.read(i);if(!s||!this.inlineCompletion.range.getStartPosition().equals(s.getStartPosition())||t.lineNumber!==n.range.startLineNumber)return!1;const o=e.getValueInRange(n.range,1),r=n.text,l=Math.max(0,t.column-n.range.startColumn);let a=r.substring(0,l),d=r.substring(l),c=o.substring(0,l),h=o.substring(l);const u=e.getLineIndentColumn(n.range.startLineNumber);return n.range.startColumn<=u&&(c=c.trimStart(),0===c.length&&(h=h.trimStart()),a=a.trimStart(),0===a.length&&(d=d.trimStart())),a.startsWith(c)&&!!(0,E.Sy)(h,d)}canBeReused(e,t){const i=this._updatedRange.read(void 0);return!!i&&i.containsPosition(t)&&this.isVisible(e,t,void 0)&&L.A.ofRange(i).isGreaterThanOrEqualTo(L.A.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){var t;return new O.At(null!==(t=this._updatedRange.read(e))&&void 0!==t?t:le,this.inlineCompletion.filterText)}}const le=new N.e(1,1,1,1);var ae,de=i(98762),ce=i(94565),he=i(72065),ue=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},ge=function(e,t){return function(i,n){t(i,n,e)}};!function(e){e[e.Undo=0]="Undo",e[e.Redo=1]="Redo",e[e.AcceptWord=2]="AcceptWord",e[e.Other=3]="Other"}(ae||(ae={}));let pe=class extends m.JT{get isAcceptingPartially(){return this._isAcceptingPartially}constructor(e,t,i,n,s,r,l,a,d,c,h,u){let g;super(),this.textModel=e,this.selectedSuggestItem=t,this.textModelVersionId=i,this._positions=n,this._debounceValue=s,this._suggestPreviewEnabled=r,this._suggestPreviewMode=l,this._inlineSuggestMode=a,this._enabled=d,this._instantiationService=c,this._commandService=h,this._languageConfigurationService=u,this._source=this._register(this._instantiationService.createInstance(ie,this.textModel,this.textModelVersionId,this._debounceValue)),this._isActive=(0,o.uh)(this,!1),this._forceUpdateExplicitlySignal=(0,o.GN)(this),this._selectedInlineCompletionId=(0,o.uh)(this,void 0),this._primaryPosition=(0,o.nK)(this,(e=>{var t;return null!==(t=this._positions.read(e)[0])&&void 0!==t?t:new b.L(1,1)})),this._isAcceptingPartially=!1,this._preserveCurrentCompletionReasons=new Set([ae.Redo,ae.Undo,ae.AcceptWord]),this._fetchInlineCompletionsPromise=(0,o.aK)({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:M.bw.Automatic}),handleChange:(e,t)=>(e.didChange(this.textModelVersionId)&&this._preserveCurrentCompletionReasons.has(e.change)?t.preserveCurrentCompletion=!0:e.didChange(this._forceUpdateExplicitlySignal)&&(t.inlineCompletionTriggerKind=M.bw.Explicit),!0)},((e,t)=>{this._forceUpdateExplicitlySignal.read(e);if(!(this._enabled.read(e)&&this.selectedSuggestItem.read(e)||this._isActive.read(e)))return void this._source.cancelUpdate();this.textModelVersionId.read(e);const i=this._source.suggestWidgetInlineCompletions.get(),n=this.selectedSuggestItem.read(e);if(i&&!n){const e=this._source.inlineCompletions.get();(0,o.PS)((t=>{(!e||i.request.versionId>e.request.versionId)&&this._source.inlineCompletions.set(i.clone(),t),this._source.clearSuggestWidgetInlineCompletions(t)}))}const s=this._primaryPosition.read(e),r={triggerKind:t.inlineCompletionTriggerKind,selectedSuggestionInfo:null==n?void 0:n.toSelectedSuggestionInfo()},l=this.selectedInlineCompletion.get(),a=t.preserveCurrentCompletion||(null==l?void 0:l.forwardStable)?l:void 0;return this._source.fetch(s,r,a)})),this._filteredInlineCompletionItems=(0,o.bk)({owner:this,equalsFn:(0,p.ZC)()},(e=>{const t=this._source.inlineCompletions.read(e);if(!t)return[];const i=this._primaryPosition.read(e),n=t.inlineCompletions.filter((t=>t.isVisible(this.textModel,i,e)));return n})),this.selectedInlineCompletionIndex=(0,o.nK)(this,(e=>{const t=this._selectedInlineCompletionId.read(e),i=this._filteredInlineCompletionItems.read(e),n=void 0===this._selectedInlineCompletionId?-1:i.findIndex((e=>e.semanticId===t));return-1===n?(this._selectedInlineCompletionId.set(void 0,void 0),0):n})),this.selectedInlineCompletion=(0,o.nK)(this,(e=>this._filteredInlineCompletionItems.read(e)[this.selectedInlineCompletionIndex.read(e)])),this.activeCommands=(0,o.bk)({owner:this,equalsFn:(0,p.ZC)()},(e=>{var t,i;return null!==(i=null===(t=this.selectedInlineCompletion.read(e))||void 0===t?void 0:t.inlineCompletion.source.inlineCompletions.commands)&&void 0!==i?i:[]})),this.lastTriggerKind=this._source.inlineCompletions.map(this,(e=>null==e?void 0:e.request.context.triggerKind)),this.inlineCompletionsCount=(0,o.nK)(this,(e=>this.lastTriggerKind.read(e)===M.bw.Explicit?this._filteredInlineCompletionItems.read(e).length:void 0)),this.state=(0,o.bk)({owner:this,equalsFn:(e,t)=>e&&t?(0,V.bY)(e.ghostTexts,t.ghostTexts)&&e.inlineCompletion===t.inlineCompletion&&e.suggestItem===t.suggestItem:e===t},(e=>{var t,i;const n=this.textModel,s=this.selectedSuggestItem.read(e);if(s){const o=z(s.toSingleTextEdit(),n),r=this._computeAugmentation(o,e);if(!this._suggestPreviewEnabled.read(e)&&!r)return;const l=null!==(t=null==r?void 0:r.edit)&&void 0!==t?t:o,a=r?r.edit.text.length-o.text.length:0,d=this._suggestPreviewMode.read(e),c=this._positions.read(e),h=[l,...me(this.textModel,c,l)],u=h.map(((e,t)=>$(e,n,d,c[t],a))).filter(f.$K);return{edits:h,primaryGhostText:null!==(i=u[0])&&void 0!==i?i:new V.Vb(l.range.endLineNumber,[]),ghostTexts:u,inlineCompletion:null==r?void 0:r.completion,suggestItem:s}}{if(!this._isActive.read(e))return;const t=this.selectedInlineCompletion.read(e);if(!t)return;const i=t.toSingleTextEdit(e),s=this._inlineSuggestMode.read(e),o=this._positions.read(e),r=[i,...me(this.textModel,o,i)],l=r.map(((e,t)=>$(e,n,s,o[t],0))).filter(f.$K);if(!l[0])return;return{edits:r,primaryGhostText:l[0],ghostTexts:l,inlineCompletion:t,suggestItem:void 0}}})),this.ghostTexts=(0,o.bk)({owner:this,equalsFn:V.bY},(e=>{const t=this.state.read(e);if(t)return t.ghostTexts})),this.primaryGhostText=(0,o.bk)({owner:this,equalsFn:V.HL},(e=>{const t=this.state.read(e);if(t)return null==t?void 0:t.primaryGhostText})),this._register((0,o.jx)(this._fetchInlineCompletionsPromise)),this._register((0,o.EH)((e=>{var t,i;const n=this.state.read(e),s=null==n?void 0:n.inlineCompletion;if((null==s?void 0:s.semanticId)!==(null==g?void 0:g.semanticId)&&(g=s,s)){const e=s.inlineCompletion,n=e.source;null===(i=(t=n.provider).handleItemDidShow)||void 0===i||i.call(t,n.inlineCompletions,e.sourceInlineCompletion,e.insertText)}})))}async trigger(e){this._isActive.set(!0,e),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(e){(0,o.c8)(e,(e=>{this._isActive.set(!0,e),this._forceUpdateExplicitlySignal.trigger(e)})),await this._fetchInlineCompletionsPromise.get()}stop(e){(0,o.c8)(e,(e=>{this._isActive.set(!1,e),this._source.clear(e)}))}_computeAugmentation(e,t){const i=this.textModel,n=this._source.suggestWidgetInlineCompletions.read(t),s=n?n.inlineCompletions:[this.selectedInlineCompletion.read(t)].filter(f.$K);return(0,y.Fr)(s,(n=>{let s=n.toSingleTextEdit(t);return s=z(s,i,N.e.fromPositions(s.range.getStartPosition(),e.range.getEndPosition())),Y(s,e)?{completion:n,edit:s}:void 0}))}async _deltaSelectedInlineCompletionIndex(e){await this.triggerExplicitly();const t=this._filteredInlineCompletionItems.get()||[];if(t.length>0){const i=(this.selectedInlineCompletionIndex.get()+e+t.length)%t.length;this._selectedInlineCompletionId.set(t[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(e){var t;if(e.getModel()!==this.textModel)throw new T.he;const i=this.state.get();if(!i||i.primaryGhostText.isEmpty()||!i.inlineCompletion)return;const n=i.inlineCompletion.toInlineCompletion(void 0);if(e.pushUndoStop(),n.snippetInfo)e.executeEdits("inlineSuggestion.accept",[P.h.replace(n.range,""),...n.additionalTextEdits]),e.setPosition(n.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),null===(t=de.f.get(e))||void 0===t||t.insert(n.snippetInfo.snippet,{undoStopBefore:!1});else{const t=i.edits,s=ve(t).map((e=>R.Y.fromPositions(e)));e.executeEdits("inlineSuggestion.accept",[...t.map((e=>P.h.replace(e.range,e.text))),...n.additionalTextEdits]),e.setSelections(s,"inlineCompletionAccept")}n.command&&n.source.addRef(),(0,o.PS)((e=>{this._source.clear(e),this._isActive.set(!1,e)})),n.command&&(await this._commandService.executeCommand(n.command.id,...n.command.arguments||[]).then(void 0,T.Cp),n.source.removeRef())}async acceptNextWord(e){await this._acceptNext(e,((e,t)=>{const i=this.textModel.getLanguageIdAtPosition(e.lineNumber,e.column),n=this._languageConfigurationService.getLanguageConfiguration(i),s=new RegExp(n.wordDefinition.source,n.wordDefinition.flags.replace("g","")),o=t.match(s);let r=0;r=o&&void 0!==o.index?0===o.index?o[0].length:o.index:t.length;const l=/\s+/g.exec(t);return l&&void 0!==l.index&&l.index+l[0].length<r&&(r=l.index+l[0].length),r}),0)}async acceptNextLine(e){await this._acceptNext(e,((e,t)=>{const i=t.match(/\n/);return i&&void 0!==i.index?i.index+1:t.length}),1)}async _acceptNext(e,t,i){if(e.getModel()!==this.textModel)throw new T.he;const n=this.state.get();if(!n||n.primaryGhostText.isEmpty()||!n.inlineCompletion)return;const s=n.primaryGhostText,o=n.inlineCompletion.toInlineCompletion(void 0);if(o.snippetInfo||o.filterText!==o.insertText)return void await this.accept(e);const r=s.parts[0],l=new b.L(s.lineNumber,r.column),a=r.text,d=t(l,a);if(d===a.length&&1===s.parts.length)return void this.accept(e);const c=a.substring(0,d),h=this._positions.get(),u=h[0];o.source.addRef();try{this._isAcceptingPartially=!0;try{e.pushUndoStop();const t=N.e.fromPositions(u,l),i=e.getModel().getValueInRange(t)+c,n=new O.At(t,i),s=[n,...me(this.textModel,h,n)],o=ve(s).map((e=>R.Y.fromPositions(e)));e.executeEdits("inlineSuggestion.accept",s.map((e=>P.h.replace(e.range,e.text)))),e.setSelections(o,"inlineCompletionPartialAccept"),e.revealPositionInCenterIfOutsideViewport(e.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(o.source.provider.handlePartialAccept){const t=N.e.fromPositions(o.range.getStartPosition(),L.A.ofText(c).addToPosition(l)),n=e.getModel().getValueInRange(t,1);o.source.provider.handlePartialAccept(o.source.inlineCompletions,o.sourceInlineCompletion,n.length,{kind:i})}}finally{o.source.removeRef()}}handleSuggestAccepted(e){var t,i;const n=z(e.toSingleTextEdit(),this.textModel),s=this._computeAugmentation(n,void 0);if(!s)return;const o=s.completion.inlineCompletion;null===(i=(t=o.source.provider).handlePartialAccept)||void 0===i||i.call(t,o.source.inlineCompletions,o.sourceInlineCompletion,n.text.length,{kind:2})}};function me(e,t,i){if(1===t.length)return[];const n=t[0],s=t.slice(1),o=i.range.getStartPosition(),r=i.range.getEndPosition(),l=e.getValueInRange(N.e.fromPositions(n,r)),a=(0,k.Bm)(n,o);if(a.lineNumber<1)return(0,T.dL)(new T.he(`positionWithinTextEdit line number should be bigger than 0.\n\t\t\tInvalid subtraction between ${n.toString()} and ${o.toString()}`)),[];const d=function(e,t){let i="";const n=(0,A.Fw)(e);for(let e=t.lineNumber-1;e<n.length;e++)i+=n[e].substring(e===t.lineNumber-1?t.column-1:0);return i}(i.text,a);return s.map((t=>{const i=(0,k.QO)((0,k.Bm)(t,o),r),n=e.getValueInRange(N.e.fromPositions(t,i)),s=(0,A.Mh)(l,n),a=N.e.fromPositions(t,t.delta(0,s));return new O.At(a,d)}))}function ve(e){const t=I._i.createSortPermutation(e,((e,t)=>N.e.compareRangesUsingStarts(e.range,t.range))),i=new O.PY(t.apply(e)).getNewRanges();return t.inverse().apply(i).map((e=>e.getEndPosition()))}pe=ue([ge(9,he.TG),ge(10,ce.H),ge(11,D.c_)],pe);var fe=i(4669),Se=i(25048),be=i(37626);class Ce extends m.JT{get selectedItem(){return this._selectedItem}constructor(e,t,i,n){super(),this.editor=e,this.suggestControllerPreselector=t,this.checkModelVersion=i,this.onWillAccept=n,this.isSuggestWidgetVisible=!1,this.isShiftKeyPressed=!1,this._isActive=!1,this._currentSuggestItemInfo=void 0,this._selectedItem=(0,o.uh)(this,void 0),this._register(e.onKeyDown((e=>{e.shiftKey&&!this.isShiftKeyPressed&&(this.isShiftKeyPressed=!0,this.update(this._isActive))}))),this._register(e.onKeyUp((e=>{e.shiftKey&&this.isShiftKeyPressed&&(this.isShiftKeyPressed=!1,this.update(this._isActive))})));const s=be.n.get(this.editor);if(s){this._register(s.registerSelector({priority:100,select:(e,t,i)=>{(0,o.PS)((e=>this.checkModelVersion(e)));const n=this.editor.getModel();if(!n)return-1;const r=this.suggestControllerPreselector(),l=r?z(r,n):void 0;if(!l)return-1;const a=b.L.lift(t),d=i.map(((e,t)=>{const i=z(xe.fromSuggestion(s,n,a,e,this.isShiftKeyPressed).toSingleTextEdit(),n);return{index:t,valid:Y(l,i),prefixLength:i.text.length,suggestItem:e}})).filter((e=>e&&e.valid&&e.prefixLength>0)),c=(0,y.hV)(d,(0,I.tT)((e=>e.prefixLength),I.fv));return c?c.index:-1}}));let e=!1;const t=()=>{e||(e=!0,this._register(s.widget.value.onDidShow((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))),this._register(s.widget.value.onDidHide((()=>{this.isSuggestWidgetVisible=!1,this.update(!1)}))),this._register(s.widget.value.onDidFocus((()=>{this.isSuggestWidgetVisible=!0,this.update(!0)}))))};this._register(fe.ju.once(s.model.onDidTrigger)((e=>{t()}))),this._register(s.onWillInsertSuggestItem((e=>{const t=this.editor.getPosition(),i=this.editor.getModel();if(!t||!i)return;const n=xe.fromSuggestion(s,i,t,e.item,this.isShiftKeyPressed);this.onWillAccept(n)})))}this.update(this._isActive)}update(e){const t=this.getSuggestItemInfo();this._isActive===e&&function(e,t){if(e===t)return!0;if(!e||!t)return!1;return e.equals(t)}(this._currentSuggestItemInfo,t)||(this._isActive=e,this._currentSuggestItemInfo=t,(0,o.PS)((e=>{this.checkModelVersion(e),this._selectedItem.set(this._isActive?this._currentSuggestItemInfo:void 0,e)})))}getSuggestItemInfo(){const e=be.n.get(this.editor);if(!e||!this.isSuggestWidgetVisible)return;const t=e.widget.value.getFocusedItem(),i=this.editor.getPosition(),n=this.editor.getModel();return t&&i&&n?xe.fromSuggestion(e,n,i,t.item,this.isShiftKeyPressed):void 0}stopForceRenderingAbove(){const e=be.n.get(this.editor);null==e||e.stopForceRenderingAbove()}forceRenderingAbove(){const e=be.n.get(this.editor);null==e||e.forceRenderingAbove()}}class xe{static fromSuggestion(e,t,i,n,s){let{insertText:o}=n.completion,r=!1;if(4&n.completion.insertTextRules){const e=(new F.Yj).parse(o);e.children.length<100&&Se.l.adjustWhitespace(t,i,!0,e),o=e.toString(),r=!0}const l=e.getOverwriteInfo(n,s);return new xe(N.e.fromPositions(i.delta(0,-l.overwriteBefore),i.delta(0,Math.max(l.overwriteAfter,0))),o,n.completion.kind,r)}constructor(e,t,i,n){this.range=e,this.insertText=t,this.completionItemKind=i,this.isSnippetText=n}equals(e){return this.range.equalsRange(e.range)&&this.insertText===e.insertText&&this.completionItemKind===e.completionItemKind&&this.isSnippetText===e.isSnippetText}toSelectedSuggestionInfo(){return new M.ln(this.range,this.insertText,this.completionItemKind,this.isSnippetText)}toSingleTextEdit(){return new O.At(this.range,this.insertText)}}var _e,we=i(63580),Ie=i(31106),ye=i(38832),Te=i(33108),Ae=i(93983),Pe=i(91847),Ne=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},Re=function(e,t){return function(i,n){t(i,n,e)}};let Oe=_e=class extends m.JT{static get(e){return e.getContribution(_e.ID)}constructor(e,t,i,n,s,l,h,C,x,I){super(),this.editor=e,this._instantiationService=t,this._contextKeyService=i,this._configurationService=n,this._commandService=s,this._debounceService=l,this._languageFeaturesService=h,this._accessibilitySignalService=C,this._keybindingService=x,this._accessibilityService=I,this.model=this._register((0,o.DN)("inlineCompletionModel",void 0)),this._textModelVersionId=(0,o.uh)(this,-1),this._positions=(0,r.Ku)({owner:this,equalsFn:(0,p.ZC)((0,p.$h)())},[new b.L(1,1)]),this._suggestWidgetAdaptor=this._register(new Ce(this.editor,(()=>{var e,t;return null===(t=null===(e=this.model.get())||void 0===e?void 0:e.selectedInlineCompletion.get())||void 0===t?void 0:t.toSingleTextEdit(void 0)}),(e=>this.updateObservables(e,ae.Other)),(e=>{(0,o.PS)((t=>{var i;this.updateObservables(t,ae.Other),null===(i=this.model.get())||void 0===i||i.handleSuggestAccepted(e)}))}))),this._enabledInConfig=(0,o.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(62).enabled)),this._isScreenReaderEnabled=(0,o.rD)(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>this._accessibilityService.isScreenReaderOptimized())),this._editorDictationInProgress=(0,o.rD)(this._contextKeyService.onDidChangeContext,(()=>!0===this._contextKeyService.getContext(this.editor.getDomNode()).getValue("editorDictation.inProgress"))),this._enabled=(0,o.nK)(this,(e=>this._enabledInConfig.read(e)&&(!this._isScreenReaderEnabled.read(e)||!this._editorDictationInProgress.read(e)))),this._fontFamily=(0,o.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(62).fontFamily)),this._ghostTexts=(0,o.nK)(this,(e=>{var t;const i=this.model.read(e);return null!==(t=null==i?void 0:i.ghostTexts.read(e))&&void 0!==t?t:[]})),this._stablizedGhostTexts=function(e,t){const i=(0,o.uh)("result",[]),n=[];return t.add((0,o.EH)((t=>{const s=e.read(t);(0,o.PS)((e=>{if(s.length!==n.length){n.length=s.length;for(let e=0;e<n.length;e++)n[e]||(n[e]=(0,o.uh)("item",s[e]));i.set([...n],e)}n.forEach(((t,i)=>t.set(s[i],e)))}))}))),i}(this._ghostTexts,this._store),this._ghostTextWidgets=(0,v.Zg)(this,this._stablizedGhostTexts,((e,t)=>t.add(this._instantiationService.createInstance(_.Wd,this.editor,{ghostText:e,minReservedLineCount:(0,o.Dz)(0),targetTextModel:this.model.map((e=>null==e?void 0:e.textModel))})))).recomputeInitiallyAndOnChange(this._store),this._debounceValue=this._debounceService.for(this._languageFeaturesService.inlineCompletionsProvider,"InlineCompletionsDebounce",{min:50,max:50}),this._playAccessibilitySignal=(0,o.GN)(this),this._isReadonly=(0,o.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(91))),this._textModel=(0,o.rD)(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this._textModelIfWritable=(0,o.nK)((e=>this._isReadonly.read(e)?void 0:this._textModel.read(e))),this._register(new d.f(this._contextKeyService,this.model)),this._register((0,o.EH)((i=>{const n=this._textModelIfWritable.read(i);(0,o.PS)((i=>{if(this.model.set(void 0,i),this.updateObservables(i,ae.Other),n){const s=t.createInstance(pe,n,this._suggestWidgetAdaptor.selectedItem,this._textModelVersionId,this._positions,this._debounceValue,(0,o.rD)(e.onDidChangeConfiguration,(()=>e.getOption(118).preview)),(0,o.rD)(e.onDidChangeConfiguration,(()=>e.getOption(118).previewMode)),(0,o.rD)(e.onDidChangeConfiguration,(()=>e.getOption(62).mode)),this._enabled);this.model.set(s,i)}}))})));const y=this._register((0,c.aU)());this._register((0,o.EH)((e=>{const t=this._fontFamily.read(e);y.setStyle(""===t||"default"===t?"":`\n.monaco-editor .ghost-text-decoration,\n.monaco-editor .ghost-text-decoration-preview,\n.monaco-editor .ghost-text {\n\tfont-family: ${t};\n}`)})));const T=e=>{var t;return e.isUndoing?ae.Undo:e.isRedoing?ae.Redo:(null===(t=this.model.get())||void 0===t?void 0:t.isAcceptingPartially)?ae.AcceptWord:ae.Other};this._register(e.onDidChangeModelContent((e=>(0,o.PS)((t=>this.updateObservables(t,T(e))))))),this._register(e.onDidChangeCursorPosition((e=>(0,o.PS)((t=>{var i;this.updateObservables(t,ae.Other),3!==e.reason&&"api"!==e.source||null===(i=this.model.get())||void 0===i||i.stop(t)}))))),this._register(e.onDidType((()=>(0,o.PS)((e=>{var t;this.updateObservables(e,ae.Other),this._enabled.get()&&(null===(t=this.model.get())||void 0===t||t.trigger(e))}))))),this._register(this._commandService.onDidExecuteCommand((t=>{new Set([S.wk.Tab.id,S.wk.DeleteLeft.id,S.wk.DeleteRight.id,a.Ou,"acceptSelectedSuggestion"]).has(t.commandId)&&e.hasTextFocus()&&this._enabled.get()&&(0,o.PS)((e=>{var t;null===(t=this.model.get())||void 0===t||t.trigger(e)}))}))),this._register(this.editor.onDidBlurEditorWidget((()=>{this._contextKeyService.getContextKeyValue("accessibleViewIsShown")||this._configurationService.getValue("editor.inlineSuggest.keepOnBlur")||e.getOption(62).keepOnBlur||w.QG.dropDownVisible||(0,o.PS)((e=>{var t;null===(t=this.model.get())||void 0===t||t.stop(e)}))}))),this._register((0,o.EH)((e=>{var t;const i=null===(t=this.model.read(e))||void 0===t?void 0:t.state.read(e);(null==i?void 0:i.suggestItem)?i.primaryGhostText.lineCount>=2&&this._suggestWidgetAdaptor.forceRenderingAbove():this._suggestWidgetAdaptor.stopForceRenderingAbove()}))),this._register((0,m.OF)((()=>{this._suggestWidgetAdaptor.stopForceRenderingAbove()})));const A=this._register(new m.SL);let P;this._register((0,o.nJ)({handleChange:(e,t)=>(e.didChange(this._playAccessibilitySignal)&&(P=void 0),!0)},(async(e,t)=>{this._playAccessibilitySignal.read(e);const i=this.model.read(e),n=null==i?void 0:i.state.read(e);if(i&&n&&n.inlineCompletion){if(n.inlineCompletion.semanticId!==P){A.clear(),P=n.inlineCompletion.semanticId;const e=i.textModel.getLineContent(n.primaryGhostText.lineNumber);await(0,u.Vs)(50,(0,g.bP)(A)),await(0,o.F_)(this._suggestWidgetAdaptor.selectedItem,f.o8,(()=>!1),(0,g.bP)(A)),await this._accessibilitySignalService.playSignal(ye.iP.inlineSuggestion),this.editor.getOption(8)&&this.provideScreenReaderUpdate(n.primaryGhostText.renderForScreenReader(e))}}else P=void 0}))),this._register(new w.oU(this.editor,this.model,this._instantiationService)),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("accessibility.verbosity.inlineCompletions")&&this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}))),this.editor.updateOptions({inlineCompletionsAccessibilityVerbose:this._configurationService.getValue("accessibility.verbosity.inlineCompletions")})}playAccessibilitySignal(e){this._playAccessibilitySignal.trigger(e)}provideScreenReaderUpdate(e){const t=this._contextKeyService.getContextKeyValue("accessibleViewIsShown"),i=this._keybindingService.lookupKeybinding("editor.action.accessibleView");let n;!t&&i&&this.editor.getOption(149)&&(n=(0,we.NC)("showAccessibleViewHint","Inspect this in the accessible view ({0})",i.getAriaLabel())),n?(0,h.Z9)(e+", "+n):(0,h.Z9)(e)}updateObservables(e,t){var i,n,s;const o=this.editor.getModel();this._textModelVersionId.set(null!==(i=null==o?void 0:o.getVersionId())&&void 0!==i?i:-1,e,t),this._positions.set(null!==(s=null===(n=this.editor.getSelections())||void 0===n?void 0:n.map((e=>e.getPosition())))&&void 0!==s?s:[new b.L(1,1)],e)}shouldShowHoverAt(e){var t;const i=null===(t=this.model.get())||void 0===t?void 0:t.primaryGhostText.get();return!!i&&i.parts.some((t=>e.containsPosition(new b.L(i.lineNumber,t.column))))}shouldShowHoverAtViewZone(e){var t,i;return null!==(i=null===(t=this._ghostTextWidgets.get()[0])||void 0===t?void 0:t.ownsViewZone(e))&&void 0!==i&&i}};Oe.ID="editor.contrib.inlineCompletionsController",Oe=_e=Ne([Re(1,he.TG),Re(2,Ae.i6),Re(3,Te.Ui),Re(4,ce.H),Re(5,C.A),Re(6,x.p),Re(7,ye.IV),Re(8,Pe.d),Re(9,Ie.F)],Oe);var Le=i(55621),Me=i(84144);class De extends n.R6{constructor(){super({id:De.ID,label:we.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:Ae.Ao.and(l.u.writable,d.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:606}})}async run(e,t){var i;const n=Oe.get(t);null===(i=null==n?void 0:n.model.get())||void 0===i||i.next()}}De.ID=a.OW;class Ve extends n.R6{constructor(){super({id:Ve.ID,label:we.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:Ae.Ao.and(l.u.writable,d.f.inlineSuggestionVisible),kbOpts:{weight:100,primary:604}})}async run(e,t){var i;const n=Oe.get(t);null===(i=null==n?void 0:n.model.get())||void 0===i||i.previous()}}Ve.ID=a.Np;class Ee extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:we.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:l.u.writable})}async run(e,t){const i=Oe.get(t);await(0,r.Hr)((async e=>{var t;await(null===(t=null==i?void 0:i.model.get())||void 0===t?void 0:t.triggerExplicitly(e)),null==i||i.playAccessibilitySignal(e)}))}}class Ke extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextWord",label:we.NC("action.inlineSuggest.acceptNextWord","Accept Next Word Of Inline Suggestion"),alias:"Accept Next Word Of Inline Suggestion",precondition:Ae.Ao.and(l.u.writable,d.f.inlineSuggestionVisible),kbOpts:{weight:101,primary:2065,kbExpr:Ae.Ao.and(l.u.writable,d.f.inlineSuggestionVisible)},menuOpts:[{menuId:Me.eH.InlineSuggestionToolbar,title:we.NC("acceptWord","Accept Word"),group:"primary",order:2}]})}async run(e,t){var i;const n=Oe.get(t);await(null===(i=null==n?void 0:n.model.get())||void 0===i?void 0:i.acceptNextWord(n.editor))}}class We extends n.R6{constructor(){super({id:"editor.action.inlineSuggest.acceptNextLine",label:we.NC("action.inlineSuggest.acceptNextLine","Accept Next Line Of Inline Suggestion"),alias:"Accept Next Line Of Inline Suggestion",precondition:Ae.Ao.and(l.u.writable,d.f.inlineSuggestionVisible),kbOpts:{weight:101},menuOpts:[{menuId:Me.eH.InlineSuggestionToolbar,title:we.NC("acceptLine","Accept Line"),group:"secondary",order:2}]})}async run(e,t){var i;const n=Oe.get(t);await(null===(i=null==n?void 0:n.model.get())||void 0===i?void 0:i.acceptNextLine(n.editor))}}class He extends n.R6{constructor(){super({id:a.Ou,label:we.NC("action.inlineSuggest.accept","Accept Inline Suggestion"),alias:"Accept Inline Suggestion",precondition:d.f.inlineSuggestionVisible,menuOpts:[{menuId:Me.eH.InlineSuggestionToolbar,title:we.NC("accept","Accept"),group:"primary",order:1}],kbOpts:{primary:2,weight:200,kbExpr:Ae.Ao.and(d.f.inlineSuggestionVisible,l.u.tabMovesFocus.toNegated(),d.f.inlineSuggestionHasIndentationLessThanTabSize,Le._y.Visible.toNegated(),l.u.hoverFocused.toNegated())}})}async run(e,t){var i;const n=Oe.get(t);n&&(null===(i=n.model.get())||void 0===i||i.accept(n.editor),n.editor.focus())}}class ke extends n.R6{constructor(){super({id:ke.ID,label:we.NC("action.inlineSuggest.hide","Hide Inline Suggestion"),alias:"Hide Inline Suggestion",precondition:d.f.inlineSuggestionVisible,kbOpts:{weight:100,primary:9}})}async run(e,t){const i=Oe.get(t);(0,o.PS)((e=>{var t;null===(t=null==i?void 0:i.model.get())||void 0===t||t.stop(e)}))}}ke.ID="editor.action.inlineSuggest.hide";class Fe extends Me.Ke{constructor(){super({id:Fe.ID,title:we.NC("action.inlineSuggest.alwaysShowToolbar","Always Show Toolbar"),f1:!1,precondition:void 0,menu:[{id:Me.eH.InlineSuggestionToolbar,group:"secondary",order:10}],toggled:Ae.Ao.equals("config.editor.inlineSuggest.showToolbar","always")})}async run(e,t){const i=e.get(Te.Ui),n="always"===i.getValue("editor.inlineSuggest.showToolbar")?"onHover":"always";i.updateValue("editor.inlineSuggest.showToolbar",n)}}Fe.ID="editor.action.inlineSuggest.toggleAlwaysShowToolbar";var qe=i(59365),Ge=i(72042),Ue=i(72545),Be=i(50988),Ze=i(10829),je=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},ze=function(e,t){return function(i,n){t(i,n,e)}};class Ye{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let $e=class{constructor(e,t,i,n,s,o){this._editor=e,this._languageService=t,this._openerService=i,this.accessibilityService=n,this._instantiationService=s,this._telemetryService=o,this.hoverOrdinal=4}suggestHoverAnchor(e){const t=Oe.get(this._editor);if(!t)return null;const i=e.target;if(8===i.type){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId))return new s.YM(1e3,this,N.e.fromPositions(this._editor.getModel().validatePosition(n.positionBefore||n.position)),e.event.posx,e.event.posy,!1)}if(7===i.type&&t.shouldShowHoverAt(i.range))return new s.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){if(i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range))return new s.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("onHover"!==this._editor.getOption(62).showToolbar)return[];const i=Oe.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new Ye(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new m.SL,n=t[0];this._telemetryService.publicLog2("inlineCompletionHover.shown"),this.accessibilityService.isScreenReaderOptimized()&&!this._editor.getOption(8)&&this.renderScreenReaderText(e,n,i);const s=n.controller.model.get(),r=this._instantiationService.createInstance(w.QG,this._editor,!1,(0,o.Dz)(null),s.selectedInlineCompletionIndex,s.inlineCompletionsCount,s.activeCommands);return e.fragment.appendChild(r.getDomNode()),s.triggerExplicitly(),i.add(r),i}renderScreenReaderText(e,t,i){const n=c.$,s=n("div.hover-row.markdown-hover"),r=c.R3(s,n("div.hover-contents",{"aria-live":"assertive"})),l=i.add(new Ue.$({editor:this._editor},this._languageService,this._openerService));i.add((0,o.EH)((n=>{var s;const o=null===(s=t.controller.model.read(n))||void 0===s?void 0:s.primaryGhostText.read(n);if(o){const t=this._editor.getModel().getLineContent(o.lineNumber);(t=>{i.add(l.onDidRenderAsync((()=>{r.className="hover-contents code-hover-contents",e.onContentsChanged()})));const n=we.NC("inlineSuggestionFollows","Suggestion:"),s=i.add(l.render((new qe.W5).appendText(n).appendCodeblock("text",t)));r.replaceChildren(s.element)})(o.renderForScreenReader(t))}else c.mc(r)}))),e.fragment.appendChild(s)}};$e=je([ze(1,Ge.O),ze(2,Be.v),ze(3,Ie.F),ze(4,he.TG),ze(5,Ze.b)],$e);class Je extends m.JT{constructor(){super()}}var Qe=i(98685);(0,n._K)(Oe.ID,Oe,3),(0,n.Qr)(Ee),(0,n.Qr)(De),(0,n.Qr)(Ve),(0,n.Qr)(Ke),(0,n.Qr)(We),(0,n.Qr)(He),(0,n.Qr)(ke),(0,Me.r1)(Fe),s.Ae.register($e),Qe.V.register(new Je)},43677:(e,t,i)=>{i.d(t,{QG:()=>V,oU:()=>L});var n,s=i(65321),o=i(76033),r=i(55496),l=i(74741),a=i(9488),d=i(15393),c=i(32429),h=i(5976),u=i(21070),g=i(54282),p=i(1432),m=i(25670),v=i(50187),f=i(71204),S=i(96020),b=i(63580),C=i(27628),x=i(59856),_=i(84144),w=i(94565),I=i(93983),y=i(5606),T=i(72065),A=i(91847),P=i(10829),N=i(59554),R=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},O=function(e,t){return function(i,n){t(i,n,e)}};let L=class extends h.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,u.rD)(this.editor.onDidChangeConfiguration,(()=>"always"===this.editor.getOption(62).showToolbar)),this.sessionPosition=void 0,this.position=(0,u.nK)(this,(e=>{var t,i,n;const s=null===(t=this.model.read(e))||void 0===t?void 0:t.primaryGhostText.read(e);if(!this.alwaysShowToolbar.read(e)||!s||0===s.parts.length)return this.sessionPosition=void 0,null;const o=s.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==s.lineNumber&&(this.sessionPosition=void 0);const r=new v.L(s.lineNumber,Math.min(o,null!==(n=null===(i=this.sessionPosition)||void 0===i?void 0:i.column)&&void 0!==n?n:Number.MAX_SAFE_INTEGER));return this.sessionPosition=r,r})),this._register((0,u.gp)(((t,i)=>{const n=this.model.read(t);if(!n||!this.alwaysShowToolbar.read(t))return;const s=(0,g.Be)(((t,i)=>{const s=i.add(this.instantiationService.createInstance(V,this.editor,!0,this.position,n.selectedInlineCompletionIndex,n.inlineCompletionsCount,n.activeCommands));return e.addContentWidget(s),i.add((0,h.OF)((()=>e.removeContentWidget(s)))),i.add((0,u.EH)((e=>{this.position.read(e)&&n.lastTriggerKind.read(e)!==f.bw.Explicit&&n.triggerExplicitly()}))),s})),o=(0,u.bx)(this,((e,t)=>!!this.position.read(e)||!!t));i.add((0,u.EH)((e=>{o.read(e)&&s.read(e)})))})))}};L=R([O(2,T.TG)],L);const M=(0,N.q5)("inline-suggestion-hints-next",c.l.chevronRight,(0,b.NC)("parameterHintsNextIcon","Icon for show next parameter hint.")),D=(0,N.q5)("inline-suggestion-hints-previous",c.l.chevronLeft,(0,b.NC)("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let V=n=class extends h.JT{static get dropDownVisible(){return this._dropDownVisible}createCommandAction(e,t,i){const n=new l.aU(e,t,i,!0,(()=>this._commandService.executeCommand(e))),s=this.keybindingService.lookupKeybinding(e,this._contextKeyService);let o=t;return s&&(o=(0,b.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",t,s.getLabel())),n.tooltip=o,n}constructor(e,t,i,o,r,a,c,h,g,p,v){super(),this.editor=e,this.withBorder=t,this._position=i,this._currentSuggestionIdx=o,this._suggestionCount=r,this._extraCommands=a,this._commandService=c,this.keybindingService=g,this._contextKeyService=p,this._menuService=v,this.id="InlineSuggestionHintsContentWidget"+n.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,s.h)("div.inlineSuggestionsHints",{className:this.withBorder?".withBorder":""},[(0,s.h)("div@toolBar")]),this.previousAction=this.createCommandAction(S.Np,(0,b.NC)("previous","Previous"),m.k.asClassName(D)),this.availableSuggestionCountAction=new l.aU("inlineSuggestionHints.availableSuggestionCount","",void 0,!1),this.nextAction=this.createCommandAction(S.OW,(0,b.NC)("next","Next"),m.k.asClassName(M)),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(_.eH.InlineCompletionsActions,this._contextKeyService)),this.clearAvailableSuggestionCountLabelDebounced=this._register(new d.pY((()=>{this.availableSuggestionCountAction.label=""}),100)),this.disableButtonsDebounced=this._register(new d.pY((()=>{this.previousAction.enabled=this.nextAction.enabled=!1}),100)),this.toolBar=this._register(h.createInstance(W,this.nodes.toolBar,_.eH.InlineSuggestionToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>{if(e instanceof _.U8)return h.createInstance(K,e,void 0);if(e===this.availableSuggestionCountAction){const t=new E(void 0,e,{label:!0,icon:!1});return t.setClass("availableSuggestionCount"),t}},telemetrySource:"InlineSuggestionToolbar"})),this.toolBar.setPrependedPrimaryActions([this.previousAction,this.availableSuggestionCountAction,this.nextAction]),this._register(this.toolBar.onDidChangeDropdownVisibility((e=>{n._dropDownVisible=e}))),this._register((0,u.EH)((e=>{this._position.read(e),this.editor.layoutContentWidget(this)}))),this._register((0,u.EH)((e=>{const t=this._suggestionCount.read(e),i=this._currentSuggestionIdx.read(e);void 0!==t?(this.clearAvailableSuggestionCountLabelDebounced.cancel(),this.availableSuggestionCountAction.label=`${i+1}/${t}`):this.clearAvailableSuggestionCountLabelDebounced.schedule(),void 0!==t&&t>1?(this.disableButtonsDebounced.cancel(),this.previousAction.enabled=this.nextAction.enabled=!0):this.disableButtonsDebounced.schedule()}))),this._register((0,u.EH)((e=>{const t=this._extraCommands.read(e).map((e=>({class:void 0,id:e.id,enabled:!0,tooltip:e.tooltip||"",label:e.title,run:t=>this._commandService.executeCommand(e.id)})));for(const[e,i]of this.inlineCompletionsActionsMenus.getActions())for(const e of i)e instanceof _.U8&&t.push(e);t.length>0&&t.unshift(new l.Z0),this.toolBar.setAdditionalSecondaryActions(t)})))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};V._dropDownVisible=!1,V.id=0,V=n=R([O(6,w.H),O(7,T.TG),O(8,A.d),O(9,I.i6),O(10,_.co)],V);class E extends o.gU{constructor(){super(...arguments),this._className=void 0}setClass(e){this._className=e}render(e){super.render(e),this._className&&e.classList.add(this._className)}updateTooltip(){}}class K extends C.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,s.h)("div.keybinding").root;this._register(new r.e(t,p.OS,{disableTitle:!0,...r.F})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineSuggestionStatusBarItemLabel")}}updateTooltip(){}}let W=class extends x.T{constructor(e,t,i,n,s,o,r,l,a){super(e,{resetMenu:t,...i},n,s,o,r,l,a),this.menuId=t,this.options2=i,this.menuService=n,this.contextKeyService=s,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var e,t,i,n,s,o,r;const l=[],a=[];(0,C.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:l,secondary:a},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(s=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===s?void 0:s.shouldInlineSubmenu,null===(r=null===(o=this.options2)||void 0===o?void 0:o.toolbarOptions)||void 0===r?void 0:r.useSeparatorsInPrimaryActions),a.push(...this.additionalActions),l.unshift(...this.prependedPrimaryActions),this.setActions(l,a)}setPrependedPrimaryActions(e){(0,a.fS)(this.prependedPrimaryActions,e,((e,t)=>e===t))||(this.prependedPrimaryActions=e,this.updateToolbar())}setAdditionalSecondaryActions(e){(0,a.fS)(this.additionalActions,e,((e,t)=>e===t))||(this.additionalActions=e,this.updateToolbar())}};W=R([O(3,_.co),O(4,I.i6),O(5,y.i),O(6,A.d),O(7,w.H),O(8,P.b)],W)},8396:(e,t,i)=>{i.d(t,{Bm:()=>g,He:()=>d,QO:()=>u,RP:()=>h,rv:()=>c});var n=i(17301),s=i(5976),o=i(21070),r=i(50187),l=i(24314);const a=[];function d(){return a}class c{constructor(e,t){if(this.startColumn=e,this.endColumnExclusive=t,e>t)throw new n.he(`startColumn ${e} cannot be after endColumnExclusive ${t}`)}toRange(e){return new l.e(e,this.startColumn,e,this.endColumnExclusive)}equals(e){return this.startColumn===e.startColumn&&this.endColumnExclusive===e.endColumnExclusive}}function h(e,t){const i=new s.SL,n=e.createDecorationsCollection();return i.add((0,o.UV)({debugName:()=>`Apply decorations from ${t.debugName}`},(e=>{const i=t.read(e);n.set(i)}))),i.add({dispose:()=>{n.clear()}}),i}function u(e,t){return new r.L(e.lineNumber+t.lineNumber-1,1===t.lineNumber?e.column+t.column-1:t.column)}function g(e,t){return new r.L(e.lineNumber-t.lineNumber+1,e.lineNumber-t.lineNumber==0?e.column-t.column+1:e.column)}}}]);