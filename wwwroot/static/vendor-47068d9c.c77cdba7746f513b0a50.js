"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[6810],{97202:(e,t,i)=>{i.d(t,{r:()=>f});var s=i(65321),n=i(4850),o=i(36513),r=i(10553),a=i(4669),c=i(5976),l=i(50988),d=i(97759),u=i(31543),h=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,s){t(i,s,e)}};let f=class extends c.JT{get enabled(){return this._enabled}set enabled(e){e?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=e}constructor(e,t,i={},c,l){var u,h;super(),this._link=t,this._hoverService=c,this._enabled=!0,this.el=(0,s.R3)(e,(0,s.$)("a.monaco-link",{tabIndex:null!==(u=t.tabIndex)&&void 0!==u?u:0,href:t.href},t.label)),this.hoverDelegate=null!==(h=i.hoverDelegate)&&void 0!==h?h:(0,d.tM)("mouse"),this.setTooltip(t.title),this.el.setAttribute("role","button");const m=this._register(new n.Y(this.el,"click")),f=this._register(new n.Y(this.el,"keypress")),p=a.ju.chain(f.event,(e=>e.map((e=>new o.y(e))).filter((e=>3===e.keyCode)))),v=this._register(new n.Y(this.el,r.t.Tap)).event;this._register(r.o.addTarget(this.el));const g=a.ju.any(m.event,p,v);this._register(g((e=>{this.enabled&&(s.zB.stop(e,!0),(null==i?void 0:i.opener)?i.opener(this._link.href):l.open(this._link.href,{allowCommands:!0}))}))),this.enabled=!0}setTooltip(e){this.hoverDelegate.showNativeHover?this.el.title=null!=e?e:"":!this.hover&&e?this.hover=this._register(this._hoverService.setupUpdatableHover(this.hoverDelegate,this.el,e)):this.hover&&this.hover.update(e)}};f=h([m(3,u.Bs),m(4,l.v)],f)},50988:(e,t,i)=>{i.d(t,{v:()=>s,x:()=>n});const s=(0,i(72065).yh)("openerService");function n(e){let t;const i=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(e.fragment);return i&&(t={startLineNumber:parseInt(i[1]),startColumn:i[2]?parseInt(i[2]):1,endLineNumber:i[4]?parseInt(i[4]):void 0,endColumn:i[4]?i[5]?parseInt(i[5]):1:void 0},e=e.with({fragment:""})),{selection:t,uri:e}}},90535:(e,t,i)=>{i.d(t,{Ex:()=>o,R9:()=>n,ek:()=>r});var s=i(72065);const n=(0,s.yh)("progressService");Object.freeze({total(){},worked(){},done(){}});class o{constructor(e){this.callback=e}report(e){this._value=e,this.callback(this._value)}}o.None=Object.freeze({report(){}});const r=(0,s.yh)("editorProgressService")},43779:(e,t,i)=>{i.d(t,{Z:()=>L});var s,n=i(59523),o=i(17301),r=i(75392),a=i(88289),c=i(5976),l=i(43702),d=i(23016),u=i(63580),h=i(94565),m=i(33108),f=i(28820),p=i(72065),v=i(91847),g=i(43557),y=i(15393),b=i(71050),k=i(98401);function I(e){const t=e;return Array.isArray(t.items)}function C(e){const t=e;return!!t.picks&&t.additionalPicks instanceof Promise}!function(e){e[e.NO_ACTION=0]="NO_ACTION",e[e.CLOSE_PICKER=1]="CLOSE_PICKER",e[e.REFRESH_PICKER=2]="REFRESH_PICKER",e[e.REMOVE_ITEM=3]="REMOVE_ITEM"}(s||(s={}));class S extends c.JT{constructor(e,t){super(),this.prefix=e,this.options=t}provide(e,t,i){var n;const o=new c.SL;let r;e.canAcceptInBackground=!!(null===(n=this.options)||void 0===n?void 0:n.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const a=o.add(new c.XK),l=async()=>{var s;const n=a.value=new c.SL;null==r||r.dispose(!0),e.busy=!1,r=new b.AU(t);const o=r.token;let l=e.value.substring(this.prefix.length);(null===(s=this.options)||void 0===s?void 0:s.shouldSkipTrimPickFilter)||(l=l.trim());const d=this._getPicks(l,n,o,i),u=(t,i)=>{var s;let n,o;if(I(t)?(n=t.items,o=t.active):n=t,0===n.length){if(i)return!1;(l.length>0||e.hideInput)&&(null===(s=this.options)||void 0===s?void 0:s.noResultsPick)&&(n=(0,k.mf)(this.options.noResultsPick)?[this.options.noResultsPick(l)]:[this.options.noResultsPick])}return e.items=n,o&&(e.activeItems=[o]),!0},h=async t=>{let i=!1,s=!1;await Promise.all([(async()=>{"number"==typeof t.mergeDelay&&(await(0,y.Vs)(t.mergeDelay),o.isCancellationRequested)||s||(i=u(t.picks,!0))})(),(async()=>{e.busy=!0;try{const s=await t.additionalPicks;if(o.isCancellationRequested)return;let n,r,a,c;if(I(t.picks)?(n=t.picks.items,r=t.picks.active):n=t.picks,I(s)?(a=s.items,c=s.active):a=s,a.length>0||!i){let t;if(!r&&!c){const i=e.activeItems[0];i&&-1!==n.indexOf(i)&&(t=i)}u({items:[...n,...a],active:r||c||t})}}finally{o.isCancellationRequested||(e.busy=!1),s=!0}})()])};if(null===d);else if(C(d))await h(d);else if(d instanceof Promise){e.busy=!0;try{const e=await d;if(o.isCancellationRequested)return;C(e)?await h(e):u(e)}finally{o.isCancellationRequested||(e.busy=!1)}}else u(d)};o.add(e.onDidChangeValue((()=>l()))),l(),o.add(e.onDidAccept((t=>{var s;if(null==i?void 0:i.handleAccept)return t.inBackground||e.hide(),void(null===(s=i.handleAccept)||void 0===s||s.call(i,e.activeItems[0]));const[n]=e.selectedItems;"function"==typeof(null==n?void 0:n.accept)&&(t.inBackground||e.hide(),n.accept(e.keyMods,t))})));const d=async(i,n)=>{var o,r;if("function"!=typeof n.trigger)return;const a=null!==(r=null===(o=n.buttons)||void 0===o?void 0:o.indexOf(i))&&void 0!==r?r:-1;if(a>=0){const i=n.trigger(a,e.keyMods),o="number"==typeof i?i:await i;if(t.isCancellationRequested)return;switch(o){case s.NO_ACTION:break;case s.CLOSE_PICKER:e.hide();break;case s.REFRESH_PICKER:l();break;case s.REMOVE_ITEM:{const t=e.items.indexOf(n);if(-1!==t){const i=e.items.slice(),s=i.splice(t,1),n=e.activeItems.filter((e=>e!==s[0])),o=e.keepScrollPosition;e.keepScrollPosition=!0,e.items=i,n&&(e.activeItems=n),e.keepScrollPosition=o}break}}}};return o.add(e.onDidTriggerItemButton((({button:e,item:t})=>d(e,t)))),o.add(e.onDidTriggerSeparatorButton((({button:e,separator:t})=>d(e,t)))),o}}var R,E,_=i(52365),P=i(10829),O=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},A=function(e,t){return function(i,s){t(i,s,e)}};let L=R=class extends S{constructor(e,t,i,s,n,o){super(R.PREFIX,e),this.instantiationService=t,this.keybindingService=i,this.commandService=s,this.telemetryService=n,this.dialogService=o,this.commandsHistory=this._register(this.instantiationService.createInstance(w)),this.options=e}async _getPicks(e,t,i,s){var n,o,r,c;const l=await this.getCommandPicks(i);if(i.isCancellationRequested)return[];const h=(0,a.M)((()=>{const t=new d.r;t.updateDocuments(l.map((e=>({key:e.commandId,textChunks:[this.getTfIdfChunk(e)]}))));const s=t.calculateScores(e,i);return(0,d.L)(s).filter((e=>e.score>R.TFIDF_THRESHOLD)).slice(0,R.TFIDF_MAX_RESULTS)})),m=[];for(const t of l){const s=null!==(n=R.WORD_FILTER(e,t.label))&&void 0!==n?n:void 0,r=t.commandAlias&&null!==(o=R.WORD_FILTER(e,t.commandAlias))&&void 0!==o?o:void 0;if(s||r)t.highlights={label:s,detail:this.options.showAlias?r:void 0},m.push(t);else if(e===t.commandId)m.push(t);else if(e.length>=3){const e=h();if(i.isCancellationRequested)return[];const s=e.find((e=>e.key===t.commandId));s&&(t.tfIdfScore=s.score,m.push(t))}}const f=new Map;for(const e of m){const t=f.get(e.label);t?(e.description=e.commandId,t.description=t.commandId):f.set(e.label,e)}m.sort(((e,t)=>{if(e.tfIdfScore&&t.tfIdfScore)return e.tfIdfScore===t.tfIdfScore?e.label.localeCompare(t.label):t.tfIdfScore-e.tfIdfScore;if(e.tfIdfScore)return 1;if(t.tfIdfScore)return-1;const i=this.commandsHistory.peek(e.commandId),s=this.commandsHistory.peek(t.commandId);if(i&&s)return i>s?-1:1;if(i)return-1;if(s)return 1;if(this.options.suggestedCommandIds){const i=this.options.suggestedCommandIds.has(e.commandId),s=this.options.suggestedCommandIds.has(t.commandId);if(i&&s)return 0;if(i)return-1;if(s)return 1}return e.label.localeCompare(t.label)}));const p=[];let v=!1,g=!0,y=!!this.options.suggestedCommandIds;for(let e=0;e<m.length;e++){const t=m[e];0===e&&this.commandsHistory.peek(t.commandId)&&(p.push({type:"separator",label:(0,u.NC)("recentlyUsed","recently used")}),v=!0),g&&void 0!==t.tfIdfScore&&(p.push({type:"separator",label:(0,u.NC)("suggested","similar commands")}),g=!1),y&&void 0===t.tfIdfScore&&!this.commandsHistory.peek(t.commandId)&&(null===(r=this.options.suggestedCommandIds)||void 0===r?void 0:r.has(t.commandId))&&(p.push({type:"separator",label:(0,u.NC)("commonlyUsed","commonly used")}),v=!0,y=!1),!v||void 0!==t.tfIdfScore||this.commandsHistory.peek(t.commandId)||(null===(c=this.options.suggestedCommandIds)||void 0===c?void 0:c.has(t.commandId))||(p.push({type:"separator",label:(0,u.NC)("morecCommands","other commands")}),v=!1),p.push(this.toCommandPick(t,s))}return this.hasAdditionalCommandPicks(e,i)?{picks:p,additionalPicks:(async()=>{var t;const n=await this.getAdditionalCommandPicks(l,m,e,i);if(i.isCancellationRequested)return[];const o=n.map((e=>this.toCommandPick(e,s)));return g&&"separator"!==(null===(t=o[0])||void 0===t?void 0:t.type)&&o.unshift({type:"separator",label:(0,u.NC)("suggested","similar commands")}),o})()}:p}toCommandPick(e,t){if("separator"===e.type)return e;const i=this.keybindingService.lookupKeybinding(e.commandId),s=i?(0,u.NC)("commandPickAriaLabelWithKeybinding","{0}, {1}",e.label,i.getAriaLabel()):e.label;return{...e,ariaLabel:s,detail:this.options.showAlias&&e.commandAlias!==e.label?e.commandAlias:void 0,keybinding:i,accept:async()=>{var i,s;this.commandsHistory.push(e.commandId),this.telemetryService.publicLog2("workbenchActionExecuted",{id:e.commandId,from:null!==(i=null==t?void 0:t.from)&&void 0!==i?i:"quick open"});try{(null===(s=e.args)||void 0===s?void 0:s.length)?await this.commandService.executeCommand(e.commandId,...e.args):await this.commandService.executeCommand(e.commandId)}catch(t){(0,o.n2)(t)||this.dialogService.error((0,u.NC)("canNotRun","Command '{0}' resulted in an error",e.label),(0,n.y)(t))}}}}getTfIdfChunk({label:e,commandAlias:t,commandDescription:i}){let s=e;return t&&t!==e&&(s+=` - ${t}`),i&&i.value!==e&&(s+=` - ${i.value===i.original?i.value:`${i.value} (${i.original})`}`),s}};L.PREFIX=">",L.TFIDF_THRESHOLD=.5,L.TFIDF_MAX_RESULTS=5,L.WORD_FILTER=(0,r.or)(r.Ji,r.KZ,r.ir),L=R=O([A(1,p.TG),A(2,v.d),A(3,h.H),A(4,P.b),A(5,f.S)],L);let w=E=class extends c.JT{constructor(e,t,i){super(),this.storageService=e,this.configurationService=t,this.logService=i,this.configuredCommandsHistoryLength=0,this.updateConfiguration(),this.load(),this.registerListeners()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration((e=>this.updateConfiguration(e)))),this._register(this.storageService.onWillSaveState((e=>{e.reason===_.fk.SHUTDOWN&&this.saveState()})))}updateConfiguration(e){e&&!e.affectsConfiguration("workbench.commandPalette.history")||(this.configuredCommandsHistoryLength=E.getConfiguredCommandHistoryLength(this.configurationService),E.cache&&E.cache.limit!==this.configuredCommandsHistoryLength&&(E.cache.limit=this.configuredCommandsHistoryLength,E.hasChanges=!0))}load(){const e=this.storageService.get(E.PREF_KEY_CACHE,0);let t;if(e)try{t=JSON.parse(e)}catch(e){this.logService.error(`[CommandsHistory] invalid data: ${e}`)}const i=E.cache=new l.z6(this.configuredCommandsHistoryLength,1);if(t){let e;e=t.usesLRU?t.entries:t.entries.sort(((e,t)=>e.value-t.value)),e.forEach((e=>i.set(e.key,e.value)))}E.counter=this.storageService.getNumber(E.PREF_KEY_COUNTER,0,E.counter)}push(e){E.cache&&(E.cache.set(e,E.counter++),E.hasChanges=!0)}peek(e){var t;return null===(t=E.cache)||void 0===t?void 0:t.peek(e)}saveState(){if(!E.cache)return;if(!E.hasChanges)return;const e={usesLRU:!0,entries:[]};E.cache.forEach(((t,i)=>e.entries.push({key:i,value:t}))),this.storageService.store(E.PREF_KEY_CACHE,JSON.stringify(e),0,0),this.storageService.store(E.PREF_KEY_COUNTER,E.counter,0,0),E.hasChanges=!1}static getConfiguredCommandHistoryLength(e){var t,i;const s=null===(i=null===(t=e.getValue().workbench)||void 0===t?void 0:t.commandPalette)||void 0===i?void 0:i.history;return"number"==typeof s?s:E.DEFAULT_COMMANDS_HISTORY_LENGTH}};w.DEFAULT_COMMANDS_HISTORY_LENGTH=50,w.PREF_KEY_CACHE="commandPalette.mru.cache",w.PREF_KEY_COUNTER="commandPalette.mru.counter",w.counter=1,w.hasChanges=!1,w=E=O([A(0,_.Uy),A(1,m.Ui),A(2,g.VZ)],w)},54090:(e,t,i)=>{i.d(t,{p:()=>h});var s,n=i(63580),o=i(89872),r=i(5976),a=i(91847),c=i(90725),l=i(41157),d=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},u=function(e,t){return function(i,s){t(i,s,e)}};let h=s=class{constructor(e,t){this.quickInputService=e,this.keybindingService=t,this.registry=o.B.as(c.IP.Quickaccess)}provide(e){const t=new r.SL;return t.add(e.onDidAccept((()=>{const[t]=e.selectedItems;t&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})}))),t.add(e.onDidChangeValue((e=>{const t=this.registry.getQuickAccessProvider(e.substr(s.PREFIX.length));t&&t.prefix&&t.prefix!==s.PREFIX&&this.quickInputService.quickAccess.show(t.prefix,{preserveValue:!0})}))),e.items=this.getQuickAccessProviders().filter((e=>e.prefix!==s.PREFIX)),t}getQuickAccessProviders(){return this.registry.getQuickAccessProviders().sort(((e,t)=>e.prefix.localeCompare(t.prefix))).flatMap((e=>this.createPicks(e)))}createPicks(e){return e.helpEntries.map((t=>{const i=t.prefix||e.prefix,s=i||"…";return{prefix:i,label:s,keybinding:t.commandId?this.keybindingService.lookupKeybinding(t.commandId):void 0,ariaLabel:(0,n.NC)("helpPickAriaLabel","{0}, {1}",s,t.description),description:t.description}}))}};h.PREFIX="?",h=s=d([u(0,l.eJ),u(1,a.d)],h)}}]);