"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[583],{36865:(e,i,t)=>{var n=t(32429),o=t(12376),s=t(29102),r=t(63580),d=t(84144),a=t(94565),h=t(93983);t(48354);(0,d.r1)(o.Op),(0,d.r1)(o.SK),(0,d.r1)(o.mf),d.BH.appendMenuItem(d.eH.EditorTitle,{command:{id:(new o.mf).desc.id,title:(0,r.NC)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:h.Ao.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:h.Ao.has("isInDiffEditor")},order:11,group:"1_diff",when:h.Ao.and(s.u.diffEditorRenderSideBySideInlineBreakpointReached,h.Ao.has("isInDiffEditor"))}),d.BH.appendMenuItem(d.eH.EditorTitle,{command:{id:(new o.SK).desc.id,title:(0,r.NC)("showMoves","Show Moved Code Blocks"),icon:n.l.move,toggled:h.cP.create("config.diffEditor.experimental.showMoves",!0),precondition:h.Ao.has("isInDiffEditor")},order:10,group:"1_diff",when:h.Ao.has("isInDiffEditor")}),(0,d.r1)(o.Ug);for(const e of[{icon:n.l.arrowRight,key:s.u.diffEditorInlineMode.toNegated()},{icon:n.l.discard,key:s.u.diffEditorInlineMode}])d.BH.appendMenuItem(d.eH.DiffEditorHunkToolbar,{command:{id:(new o.Ug).desc.id,title:(0,r.NC)("revertHunk","Revert Block"),icon:e.icon},when:h.Ao.and(s.u.diffEditorModifiedWritable,e.key),order:5,group:"primary"}),d.BH.appendMenuItem(d.eH.DiffEditorSelectionToolbar,{command:{id:(new o.Ug).desc.id,title:(0,r.NC)("revertSelection","Revert Selection"),icon:e.icon},when:h.Ao.and(s.u.diffEditorModifiedWritable,e.key),order:5,group:"primary"});(0,d.r1)(o.oR),(0,d.r1)(o.zo),(0,d.r1)(o.jN),(0,d.r1)(o.Mg),d.BH.appendMenuItem(d.eH.EditorTitle,{command:{id:o.rK.id,title:(0,r.NC)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:h.Ao.has("isInDiffEditor")},order:10,group:"2_diff",when:h.Ao.and(s.u.accessibleDiffViewerVisible.negate(),h.Ao.has("isInDiffEditor"))}),a.P.registerCommandAlias("editor.action.diffReview.next",o.rK.id),(0,d.r1)(o.rK),a.P.registerCommandAlias("editor.action.diffReview.prev",o.qu.id),(0,d.r1)(o.qu)},90471:(e,i,t)=>{t.d(i,{Z$:()=>T,hM:()=>O});var n,o=t(15393),s=t(71050),r=t(5976),d=t(21070),a=t(65026),h=t(72065),l=t(4669),g=t(84013),c=t(45463),u=t(54648),f=t(85215),m=t(10829),p=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},_=function(e,i){return function(t,n){i(t,n,e)}};const v=(0,h.yh)("diffProviderFactoryService");let b=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(C,e)}};b=p([_(0,h.TG)],b),(0,a.z)(v,b,1);let C=n=class{constructor(e,i,t){this.editorWorkerService=i,this.telemetryService=t,this.onDidChangeEventEmitter=new l.Q5,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}async computeDiff(e,i,t,o){var s,r;if("string"!=typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,i,t,o);if(e.isDisposed()||i.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===i.getLineCount()&&1===i.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new u.gB(new c.z(1,2),new c.z(1,i.getLineCount()+1),[new u.iy(e.getFullModelRange(),i.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const d=JSON.stringify([e.uri.toString(),i.uri.toString()]),a=JSON.stringify([e.id,i.id,e.getAlternativeVersionId(),i.getAlternativeVersionId(),JSON.stringify(t)]),h=n.diffCache.get(d);if(h&&h.context===a)return h.result;const l=g.G.create(),f=await this.editorWorkerService.computeDiff(e.uri,i.uri,t,this.diffAlgorithm),m=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:m,timedOut:null===(s=null==f?void 0:f.quitEarly)||void 0===s||s,detectedMoves:t.computeMoves?null!==(r=null==f?void 0:f.moves.length)&&void 0!==r?r:0:-1}),o.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!f)throw new Error("no diff result available");return n.diffCache.size>10&&n.diffCache.delete(n.diffCache.keys().next().value),n.diffCache.set(d,{result:f,context:a}),f}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(null===(i=this.diffAlgorithmOnDidChangeSubscription)||void 0===i||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!=typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((()=>this.onDidChangeEventEmitter.fire()))),t=!0),t&&this.onDidChangeEventEmitter.fire()}};C.diffCache=new Map,C=n=p([_(1,f.p),_(2,m.b)],C);var L=t(97488),w=t(25580),S=t(2442),R=t(41574),M=t(39156),y=t(98401),E=t(9488),D=t(35146),N=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},I=function(e,i){return function(t,n){i(t,n,e)}};let T=class extends r.JT{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,i,t){super(),this.model=e,this._options=i,this._diffProviderFactoryService=t,this._isDiffUpToDate=(0,d.uh)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,d.uh)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,d.uh)(this,void 0),this.unchangedRegions=(0,d.nK)(this,(e=>{var i,t;return this._options.hideUnchangedRegions.read(e)?null!==(t=null===(i=this._unchangedRegions.read(e))||void 0===i?void 0:i.regions)&&void 0!==t?t:[]:((0,d.PS)((e=>{var i;for(const t of(null===(i=this._unchangedRegions.get())||void 0===i?void 0:i.regions)||[])t.collapseAll(e)})),[])})),this.movedTextToCompare=(0,d.uh)(this,void 0),this._activeMovedText=(0,d.uh)(this,void 0),this._hoveredMovedText=(0,d.uh)(this,void 0),this.activeMovedText=(0,d.nK)(this,(e=>{var i,t;return null!==(t=null!==(i=this.movedTextToCompare.read(e))&&void 0!==i?i:this._hoveredMovedText.read(e))&&void 0!==t?t:this._activeMovedText.read(e)})),this._cancellationTokenSource=new s.AU,this._diffProvider=(0,d.nK)(this,(e=>{const i=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(e)});return{diffProvider:i,onChangeSignal:(0,d.aq)("onDidChange",i.onDidChange)}})),this._register((0,r.OF)((()=>this._cancellationTokenSource.cancel())));const n=(0,d.GN)("contentChangedSignal"),a=this._register(new o.pY((()=>n.trigger(void 0)),200));this._register((0,d.EH)((i=>{const t=this._unchangedRegions.read(i);if(!t||t.regions.some((e=>e.isDragged.read(i))))return;const n=t.originalDecorationIds.map((i=>e.original.getDecorationRange(i))).map((e=>e?c.z.fromRangeInclusive(e):void 0)),o=t.modifiedDecorationIds.map((i=>e.modified.getDecorationRange(i))).map((e=>e?c.z.fromRangeInclusive(e):void 0)),s=t.regions.map(((e,t)=>n[t]&&o[t]?new V(n[t].startLineNumber,o[t].startLineNumber,n[t].length,e.visibleLineCountTop.read(i),e.visibleLineCountBottom.read(i)):void 0)).filter(y.$K),r=[];let a=!1;for(const e of(0,E.mw)(s,((e,t)=>e.getHiddenModifiedRange(i).endLineNumberExclusive===t.getHiddenModifiedRange(i).startLineNumber)))if(e.length>1){a=!0;const i=e.reduce(((e,i)=>e+i.lineCount),0),t=new V(e[0].originalLineNumber,e[0].modifiedLineNumber,i,e[0].visibleLineCountTop.get(),e[e.length-1].visibleLineCountBottom.get());r.push(t)}else r.push(e[0]);if(a){const i=e.original.deltaDecorations(t.originalDecorationIds,r.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),n=e.modified.deltaDecorations(t.modifiedDecorationIds,r.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));(0,d.PS)((e=>{this._unchangedRegions.set({regions:r,originalDecorationIds:i,modifiedDecorationIds:n},e)}))}})));const h=(i,t,n)=>{const o=V.fromDiffs(i.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(n),this._options.hideUnchangedRegionsContextLineCount.read(n));let s;const r=this._unchangedRegions.get();if(r){const i=r.originalDecorationIds.map((i=>e.original.getDecorationRange(i))).map((e=>e?c.z.fromRangeInclusive(e):void 0)),t=r.modifiedDecorationIds.map((i=>e.modified.getDecorationRange(i))).map((e=>e?c.z.fromRangeInclusive(e):void 0));let o=(0,L.W7)(r.regions.map(((e,n)=>{if(!i[n]||!t[n])return;const o=i[n].length;return new V(i[n].startLineNumber,t[n].startLineNumber,o,Math.min(e.visibleLineCountTop.get(),o),Math.min(e.visibleLineCountBottom.get(),o-e.visibleLineCountTop.get()))})).filter(y.$K),((e,i)=>!i||e.modifiedLineNumber>=i.modifiedLineNumber+i.lineCount&&e.originalLineNumber>=i.originalLineNumber+i.lineCount)).map((e=>new u.f0(e.getHiddenOriginalRange(n),e.getHiddenModifiedRange(n))));o=u.f0.clip(o,c.z.ofLength(1,e.original.getLineCount()),c.z.ofLength(1,e.modified.getLineCount())),s=u.f0.inverse(o,e.original.getLineCount(),e.modified.getLineCount())}const d=[];if(s)for(const e of o){const i=s.filter((i=>i.original.intersectsStrict(e.originalUnchangedRange)&&i.modified.intersectsStrict(e.modifiedUnchangedRange)));d.push(...e.setVisibleRanges(i,t))}else d.push(...o);const a=e.original.deltaDecorations((null==r?void 0:r.originalDecorationIds)||[],d.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),h=e.modified.deltaDecorations((null==r?void 0:r.modifiedDecorationIds)||[],d.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));this._unchangedRegions.set({regions:d,originalDecorationIds:a,modifiedDecorationIds:h},t)};this._register(e.modified.onDidChangeContent((i=>{if(this._diff.get()){const t=S.Q.fromModelContentChanges(i.changes),n=P(this._lastDiff,t,e.original,e.modified);n&&(this._lastDiff=n,(0,d.PS)((e=>{this._diff.set(x.fromDiffResult(this._lastDiff),e),h(n,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),a.schedule()}))),this._register(e.original.onDidChangeContent((i=>{if(this._diff.get()){const t=S.Q.fromModelContentChanges(i.changes),n=A(this._lastDiff,t,e.original,e.modified);n&&(this._lastDiff=n,(0,d.PS)((e=>{this._diff.set(x.fromDiffResult(this._lastDiff),e),h(n,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),a.schedule()}))),this._register((0,d.gp)((async(i,t)=>{var o,s;this._options.hideUnchangedRegionsMinimumLineCount.read(i),this._options.hideUnchangedRegionsContextLineCount.read(i),a.cancel(),n.read(i);const r=this._diffProvider.read(i);r.onChangeSignal.read(i),(0,L.NW)(w.DW,i),(0,L.NW)(M.xG,i),this._isDiffUpToDate.set(!1,void 0);let l=[];t.add(e.original.onDidChangeContent((e=>{const i=S.Q.fromModelContentChanges(e.changes);l=(0,R.o)(l,i)})));let g=[];t.add(e.modified.onDidChangeContent((e=>{const i=S.Q.fromModelContentChanges(e.changes);g=(0,R.o)(g,i)})));let c=await r.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(i),maxComputationTimeMs:this._options.maxComputationTimeMs.read(i),computeMoves:this._options.showMoves.read(i)},this._cancellationTokenSource.token);var f,m,p;this._cancellationTokenSource.token.isCancellationRequested||(e.original.isDisposed()||e.modified.isDisposed()||(f=c,m=e.original,p=e.modified,c={changes:f.changes.map((e=>new u.gB(e.original,e.modified,e.innerChanges?e.innerChanges.map((e=>function(e,i,t){let n=e.originalRange,o=e.modifiedRange;return(1!==n.endColumn||1!==o.endColumn)&&n.endColumn===i.getLineMaxColumn(n.endLineNumber)&&o.endColumn===t.getLineMaxColumn(o.endLineNumber)&&n.endLineNumber<i.getLineCount()&&o.endLineNumber<t.getLineCount()&&(n=n.setEndPosition(n.endLineNumber+1,1),o=o.setEndPosition(o.endLineNumber+1,1)),new u.iy(n,o)}(e,m,p))):void 0))),moves:f.moves,identical:f.identical,quitEarly:f.quitEarly},c=null!==(o=A(c,l,e.original,e.modified))&&void 0!==o?o:c,c=null!==(s=P(c,g,e.original,e.modified))&&void 0!==s?s:c,(0,d.PS)((e=>{h(c,e),this._lastDiff=c;const i=x.fromDiffResult(c);this._diff.set(i,e),this._isDiffUpToDate.set(!0,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)}))))})))}ensureModifiedLineIsVisible(e,i,t){var n,o;if(0===(null===(n=this.diff.get())||void 0===n?void 0:n.mappings.length))return;const s=(null===(o=this._unchangedRegions.get())||void 0===o?void 0:o.regions)||[];for(const n of s)if(n.getHiddenModifiedRange(void 0).contains(e))return void n.showModifiedLine(e,i,t)}ensureOriginalLineIsVisible(e,i,t){var n,o;if(0===(null===(n=this.diff.get())||void 0===n?void 0:n.mappings.length))return;const s=(null===(o=this._unchangedRegions.get())||void 0===o?void 0:o.regions)||[];for(const n of s)if(n.getHiddenOriginalRange(void 0).contains(e))return void n.showOriginalLine(e,i,t)}async waitForDiff(){await(0,d.F_)(this.isDiffUpToDate,(e=>e))}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:null==e?void 0:e.regions.map((e=>({range:e.getHiddenModifiedRange(void 0).serialize()})))}}restoreSerializedState(e){var i;const t=null===(i=e.collapsedRegions)||void 0===i?void 0:i.map((e=>c.z.deserialize(e.range))),n=this._unchangedRegions.get();n&&t&&(0,d.PS)((e=>{for(const i of n.regions)for(const n of t)if(i.modifiedUnchangedRange.intersect(n)){i.setHiddenModifiedRange(n,e);break}}))}};T=N([I(2,v)],T);class x{static fromDiffResult(e){return new x(e.changes.map((e=>new O(e))),e.moves||[],e.identical,e.quitEarly)}constructor(e,i,t,n){this.mappings=e,this.movedTexts=i,this.identical=t,this.quitEarly=n}}class O{constructor(e){this.lineRangeMapping=e}}class V{static fromDiffs(e,i,t,n,o){const s=u.gB.inverse(e,i,t),r=[];for(const e of s){let s=e.original.startLineNumber,d=e.modified.startLineNumber,a=e.original.length;const h=1===s&&1===d,l=s+a===i+1&&d+a===t+1;(h||l)&&a>=o+n?(h&&!l&&(a-=o),l&&!h&&(s+=o,d+=o,a-=o),r.push(new V(s,d,a,0,0))):a>=2*o+n&&(s+=o,d+=o,a-=2*o,r.push(new V(s,d,a,0,0)))}return r}get originalUnchangedRange(){return c.z.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return c.z.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,i,t,n,o){this.originalLineNumber=e,this.modifiedLineNumber=i,this.lineCount=t,this._visibleLineCountTop=(0,d.uh)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,d.uh)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,d.nK)(this,(e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e))),this.isDragged=(0,d.uh)(this,void 0);const s=Math.max(Math.min(n,this.lineCount),0),r=Math.max(Math.min(o,this.lineCount-n),0);(0,D.wN)(n===s),(0,D.wN)(o===r),this._visibleLineCountTop.set(s,void 0),this._visibleLineCountBottom.set(r,void 0)}setVisibleRanges(e,i){const t=[],n=new c.i(e.map((e=>e.modified))).subtractFrom(this.modifiedUnchangedRange);let o=this.originalLineNumber,s=this.modifiedLineNumber;const r=this.modifiedLineNumber+this.lineCount;if(0===n.ranges.length)this.showAll(i),t.push(this);else{let e=0;for(const d of n.ranges){const a=e===n.ranges.length-1;e++;const h=(a?r:d.endLineNumberExclusive)-s,l=new V(o,s,h,0,0);l.setHiddenModifiedRange(d,i),t.push(l),o=l.originalUnchangedRange.endLineNumberExclusive,s=l.modifiedUnchangedRange.endLineNumberExclusive}}return t}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return c.z.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return c.z.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,i){const t=e.startLineNumber-this.modifiedLineNumber,n=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(t,n,i)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(e=10,i){const t=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,t),i)}showMoreBelow(e=10,i){const t=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,t),i)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,i,t){const n=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===i&&n<o||1===i?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+n,t):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,t)}showOriginalLine(e,i,t){const n=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;0===i&&n<o||1===i?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-n,this.getMaxVisibleLineCountTop()),t):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+n-o,this.getMaxVisibleLineCountBottom()),t)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,i,t){e=Math.max(Math.min(e,this.lineCount),0),i=Math.max(Math.min(i,this.lineCount-e),0),this._visibleLineCountTop.set(e,t),this._visibleLineCountBottom.set(i,t)}}function A(e,i,t,n){}function P(e,i,t,n){}},56652:(e,i,t)=>{t.d(i,{p:()=>fe});var n=t(65321),o=t(35534),s=t(17301),r=t(4669),d=t(5976),a=t(21070),h=t(54282),l=t(16830),g=t(11640),c=t(43407),u=t(82151),f=t(60266),m=t(26817),p=t(93957),_=t(93666),v=t(97488),b=t(45463),C=t(19247);class L extends d.JT{constructor(e,i,t){super(),this._editor=e,this._domNode=i,this.itemProvider=t,this.scrollTop=(0,a.rD)(this._editor.onDidScrollChange,(e=>this._editor.getScrollTop())),this.isScrollTopZero=this.scrollTop.map((e=>0===e)),this.modelAttached=(0,a.rD)(this._editor.onDidChangeModel,(e=>this._editor.hasModel())),this.editorOnDidChangeViewZones=(0,a.aq)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,a.aq)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,a.GN)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const o=this._domNode.appendChild((0,n.h)("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver((()=>{(0,a.PS)((e=>{this.domNodeSizeChanged.trigger(e)}))}));s.observe(this._domNode),this._register((0,d.OF)((()=>s.disconnect()))),this._register((0,a.EH)((e=>{o.className=this.isScrollTopZero.read(e)?"":"scroll-decoration"}))),this._register((0,a.EH)((e=>this.render(e))))}dispose(){super.dispose(),(0,n.mc)(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const i=this.scrollTop.read(e),t=this._editor.getVisibleRanges(),n=new Set(this.views.keys()),o=C.q.ofStartAndLength(0,this._domNode.clientHeight);if(!o.isEmpty)for(const s of t){const t=new b.z(s.startLineNumber,s.endLineNumber+1),r=this.itemProvider.getIntersectingGutterItems(t,e);(0,a.PS)((e=>{for(const s of r){if(!s.range.intersect(t))continue;n.delete(s.id);let r=this.views.get(s.id);if(r)r.item.set(s,e);else{const e=document.createElement("div");this._domNode.appendChild(e);const i=(0,a.uh)("item",s),t=this.itemProvider.createView(i,e);r=new w(i,t,e),this.views.set(s.id,r)}const d=s.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(s.range.startLineNumber,!0)-i:this._editor.getBottomForLineNumber(s.range.startLineNumber-1,!1)-i,h=(s.range.isEmpty?d:this._editor.getBottomForLineNumber(s.range.endLineNumberExclusive-1,!0)-i)-d;r.domNode.style.top=`${d}px`,r.domNode.style.height=`${h}px`,r.gutterItemView.layout(C.q.ofStartAndLength(d,h),o)}}))}for(const e of n){const i=this.views.get(e);i.gutterItemView.dispose(),this._domNode.removeChild(i.domNode),this.views.delete(e)}}}class w{constructor(e,i,t){this.item=e,this.gutterItemView=i,this.domNode=t}}var S=t(33528),R=t(24314),M=t(81129),y=t(54648),E=t(86944),D=t(59856),N=t(84144),I=t(93983),T=t(31543),x=t(72065),O=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},V=function(e,i){return function(t,n){i(t,n,e)}};const A=[];let P=class extends d.JT{constructor(e,i,t,o,s,r,d,l,g){super(),this._diffModel=i,this._editors=t,this._options=o,this._sashLayout=s,this._boundarySashes=r,this._instantiationService=d,this._contextKeyService=l,this._menuService=g,this._menu=this._register(this._menuService.createMenu(N.eH.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=(0,a.rD)(this._menu.onDidChange,(()=>this._menu.getActions())),this._hasActions=this._actions.map((e=>e.length>0)),this._showSash=(0,a.nK)(this,(e=>this._options.renderSideBySide.read(e)&&this._hasActions.read(e))),this.width=(0,a.nK)(this,(e=>this._hasActions.read(e)?35:0)),this.elements=(0,n.h)("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),this._currentDiff=(0,a.nK)(this,(e=>{var i;const t=this._diffModel.read(e);if(!t)return;const n=null===(i=t.diff.read(e))||void 0===i?void 0:i.mappings,o=this._editors.modifiedCursor.read(e);return o?null==n?void 0:n.find((e=>e.lineRangeMapping.modified.contains(o.lineNumber))):void 0})),this._selectedDiffs=(0,a.nK)(this,(e=>{const i=this._diffModel.read(e),t=null==i?void 0:i.diff.read(e);if(!t)return A;const n=this._editors.modifiedSelections.read(e);if(n.every((e=>e.isEmpty())))return A;const o=new b.i(n.map((e=>b.z.fromRangeInclusive(e)))),s=t.mappings.filter((e=>e.lineRangeMapping.innerChanges&&o.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>n.some((i=>R.e.areIntersecting(e.modifiedRange,i)))))})));return 0===s.length||s.every((e=>0===e.rangeMappings.length))?A:s})),this._register((0,v.RL)(e,this.elements.root)),this._register((0,n.nm)(this.elements.root,"click",(()=>{this._editors.modified.focus()}))),this._register((0,v.bg)(this.elements.root,{display:this._hasActions.map((e=>e?"block":"none"))})),(0,h.kA)(this,(i=>this._showSash.read(i)?new p.v(e,this._sashLayout.dimensions,this._options.enableSplitViewResizing,this._boundarySashes,(0,h.B5)(this,(e=>this._sashLayout.sashLeft.read(e)-35),((e,i)=>this._sashLayout.sashLeft.set(e+35,i))),(()=>this._sashLayout.resetSash())):void 0)).recomputeInitiallyAndOnChange(this._store),this._register(new L(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(e,i)=>{const t=this._diffModel.read(i);if(!t)return[];const n=t.diff.read(i);if(!n)return[];const o=this._selectedDiffs.read(i);if(o.length>0){const e=y.gB.fromRangeMappings(o.flatMap((e=>e.rangeMappings)));return[new W(e,!0,N.eH.DiffEditorSelectionToolbar,void 0,t.model.original.uri,t.model.modified.uri)]}const s=this._currentDiff.read(i);return n.mappings.map((e=>new W(e.lineRangeMapping.withInnerChangesFromLineRanges(),e.lineRangeMapping===(null==s?void 0:s.lineRangeMapping),N.eH.DiffEditorHunkToolbar,void 0,t.model.original.uri,t.model.modified.uri)))},createView:(e,i)=>this._instantiationService.createInstance(H,e,i,this)})),this._register((0,n.nm)(this.elements.gutter,n.tw.MOUSE_WHEEL,(e=>{this._editors.modified.getOption(103).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1}))}computeStagedValue(e){var i;const t=null!==(i=e.innerChanges)&&void 0!==i?i:[],n=new E.j(this._editors.modifiedModel.get()),o=new E.j(this._editors.original.getModel()),s=new M.PY(t.map((e=>e.toTextEdit(n))));return s.apply(o)}layout(e){this.elements.gutter.style.left=e+"px"}};P=O([V(6,x.TG),V(7,I.i6),V(8,N.co)],P);class W{constructor(e,i,t,n,o,s){this.mapping=e,this.showAlways=i,this.menuId=t,this.rangeOverride=n,this.originalUri=o,this.modifiedUri=s}get id(){return this.mapping.modified.toString()}get range(){var e;return null!==(e=this.rangeOverride)&&void 0!==e?e:this.mapping.modified}}let H=class extends d.JT{constructor(e,i,t,o){super(),this._item=e,this._elements=(0,n.h)("div.gutterItem",{style:{height:"20px",width:"34px"}},[(0,n.h)("div.background@background",{},[]),(0,n.h)("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,(e=>e.showAlways)),this._menuId=this._item.map(this,(e=>e.menuId)),this._isSmall=(0,a.uh)(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(o.createInstance(T.mQ,"element",!0,{position:{hoverPosition:1}}));this._register((0,v.xx)(i,this._elements.root)),this._register((0,a.EH)((e=>{const i=this._showAlways.read(e);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",i),setTimeout((()=>{this._elements.root.classList.toggle("noTransition",!1)}),0)}))),this._register((0,a.gp)(((e,i)=>{this._elements.buttons.replaceChildren();const n=i.add(o.createInstance(D.r,this._elements.buttons,this._menuId.read(e),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(e)?1:3},hiddenItemStrategy:0,actionRunner:new S.D((()=>{const e=this._item.get(),i=e.mapping;return{mapping:i,originalWithModifiedChanges:t.computeStagedValue(i),originalUri:e.originalUri,modifiedUri:e.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));i.add(n.onDidChangeMenuItems((()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)})))})))}layout(e,i){this._lastItemRange=e,this._lastViewRange=i;let t=this._elements.buttons.clientHeight;this._isSmall.set(1===this._item.get().mapping.original.startLineNumber&&e.length<30,void 0),t=this._elements.buttons.clientHeight;const n=e.length/2-t/2,o=t;let s=e.start+n;const r=C.q.tryCreate(o,i.endExclusive-o-t),d=C.q.tryCreate(e.start+o,e.endExclusive-t-o);d&&r&&d.start<d.endExclusive&&(s=r.clip(s),s=d.clip(s)),this._elements.buttons.style.top=s-e.start+"px"}};H=O([V(3,x.TG)],H);var B=t(78713),U=t(72362),k=t(54880),z=t(56811),F=t(32429),K=t(84973),Z=t(63580);const q=[];class G extends d.JT{constructor(e,i,t,n){super(),this._editors=e,this._diffModel=i,this._options=t,this._widget=n,this._selectedDiffs=(0,a.nK)(this,(e=>{const i=this._diffModel.read(e),t=null==i?void 0:i.diff.read(e);if(!t)return q;const n=this._editors.modifiedSelections.read(e);if(n.every((e=>e.isEmpty())))return q;const o=new b.i(n.map((e=>b.z.fromRangeInclusive(e)))),s=t.mappings.filter((e=>e.lineRangeMapping.innerChanges&&o.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>n.some((i=>R.e.areIntersecting(e.modifiedRange,i)))))})));return 0===s.length||s.every((e=>0===e.rangeMappings.length))?q:s})),this._register((0,a.gp)(((e,i)=>{if(!this._options.shouldRenderOldRevertArrows.read(e))return;const t=this._diffModel.read(e),n=null==t?void 0:t.diff.read(e);if(!t||!n)return;if(t.movedTextToCompare.read(e))return;const o=[],s=this._selectedDiffs.read(e),r=new Set(s.map((e=>e.mapping)));if(s.length>0){const t=this._editors.modifiedSelections.read(e),n=i.add(new j(t[t.length-1].positionLineNumber,this._widget,s.flatMap((e=>e.rangeMappings)),!0));this._editors.modified.addGlyphMarginWidget(n),o.push(n)}for(const e of n.mappings)if(!r.has(e)&&!e.lineRangeMapping.modified.isEmpty&&e.lineRangeMapping.innerChanges){const t=i.add(new j(e.lineRangeMapping.modified.startLineNumber,this._widget,e.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(t),o.push(t)}i.add((0,d.OF)((()=>{for(const e of o)this._editors.modified.removeGlyphMarginWidget(e)})))})))}}class j extends d.JT{getId(){return this._id}constructor(e,i,t,o){super(),this._lineNumber=e,this._widget=i,this._diffs=t,this._revertSelection=o,this._id="revertButton"+j.counter++,this._domNode=(0,n.h)("div.revertButton",{title:this._revertSelection?(0,Z.NC)("revertSelectedChanges","Revert Selected Changes"):(0,Z.NC)("revertChange","Revert Change")},[(0,z.h)(F.l.arrowRight)]).root,this._register((0,n.nm)(this._domNode,n.tw.MOUSE_DOWN,(e=>{2!==e.button&&(e.stopPropagation(),e.preventDefault())}))),this._register((0,n.nm)(this._domNode,n.tw.MOUSE_UP,(e=>{e.stopPropagation(),e.preventDefault()}))),this._register((0,n.nm)(this._domNode,n.tw.CLICK,(e=>{this._diffs instanceof y.f0?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),e.stopPropagation(),e.preventDefault()})))}getDomNode(){return this._domNode}getPosition(){return{lane:K.U.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}j.counter=0;var $=t(9322),J=t(50187),Y=t(96518),Q=t(29102),X=t(38832),ee=t(60972),ie=t(90535),te=t(76681);class ne extends d.JT{constructor(){super(...arguments),this._id=++ne.idCounter,this._onDidDispose=this._register(new r.Q5),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e,i="api"){this._targetEditor.setPosition(e,i)}revealLine(e,i=0){this._targetEditor.revealLine(e,i)}revealLineInCenter(e,i=0){this._targetEditor.revealLineInCenter(e,i)}revealLineInCenterIfOutsideViewport(e,i=0){this._targetEditor.revealLineInCenterIfOutsideViewport(e,i)}revealLineNearTop(e,i=0){this._targetEditor.revealLineNearTop(e,i)}revealPosition(e,i=0){this._targetEditor.revealPosition(e,i)}revealPositionInCenter(e,i=0){this._targetEditor.revealPositionInCenter(e,i)}revealPositionInCenterIfOutsideViewport(e,i=0){this._targetEditor.revealPositionInCenterIfOutsideViewport(e,i)}revealPositionNearTop(e,i=0){this._targetEditor.revealPositionNearTop(e,i)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e,i="api"){this._targetEditor.setSelection(e,i)}setSelections(e,i="api"){this._targetEditor.setSelections(e,i)}revealLines(e,i,t=0){this._targetEditor.revealLines(e,i,t)}revealLinesInCenter(e,i,t=0){this._targetEditor.revealLinesInCenter(e,i,t)}revealLinesInCenterIfOutsideViewport(e,i,t=0){this._targetEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}revealLinesNearTop(e,i,t=0){this._targetEditor.revealLinesNearTop(e,i,t)}revealRange(e,i=0,t=!1,n=!0){this._targetEditor.revealRange(e,i,t,n)}revealRangeInCenter(e,i=0){this._targetEditor.revealRangeInCenter(e,i)}revealRangeInCenterIfOutsideViewport(e,i=0){this._targetEditor.revealRangeInCenterIfOutsideViewport(e,i)}revealRangeNearTop(e,i=0){this._targetEditor.revealRangeNearTop(e,i)}revealRangeNearTopIfOutsideViewport(e,i=0){this._targetEditor.revealRangeNearTopIfOutsideViewport(e,i)}revealRangeAtTop(e,i=0){this._targetEditor.revealRangeAtTop(e,i)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,i,t){this._targetEditor.trigger(e,i,t)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}ne.idCounter=0;var oe=t(15115),se=t(64141),re=t(31106),de=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},ae=function(e,i){return function(t,n){i(t,n,e)}};let he=class{get editorOptions(){return this._options}constructor(e,i){this._accessibilityService=i,this._diffEditorWidth=(0,a.uh)(this,0),this._screenReaderMode=(0,a.rD)(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>this._accessibilityService.isScreenReaderOptimized())),this.couldShowInlineViewBecauseOfSize=(0,a.nK)(this,(e=>this._options.read(e).renderSideBySide&&this._diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint)),this.renderOverviewRuler=(0,a.nK)(this,(e=>this._options.read(e).renderOverviewRuler)),this.renderSideBySide=(0,a.nK)(this,(e=>this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e)&&!this._screenReaderMode.read(e)))),this.readOnly=(0,a.nK)(this,(e=>this._options.read(e).readOnly)),this.shouldRenderOldRevertArrows=(0,a.nK)(this,(e=>!!this._options.read(e).renderMarginRevertIcon&&(!!this.renderSideBySide.read(e)&&(!this.readOnly.read(e)&&!this.shouldRenderGutterMenu.read(e))))),this.shouldRenderGutterMenu=(0,a.nK)(this,(e=>this._options.read(e).renderGutterMenu)),this.renderIndicators=(0,a.nK)(this,(e=>this._options.read(e).renderIndicators)),this.enableSplitViewResizing=(0,a.nK)(this,(e=>this._options.read(e).enableSplitViewResizing)),this.splitViewDefaultRatio=(0,a.nK)(this,(e=>this._options.read(e).splitViewDefaultRatio)),this.ignoreTrimWhitespace=(0,a.nK)(this,(e=>this._options.read(e).ignoreTrimWhitespace)),this.maxComputationTimeMs=(0,a.nK)(this,(e=>this._options.read(e).maxComputationTime)),this.showMoves=(0,a.nK)(this,(e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e))),this.isInEmbeddedEditor=(0,a.nK)(this,(e=>this._options.read(e).isInEmbeddedEditor)),this.diffWordWrap=(0,a.nK)(this,(e=>this._options.read(e).diffWordWrap)),this.originalEditable=(0,a.nK)(this,(e=>this._options.read(e).originalEditable)),this.diffCodeLens=(0,a.nK)(this,(e=>this._options.read(e).diffCodeLens)),this.accessibilityVerbose=(0,a.nK)(this,(e=>this._options.read(e).accessibilityVerbose)),this.diffAlgorithm=(0,a.nK)(this,(e=>this._options.read(e).diffAlgorithm)),this.showEmptyDecorations=(0,a.nK)(this,(e=>this._options.read(e).experimental.showEmptyDecorations)),this.onlyShowAccessibleDiffViewer=(0,a.nK)(this,(e=>this._options.read(e).onlyShowAccessibleDiffViewer)),this.hideUnchangedRegions=(0,a.nK)(this,(e=>this._options.read(e).hideUnchangedRegions.enabled)),this.hideUnchangedRegionsRevealLineCount=(0,a.nK)(this,(e=>this._options.read(e).hideUnchangedRegions.revealLineCount)),this.hideUnchangedRegionsContextLineCount=(0,a.nK)(this,(e=>this._options.read(e).hideUnchangedRegions.contextLineCount)),this.hideUnchangedRegionsMinimumLineCount=(0,a.nK)(this,(e=>this._options.read(e).hideUnchangedRegions.minimumLineCount));const t={...e,...le(e,oe.k)};this._options=(0,a.uh)(this,t)}updateOptions(e){const i=le(e,this._options.get()),t={...this._options.get(),...e,...i};this._options.set(t,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}};function le(e,i){var t,n,o,s,r,d,a,h;return{enableSplitViewResizing:(0,se.O7)(e.enableSplitViewResizing,i.enableSplitViewResizing),splitViewDefaultRatio:(0,se.L_)(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,se.O7)(e.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,se.O7)(e.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,se.Zc)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,se.Zc)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,se.O7)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,se.O7)(e.renderIndicators,i.renderIndicators),originalEditable:(0,se.O7)(e.originalEditable,i.originalEditable),diffCodeLens:(0,se.O7)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,se.O7)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(0,se.NY)(e.diffWordWrap,i.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,se.NY)(e.diffAlgorithm,i.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,se.O7)(e.accessibilityVerbose,i.accessibilityVerbose),experimental:{showMoves:(0,se.O7)(null===(t=e.experimental)||void 0===t?void 0:t.showMoves,i.experimental.showMoves),showEmptyDecorations:(0,se.O7)(null===(n=e.experimental)||void 0===n?void 0:n.showEmptyDecorations,i.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:(0,se.O7)(null!==(s=null===(o=e.hideUnchangedRegions)||void 0===o?void 0:o.enabled)&&void 0!==s?s:null===(r=e.experimental)||void 0===r?void 0:r.collapseUnchangedRegions,i.hideUnchangedRegions.enabled),contextLineCount:(0,se.Zc)(null===(d=e.hideUnchangedRegions)||void 0===d?void 0:d.contextLineCount,i.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,se.Zc)(null===(a=e.hideUnchangedRegions)||void 0===a?void 0:a.minimumLineCount,i.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,se.Zc)(null===(h=e.hideUnchangedRegions)||void 0===h?void 0:h.revealLineCount,i.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,se.O7)(e.isInEmbeddedEditor,i.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,se.O7)(e.onlyShowAccessibleDiffViewer,i.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,se.Zc)(e.renderSideBySideInlineBreakpoint,i.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,se.O7)(e.useInlineViewWhenSpaceIsLimited,i.useInlineViewWhenSpaceIsLimited),renderGutterMenu:(0,se.O7)(e.renderGutterMenu,i.renderGutterMenu)}}he=de([ae(1,re.F)],he);var ge=t(90471),ce=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},ue=function(e,i){return function(t,n){i(t,n,e)}};let fe=class extends ne{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,i,t,o,s,l,g,u){var b;super(),this._domElement=e,this._parentContextKeyService=o,this._parentInstantiationService=s,this._accessibilitySignalService=g,this._editorProgressService=u,this.elements=(0,n.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,n.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,n.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,n.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=(0,a.uh)(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=r.ju.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new ee.y([I.i6,this._contextKeyService]))),this._boundarySashes=(0,a.uh)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,a.uh)(this,!1),this._accessibleDiffViewerVisible=(0,a.nK)(this,(e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e))),this._movedBlocksLinesPart=(0,a.uh)(this,void 0),this._layoutInfo=(0,a.nK)(this,(e=>{var i,t,n,o,s;const r=this._rootSizeObserver.width.read(e),d=this._rootSizeObserver.height.read(e);this._rootSizeObserver.automaticLayout?this.elements.root.style.height="100%":this.elements.root.style.height=d+"px";const a=this._sash.read(e),h=this._gutter.read(e),l=null!==(i=null==h?void 0:h.width.read(e))&&void 0!==i?i:0,g=null!==(n=null===(t=this._overviewRulerPart.read(e))||void 0===t?void 0:t.width)&&void 0!==n?n:0;let c,u,f,m,p;if(!!a){const i=a.sashLeft.read(e);c=0,u=i-l-(null!==(s=null===(o=this._movedBlocksLinesPart.read(e))||void 0===o?void 0:o.width.read(e))&&void 0!==s?s:0),p=i-l,f=i,m=r-f-g}else p=0,c=l,u=Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),f=l+u,m=r-f-g;return this.elements.original.style.left=c+"px",this.elements.original.style.width=u+"px",this._editors.original.layout({width:u,height:d},!0),null==h||h.layout(p),this.elements.modified.style.left=f+"px",this.elements.modified.style.width=m+"px",this._editors.modified.layout({width:m,height:d},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}})),this._diffValue=this._diffModel.map(((e,i)=>null==e?void 0:e.diff.read(i))),this.onDidUpdateDiff=r.ju.fromObservableLight(this._diffValue),l.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,d.OF)((()=>this._domElement.removeChild(this.elements.root)))),this._rootSizeObserver=this._register(new v.DU(this.elements.root,i.dimension)),this._rootSizeObserver.setAutomaticLayout(null!==(b=i.automaticLayout)&&void 0!==b&&b),this._options=this._instantiationService.createInstance(he,i),this._register((0,a.EH)((e=>{this._options.setWidth(this._rootSizeObserver.width.read(e))}))),this._contextKeyService.createKey(Q.u.isEmbeddedDiffEditor.key,!1),this._register((0,$.G)(Q.u.isEmbeddedDiffEditor,this._contextKeyService,(e=>this._options.isInEmbeddedEditor.read(e)))),this._register((0,$.G)(Q.u.comparingMovedCode,this._contextKeyService,(e=>{var i;return!!(null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e))}))),this._register((0,$.G)(Q.u.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,(e=>this._options.couldShowInlineViewBecauseOfSize.read(e)))),this._register((0,$.G)(Q.u.diffEditorInlineMode,this._contextKeyService,(e=>!this._options.renderSideBySide.read(e)))),this._register((0,$.G)(Q.u.hasChanges,this._contextKeyService,(e=>{var i,t,n;return(null!==(n=null===(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.diff.read(e))||void 0===t?void 0:t.mappings.length)&&void 0!==n?n:0)>0}))),this._editors=this._register(this._instantiationService.createInstance(te.c,this.elements.original,this.elements.modified,this._options,t,((e,i,t,n)=>this._createInnerEditor(e,i,t,n)))),this._register((0,$.G)(Q.u.diffEditorOriginalWritable,this._contextKeyService,(e=>this._options.originalEditable.read(e)))),this._register((0,$.G)(Q.u.diffEditorModifiedWritable,this._contextKeyService,(e=>!this._options.readOnly.read(e)))),this._register((0,$.G)(Q.u.diffEditorOriginalUri,this._contextKeyService,(e=>{var i,t;return null!==(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.model.original.uri.toString())&&void 0!==t?t:""}))),this._register((0,$.G)(Q.u.diffEditorModifiedUri,this._contextKeyService,(e=>{var i,t;return null!==(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.model.modified.uri.toString())&&void 0!==t?t:""}))),this._overviewRulerPart=(0,h.kA)(this,(e=>this._options.renderOverviewRuler.read(e)?this._instantiationService.createInstance((0,v.NW)(k.U,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((e=>e.modifiedEditor))):void 0)).recomputeInitiallyAndOnChange(this._store);const C={height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(((e,i)=>{var t,n;return e-(null!==(n=null===(t=this._overviewRulerPart.read(i))||void 0===t?void 0:t.width)&&void 0!==n?n:0)}))};this._sashLayout=new p.E(this._options,C),this._sash=(0,h.kA)(this,(e=>{const i=this._options.renderSideBySide.read(e);return this.elements.root.classList.toggle("side-by-side",i),i?new p.v(this.elements.root,C,this._options.enableSplitViewResizing,this._boundarySashes,this._sashLayout.sashLeft,(()=>this._sashLayout.resetSash())):void 0})).recomputeInitiallyAndOnChange(this._store);const L=(0,h.kA)(this,(e=>this._instantiationService.createInstance((0,v.NW)(B.O,e),this._editors,this._diffModel,this._options))).recomputeInitiallyAndOnChange(this._store);(0,h.kA)(this,(e=>this._instantiationService.createInstance((0,v.NW)(m.r,e),this._editors,this._diffModel,this._options,this))).recomputeInitiallyAndOnChange(this._store);const w=new Set,S=new Set;let R=!1;const M=(0,h.kA)(this,(e=>this._instantiationService.createInstance((0,v.NW)(_.m,e),(0,n.Jj)(this._domElement),this._editors,this._diffModel,this._options,this,(()=>R||L.get().isUpdatingHiddenAreas),w,S))).recomputeInitiallyAndOnChange(this._store),y=(0,a.nK)(this,(e=>{const i=M.read(e).viewZones.read(e).orig,t=L.read(e).viewZones.read(e).origViewZones;return i.concat(t)})),E=(0,a.nK)(this,(e=>{const i=M.read(e).viewZones.read(e).mod,t=L.read(e).viewZones.read(e).modViewZones;return i.concat(t)}));let D;this._register((0,v.Sv)(this._editors.original,y,(e=>{R=e}),w)),this._register((0,v.Sv)(this._editors.modified,E,(e=>{R=e,R?D=c.Z.capture(this._editors.modified):(null==D||D.restore(this._editors.modified),D=void 0)}),S)),this._accessibleDiffViewer=(0,h.kA)(this,(e=>this._instantiationService.createInstance((0,v.NW)(f.y,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,((e,i)=>this._accessibleDiffViewerShouldBeVisible.set(e,i)),this._options.onlyShowAccessibleDiffViewer.map((e=>!e)),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(((e,i)=>{var t;return null===(t=null==e?void 0:e.diff.read(i))||void 0===t?void 0:t.mappings.map((e=>e.lineRangeMapping))})),new f.X(this._editors)))).recomputeInitiallyAndOnChange(this._store);const N=this._accessibleDiffViewerVisible.map((e=>e?"hidden":"visible"));this._register((0,v.bg)(this.elements.modified,{visibility:N})),this._register((0,v.bg)(this.elements.original,{visibility:N})),this._createDiffEditorContributions(),l.addDiffEditor(this),this._gutter=(0,h.kA)(this,(e=>this._options.shouldRenderGutterMenu.read(e)?this._instantiationService.createInstance((0,v.NW)(P,e),this.elements.root,this._diffModel,this._editors,this._options,this._sashLayout,this._boundarySashes):void 0)),this._register((0,a.jx)(this._layoutInfo)),(0,h.kA)(this,(e=>new((0,v.NW)(U.Q,e))(this.elements.root,this._diffModel,this._layoutInfo.map((e=>e.originalEditor)),this._layoutInfo.map((e=>e.modifiedEditor)),this._editors))).recomputeInitiallyAndOnChange(this._store,(e=>{this._movedBlocksLinesPart.set(e,void 0)})),this._register(r.ju.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(e=>this._handleCursorPositionChange(e,!0)))),this._register(r.ju.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,(e=>this._handleCursorPositionChange(e,!1))));const T=this._diffModel.map(this,((e,i)=>{if(e)return void 0===e.diff.read(i)&&!e.isDiffUpToDate.read(i)}));this._register((0,a.gp)(((e,i)=>{if(!0===T.read(e)){const e=this._editorProgressService.show(!0,1e3);i.add((0,d.OF)((()=>e.done())))}}))),this._register((0,d.OF)((()=>{var e;this._shouldDisposeDiffModel&&(null===(e=this._diffModel.get())||void 0===e||e.dispose())}))),this._register((0,a.gp)(((e,i)=>{i.add(new((0,v.NW)(G,e))(this._editors,this._diffModel,this._options,this))})))}_createInnerEditor(e,i,t,n){return e.createInstance(u.Gm,i,t,n)}_createDiffEditorContributions(){const e=l.Uc.getDiffEditorContributions();for(const i of e)try{this._register(this._instantiationService.createInstance(i.ctor,this))}catch(e){(0,s.dL)(e)}}get _targetEditor(){return this._editors.modified}getEditorType(){return Y.g.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}restoreViewState(e){var i;if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&(null===(i=this._diffModel.get())||void 0===i||i.restoreSerializedState(t.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(ge.Z$,e,this._options)}getModel(){var e,i;return null!==(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==i?i:null}setModel(e,i){!e&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();const t=e?"model"in e?{model:e,shouldDispose:!1}:{model:this.createViewModel(e),shouldDispose:!0}:void 0;this._diffModel.get()!==(null==t?void 0:t.model)&&(0,a.c8)(i,(e=>{var i;a.rD.batchEventsGlobally(e,(()=>{this._editors.original.setModel(t?t.model.model.original:null),this._editors.modified.setModel(t?t.model.model.modified:null)}));const n=this._diffModel.get(),o=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=null!==(i=null==t?void 0:t.shouldDispose)&&void 0!==i&&i,this._diffModel.set(null==t?void 0:t.model,e),o&&(null==n||n.dispose())}))}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return i?i.mappings.map((e=>{const i=e.lineRangeMapping;let t,n,o,s,r=i.innerChanges;return i.original.isEmpty?(t=i.original.startLineNumber-1,n=0,r=void 0):(t=i.original.startLineNumber,n=i.original.endLineNumberExclusive-1),i.modified.isEmpty?(o=i.modified.startLineNumber-1,s=0,r=void 0):(o=i.modified.startLineNumber,s=i.modified.endLineNumberExclusive-1),{originalStartLineNumber:t,originalEndLineNumber:n,modifiedStartLineNumber:o,modifiedEndLineNumber:s,charChanges:null==r?void 0:r.map((e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn})))}})):null}revert(e){const i=this._diffModel.get();i&&i.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:i.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const i=this._diffModel.get();if(!i||!i.isDiffUpToDate.get())return;const t=e.map((e=>({range:e.modifiedRange,text:i.model.original.getValueInRange(e.originalRange)})));this._editors.modified.executeEdits("diffEditor",t)}_goTo(e){this._editors.modified.setPosition(new J.L(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var i,t,n,s;const r=null===(t=null===(i=this._diffModel.get())||void 0===i?void 0:i.diff.get())||void 0===t?void 0:t.mappings;if(!r||0===r.length)return;const d=this._editors.modified.getPosition().lineNumber;let a;a="next"===e?null!==(n=r.find((e=>e.lineRangeMapping.modified.startLineNumber>d)))&&void 0!==n?n:r[0]:null!==(s=(0,o.dF)(r,(e=>e.lineRangeMapping.modified.startLineNumber<d)))&&void 0!==s?s:r[r.length-1],this._goTo(a),a.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(X.iP.diffLineDeleted,{source:"diffEditor.goToDiff"}):a.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(X.iP.diffLineInserted,{source:"diffEditor.goToDiff"}):a&&this._accessibilitySignalService.playSignal(X.iP.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then((()=>{var i;const t=null===(i=e.diff.get())||void 0===i?void 0:i.mappings;t&&0!==t.length&&this._goTo(t[0])}))}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var e,i;const t=this._editors.modified.hasWidgetFocus(),n=t?this._editors.modified:this._editors.original,o=t?this._editors.original:this._editors.modified;let s;const r=n.getSelection();if(r){const n=null===(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get())||void 0===i?void 0:i.mappings.map((e=>t?e.lineRangeMapping.flip():e.lineRangeMapping));if(n){const e=(0,v.cV)(r.getStartPosition(),n),i=(0,v.cV)(r.getEndPosition(),n);s=R.e.plusRange(e,i)}}return{destination:o,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:i}=this.mapToOtherSide();e.focus(),i&&e.setSelection(i)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,a.PS)((e=>{for(const t of i)t.collapseAll(e)}))}showAllUnchangedRegions(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,a.PS)((e=>{for(const t of i)t.showAll(e)}))}_handleCursorPositionChange(e,i){var t,n;if(3===(null==e?void 0:e.reason)){const o=null===(n=null===(t=this._diffModel.get())||void 0===t?void 0:t.diff.get())||void 0===n?void 0:n.mappings.find((t=>i?t.lineRangeMapping.modified.contains(e.position.lineNumber):t.lineRangeMapping.original.contains(e.position.lineNumber)));(null==o?void 0:o.lineRangeMapping.modified.isEmpty)?this._accessibilitySignalService.playSignal(X.iP.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null==o?void 0:o.lineRangeMapping.original.isEmpty)?this._accessibilitySignalService.playSignal(X.iP.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):o&&this._accessibilitySignalService.playSignal(X.iP.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};fe=ce([ue(3,I.i6),ue(4,x.TG),ue(5,g.$),ue(6,X.IV),ue(7,ie.ek)],fe)},78713:(e,i,t)=>{t.d(i,{O:()=>w});var n,o=t(65321),s=t(56811),r=t(32429),d=t(59365),a=t(5976),h=t(21070),l=t(54282),g=t(25670),c=t(98401),u=t(97488),f=t(45463),m=t(50187),p=t(24314),_=t(71204),v=t(63580),b=t(72065),C=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},L=function(e,i){return function(t,n){i(t,n,e)}};let w=n=class extends a.JT{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,i,t,o){super(),this._editors=e,this._diffModel=i,this._options=t,this._instantiationService=o,this._modifiedOutlineSource=(0,l.kA)(this,(e=>{const i=this._editors.modifiedModel.read(e),t=n._breadcrumbsSourceFactory.read(e);return i&&t?t(i,this._instantiationService):void 0})),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition((e=>{if(1===e.reason)return;const i=this._diffModel.get();(0,h.PS)((e=>{for(const t of this._editors.original.getSelections()||[])null==i||i.ensureOriginalLineIsVisible(t.getStartPosition().lineNumber,0,e),null==i||i.ensureOriginalLineIsVisible(t.getEndPosition().lineNumber,0,e)}))}))),this._register(this._editors.modified.onDidChangeCursorPosition((e=>{if(1===e.reason)return;const i=this._diffModel.get();(0,h.PS)((e=>{for(const t of this._editors.modified.getSelections()||[])null==i||i.ensureModifiedLineIsVisible(t.getStartPosition().lineNumber,0,e),null==i||i.ensureModifiedLineIsVisible(t.getEndPosition().lineNumber,0,e)}))})));const s=this._diffModel.map(((e,i)=>{var t,n;const o=null!==(t=null==e?void 0:e.unchangedRegions.read(i))&&void 0!==t?t:[];return 1===o.length&&1===o[0].modifiedLineNumber&&o[0].lineCount===(null===(n=this._editors.modifiedModel.read(i))||void 0===n?void 0:n.getLineCount())?[]:o}));this.viewZones=(0,h.Be)(this,((e,i)=>{const t=this._modifiedOutlineSource.read(e);if(!t)return{origViewZones:[],modViewZones:[]};const n=[],o=[],r=this._options.renderSideBySide.read(e),d=s.read(e);for(const s of d)if(!s.shouldHideControls(e)){{const e=(0,h.nK)(this,(e=>s.getHiddenOriginalRange(e).startLineNumber-1)),o=new u.GD(e,24);n.push(o),i.add(new S(this._editors.original,o,s,s.originalUnchangedRange,!r,t,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}{const e=(0,h.nK)(this,(e=>s.getHiddenModifiedRange(e).startLineNumber-1)),n=new u.GD(e,24);o.push(n),i.add(new S(this._editors.modified,n,s,s.modifiedUnchangedRange,!1,t,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}}return{origViewZones:n,modViewZones:o}}));const a={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},_={description:"Fold Unchanged",glyphMarginHoverMessage:new d.W5(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,v.NC)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+g.k.asClassName(r.l.fold),zIndex:10001};this._register((0,u.RP)(this._editors.original,(0,h.nK)(this,(e=>{const i=s.read(e),t=i.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:a})));for(const n of i)n.shouldHideControls(e)&&t.push({range:p.e.fromPositions(new m.L(n.originalLineNumber,1)),options:_});return t})))),this._register((0,u.RP)(this._editors.modified,(0,h.nK)(this,(e=>{const i=s.read(e),t=i.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:a})));for(const n of i)n.shouldHideControls(e)&&t.push({range:f.z.ofLength(n.modifiedLineNumber,1).toInclusiveRange(),options:_});return t})))),this._register((0,h.EH)((e=>{const i=s.read(e);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(i.map((i=>i.getHiddenOriginalRange(e).toInclusiveRange())).filter(c.$K)),this._editors.modified.setHiddenAreas(i.map((i=>i.getHiddenModifiedRange(e).toInclusiveRange())).filter(c.$K))}finally{this._isUpdatingHiddenAreas=!1}}))),this._register(this._editors.modified.onMouseUp((e=>{var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){const i=e.target.position.lineNumber,t=this._diffModel.get();if(!t)return;const n=t.unchangedRegions.get().find((e=>e.modifiedUnchangedRange.includes(i)));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),this._register(this._editors.original.onMouseUp((e=>{var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){const i=e.target.position.lineNumber,t=this._diffModel.get();if(!t)return;const n=t.unchangedRegions.get().find((e=>e.originalUnchangedRange.includes(i)));if(!n)return;n.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})))}};w._breadcrumbsSourceFactory=(0,h.uh)("breadcrumbsSourceFactory",void 0),w=n=C([L(3,b.TG)],w);class S extends u.N9{constructor(e,i,t,n,d,a,l,g){const c=(0,o.h)("div.diff-hidden-lines-widget");super(e,i,c.root),this._editor=e,this._unchangedRegion=t,this._unchangedRegionRange=n,this._hide=d,this._modifiedOutlineSource=a,this._revealModifiedHiddenLine=l,this._options=g,this._nodes=(0,o.h)("div.diff-hidden-lines",[(0,o.h)("div.top@top",{title:(0,v.NC)("diff.hiddenLines.top","Click or drag to show more above")}),(0,o.h)("div.center@content",{style:{display:"flex"}},[(0,o.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,o.$)("a",{title:(0,v.NC)("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,s.T)("$(unfold)"))]),(0,o.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,o.h)("div.bottom@bottom",{title:(0,v.NC)("diff.bottom","Click or drag to show more below"),role:"button"})]),c.root.appendChild(this._nodes.root);const f=(0,h.rD)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));this._hide?(0,o.mc)(this._nodes.first):this._register((0,u.bg)(this._nodes.first,{width:f.map((e=>e.contentLeft))})),this._register((0,h.EH)((e=>{const i=this._unchangedRegion.visibleLineCountTop.read(e)+this._unchangedRegion.visibleLineCountBottom.read(e)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!i),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),this._nodes.top.classList.toggle("canMoveBottom",!i);const t=this._unchangedRegion.isDragged.read(e),n=this._editor.getDomNode();n&&(n.classList.toggle("draggingUnchangedRegion",!!t),"top"===t?(n.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),n.classList.toggle("canMoveBottom",!i)):"bottom"===t?(n.classList.toggle("canMoveTop",!i),n.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0)):(n.classList.toggle("canMoveTop",!1),n.classList.toggle("canMoveBottom",!1)))})));const m=this._editor;this._register((0,o.nm)(this._nodes.top,"mousedown",(e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const i=e.clientY;let t=!1;const n=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const s=(0,o.Jj)(this._nodes.top),r=(0,o.nm)(s,"mousemove",(e=>{const o=e.clientY-i;t=t||Math.abs(o)>2;const s=Math.round(o/m.getOption(67)),r=Math.max(0,Math.min(n+s,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(r,void 0)})),d=(0,o.nm)(s,"mouseup",(e=>{t||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),r.dispose(),d.dispose()}))}))),this._register((0,o.nm)(this._nodes.bottom,"mousedown",(e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const i=e.clientY;let t=!1;const n=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const s=(0,o.Jj)(this._nodes.bottom),r=(0,o.nm)(s,"mousemove",(e=>{const o=e.clientY-i;t=t||Math.abs(o)>2;const s=Math.round(o/m.getOption(67)),r=Math.max(0,Math.min(n-s,this._unchangedRegion.getMaxVisibleLineCountBottom())),d=this._unchangedRegionRange.endLineNumberExclusive>m.getModel().getLineCount()?m.getContentHeight():m.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(r,void 0);const a=this._unchangedRegionRange.endLineNumberExclusive>m.getModel().getLineCount()?m.getContentHeight():m.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);m.setScrollTop(m.getScrollTop()+(a-d))})),d=(0,o.nm)(s,"mouseup",(e=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!t){const e=m.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const i=m.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);m.setScrollTop(m.getScrollTop()+(i-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),r.dispose(),d.dispose()}))}))),this._register((0,h.EH)((e=>{const i=[];if(!this._hide){const n=t.getHiddenModifiedRange(e).length,d=(0,v.NC)("hiddenLines","{0} hidden lines",n),a=(0,o.$)("span",{title:(0,v.NC)("diff.hiddenLines.expandAll","Double click to unfold")},d);a.addEventListener("dblclick",(e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))})),i.push(a);const h=this._unchangedRegion.getHiddenModifiedRange(e),l=this._modifiedOutlineSource.getBreadcrumbItems(h,e);if(l.length>0){i.push((0,o.$)("span",void 0,"  |  "));for(let e=0;e<l.length;e++){const t=l[e],n=_.uZ.toIcon(t.kind),d=(0,o.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,s.h)(n)," ",t.name,...e===l.length-1?[]:[(0,s.h)(r.l.chevronRight)]]).root;i.push(d),d.onclick=()=>{this._revealModifiedHiddenLine(t.startLineNumber)}}}}(0,o.mc)(this._nodes.others,...i)})))}}},72362:(e,i,t)=>{t.d(i,{Q:()=>m});var n=t(65321),o=t(90317),s=t(74741),r=t(9488),d=t(35534),a=t(32429),h=t(5976),l=t(21070),g=t(25670),c=t(97488),u=t(19247),f=t(63580);class m extends h.JT{constructor(e,i,t,n,o){super(),this._rootElement=e,this._diffModel=i,this._originalEditorLayoutInfo=t,this._modifiedEditorLayoutInfo=n,this._editors=o,this._originalScrollTop=(0,l.rD)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,l.rD)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._viewZonesChanged=(0,l.aq)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,l.uh)(this,0),this._modifiedViewZonesChangedSignal=(0,l.aq)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,l.aq)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,l.Be)(this,((e,i)=>{var t;this._element.replaceChildren();const n=this._diffModel.read(e),o=null===(t=null==n?void 0:n.diff.read(e))||void 0===t?void 0:t.movedTexts;if(!o||0===o.length)return void this.width.set(0,void 0);this._viewZonesChanged.read(e);const s=this._originalEditorLayoutInfo.read(e),d=this._modifiedEditorLayoutInfo.read(e);if(!s||!d)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);const a=o.map((i=>{function t(e,i){return(i.getTopForLineNumber(e.startLineNumber,!0)+i.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}const n=t(i.lineRangeMapping.original,this._editors.original),o=this._originalScrollTop.read(e),s=t(i.lineRangeMapping.modified,this._editors.modified),r=n-o,d=s-this._modifiedScrollTop.read(e),a=Math.min(n,s),h=Math.max(n,s);return{range:new u.q(a,h),from:r,to:d,fromWithoutScroll:n,toWithoutScroll:s,move:i}}));a.sort((0,r.f_)((0,r.tT)((e=>e.fromWithoutScroll>e.toWithoutScroll),r.nW),(0,r.tT)((e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll),r.fv)));const h=p.compute(a.map((e=>e.range))),g=s.verticalScrollbarWidth,c=10*(h.getTrackCount()-1)+20,f=g+c+(d.contentLeft-m.movedCodeBlockPadding);let _=0;for(const e of a){const t=g+10+10*h.getTrack(_),o=15,s=15,r=f,a=d.glyphMarginWidth+d.lineNumbersWidth,c=18,u=document.createElementNS("http://www.w3.org/2000/svg","rect");u.classList.add("arrow-rectangle"),u.setAttribute("x",""+(r-a)),u.setAttribute("y",""+(e.to-c/2)),u.setAttribute("width",`${a}`),u.setAttribute("height",`${c}`),this._element.appendChild(u);const m=document.createElementNS("http://www.w3.org/2000/svg","g"),p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",`M 0 ${e.from} L ${t} ${e.from} L ${t} ${e.to} L ${r-s} ${e.to}`),p.setAttribute("fill","none"),m.appendChild(p);const v=document.createElementNS("http://www.w3.org/2000/svg","polygon");v.classList.add("arrow"),i.add((0,l.EH)((i=>{p.classList.toggle("currentMove",e.move===n.activeMovedText.read(i)),v.classList.toggle("currentMove",e.move===n.activeMovedText.read(i))}))),v.setAttribute("points",`${r-s},${e.to-o/2} ${r},${e.to} ${r-s},${e.to+o/2}`),m.appendChild(v),this._element.appendChild(m),_++}this.width.set(c,void 0)})),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,h.OF)((()=>this._element.remove()))),this._register((0,l.EH)((e=>{const i=this._originalEditorLayoutInfo.read(e),t=this._modifiedEditorLayoutInfo.read(e);i&&t&&(this._element.style.left=i.width-i.verticalScrollbarWidth+"px",this._element.style.height=`${i.height}px`,this._element.style.width=`${i.verticalScrollbarWidth+i.contentLeft-m.movedCodeBlockPadding+this.width.read(e)}px`)}))),this._register((0,l.jx)(this._state));const s=(0,l.nK)((e=>{const i=this._diffModel.read(e),t=null==i?void 0:i.diff.read(e);return t?t.movedTexts.map((e=>({move:e,original:new c.GD((0,l.Dz)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new c.GD((0,l.Dz)(e.lineRangeMapping.modified.startLineNumber-1),18)}))):[]}));this._register((0,c.Sv)(this._editors.original,s.map((e=>e.map((e=>e.original)))))),this._register((0,c.Sv)(this._editors.modified,s.map((e=>e.map((e=>e.modified)))))),this._register((0,l.gp)(((e,i)=>{const t=s.read(e);for(const e of t)i.add(new _(this._editors.original,e.original,e.move,"original",this._diffModel.get())),i.add(new _(this._editors.modified,e.modified,e.move,"modified",this._diffModel.get()))})));const d=(0,l.aq)("original.onDidFocusEditorWidget",(e=>this._editors.original.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0))))),a=(0,l.aq)("modified.onDidFocusEditorWidget",(e=>this._editors.modified.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0)))));let g="modified";this._register((0,l.nJ)({createEmptyChangeSummary:()=>{},handleChange:(e,i)=>(e.didChange(d)&&(g="original"),e.didChange(a)&&(g="modified"),!0)},(e=>{d.read(e),a.read(e);const i=this._diffModel.read(e);if(!i)return;const t=i.diff.read(e);let n;if(t&&"original"===g){const i=this._editors.originalCursor.read(e);i&&(n=t.movedTexts.find((e=>e.lineRangeMapping.original.contains(i.lineNumber))))}if(t&&"modified"===g){const i=this._editors.modifiedCursor.read(e);i&&(n=t.movedTexts.find((e=>e.lineRangeMapping.modified.contains(i.lineNumber))))}n!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(n)})))}}m.movedCodeBlockPadding=4;class p{static compute(e){const i=[],t=[];for(const n of e){let e=i.findIndex((e=>!e.intersectsStrict(n)));if(-1===e){const t=6;i.length>=t?e=(0,d.Y0)(i,(0,r.tT)((e=>e.intersectWithRangeLength(n)),r.fv)):(e=i.length,i.push(new u.M))}i[e].addRange(n),t.push(e)}return new p(i.length,t)}constructor(e,i){this._trackCount=e,this.trackPerLineIdx=i}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class _ extends c.N9{constructor(e,i,t,r,d){const h=(0,n.h)("div.diff-hidden-lines-widget");super(e,i,h.root),this._editor=e,this._move=t,this._kind=r,this._diffModel=d,this._nodes=(0,n.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,n.h)("div.text-content@textContent"),(0,n.h)("div.action-bar@actionBar")]),h.root.appendChild(this._nodes.root);const u=(0,l.rD)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));let m;this._register((0,c.bg)(this._nodes.root,{paddingRight:u.map((e=>e.verticalScrollbarWidth))})),m=t.changes.length>0?"original"===this._kind?(0,f.NC)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,f.NC)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?(0,f.NC)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,f.NC)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const p=this._register(new o.o(this._nodes.actionBar,{highlightToggledItems:!0})),_=new s.aU("",m,"",!1);p.push(_,{icon:!1,label:!0});const v=new s.aU("","Compare",g.k.asClassName(a.l.compareChanges),!0,(()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===t?void 0:this._move,void 0)}));this._register((0,l.EH)((e=>{const i=this._diffModel.movedTextToCompare.read(e)===t;v.checked=i}))),p.push(v,{icon:!1,label:!0})}}},54880:(e,i,t)=>{t.d(i,{U:()=>p});var n,o=t(65321),s=t(38626),r=t(51203),d=t(5976),a=t(21070),h=t(97488),l=t(50187),g=t(30665),c=t(82992),u=t(97781),f=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},m=function(e,i){return function(t,n){i(t,n,e)}};let p=n=class extends d.JT{constructor(e,i,t,d,u,f,m){super(),this._editors=e,this._rootElement=i,this._diffModel=t,this._rootWidth=d,this._rootHeight=u,this._modifiedEditorLayoutInfo=f,this._themeService=m,this.width=n.ENTIRE_DIFF_OVERVIEW_WIDTH;const p=(0,a.rD)(this._themeService.onDidColorThemeChange,(()=>this._themeService.getColorTheme())),_=(0,a.nK)((e=>{const i=p.read(e);return{insertColor:i.getColor(c.P6Y)||(i.getColor(c.ypS)||c.CzK).transparent(2),removeColor:i.getColor(c.F9q)||(i.getColor(c.P4M)||c.keg).transparent(2)}})),v=(0,s.X)(document.createElement("div"));v.setClassName("diffViewport"),v.setPosition("absolute");const b=(0,o.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:n.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register((0,h.xx)(b,v.domNode)),this._register((0,o.mu)(b,o.tw.POINTER_DOWN,(e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),this._register((0,o.nm)(b,o.tw.MOUSE_WHEEL,(e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),this._register((0,h.xx)(this._rootElement,b)),this._register((0,a.gp)(((e,i)=>{const t=this._diffModel.read(e),o=this._editors.original.createOverviewRuler("original diffOverviewRuler");o&&(i.add(o),i.add((0,h.xx)(b,o.getDomNode())));const s=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(s&&(i.add(s),i.add((0,h.xx)(b,s.getDomNode()))),!o||!s)return;const d=(0,a.aq)("viewZoneChanged",this._editors.original.onDidChangeViewZones),c=(0,a.aq)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),u=(0,a.aq)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),f=(0,a.aq)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);i.add((0,a.EH)((e=>{var i;d.read(e),c.read(e),u.read(e),f.read(e);const n=_.read(e),r=null===(i=null==t?void 0:t.diff.read(e))||void 0===i?void 0:i.mappings;function a(e,i,t){const n=t._getViewModel();return n?e.filter((e=>e.length>0)).map((e=>{const t=n.coordinatesConverter.convertModelPositionToViewPosition(new l.L(e.startLineNumber,1)),o=n.coordinatesConverter.convertModelPositionToViewPosition(new l.L(e.endLineNumberExclusive,1)),s=o.lineNumber-t.lineNumber;return new g.EY(t.lineNumber,o.lineNumber,s,i.toString())})):[]}const h=a((r||[]).map((e=>e.lineRangeMapping.original)),n.removeColor,this._editors.original),m=a((r||[]).map((e=>e.lineRangeMapping.modified)),n.insertColor,this._editors.modified);null==o||o.setZones(h),null==s||s.setZones(m)}))),i.add((0,a.EH)((e=>{const i=this._rootHeight.read(e),t=this._rootWidth.read(e),d=this._modifiedEditorLayoutInfo.read(e);if(d){const t=n.ENTIRE_DIFF_OVERVIEW_WIDTH-2*n.ONE_OVERVIEW_WIDTH;o.setLayout({top:0,height:i,right:t+n.ONE_OVERVIEW_WIDTH,width:n.ONE_OVERVIEW_WIDTH}),s.setLayout({top:0,height:i,right:0,width:n.ONE_OVERVIEW_WIDTH});const a=this._editors.modifiedScrollTop.read(e),h=this._editors.modifiedScrollHeight.read(e),l=this._editors.modified.getOption(103),g=new r.M(l.verticalHasArrows?l.arrowSize:0,l.verticalScrollbarSize,0,d.height,h,a);v.setTop(g.getSliderPosition()),v.setHeight(g.getSliderSize())}else v.setTop(0),v.setHeight(0);b.style.height=i+"px",b.style.left=t-n.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",v.setWidth(n.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})))}};p.ONE_OVERVIEW_WIDTH=15,p.ENTIRE_DIFF_OVERVIEW_WIDTH=2*n.ONE_OVERVIEW_WIDTH,p=n=f([m(6,u.XE)],p)},48354:(e,i,t)=>{t.d(i,{$F:()=>C,Jv:()=>p,LE:()=>m,W3:()=>b,fO:()=>l,i_:()=>f,iq:()=>c,n_:()=>_,rd:()=>u,rq:()=>v,vv:()=>g});var n=t(32429),o=t(25670),s=t(54530),r=t(63580),d=t(82992),a=t(59554);(0,d.P6G)("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},(0,r.NC)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,d.P6G)("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},(0,r.NC)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),(0,d.P6G)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,r.NC)("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const h=(0,a.q5)("diff-insert",n.l.add,(0,r.NC)("diffInsertIcon","Line decoration for inserts in the diff editor.")),l=(0,a.q5)("diff-remove",n.l.remove,(0,r.NC)("diffRemoveIcon","Line decoration for removals in the diff editor.")),g=s.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+o.k.asClassName(h),marginClassName:"gutter-insert"}),c=s.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+o.k.asClassName(l),marginClassName:"gutter-delete"}),u=s.qx.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),f=s.qx.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),m=s.qx.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),p=s.qx.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),_=s.qx.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),v=s.qx.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),b=s.qx.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),C=s.qx.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})},97488:(e,i,t)=>{t.d(i,{Ap:()=>c,DU:()=>p,GD:()=>b,N9:()=>v,NW:()=>w,RL:()=>m,RP:()=>u,Sv:()=>S,Vm:()=>_,W7:()=>y,bg:()=>L,cV:()=>M,t2:()=>R,xx:()=>f});var n=t(35534),o=t(71050),s=t(61910),r=t(5976),d=t(21070),a=t(54534),h=t(50187),l=t(24314),g=t(59722);function c(e,i,t,n){if(0===e.length)return i;if(0===i.length)return e;const o=[];let s=0,r=0;for(;s<e.length&&r<i.length;){const d=e[s],a=i[r],h=t(d),l=t(a);h<l?(o.push(d),s++):h>l?(o.push(a),r++):(o.push(n(d,a)),s++,r++)}for(;s<e.length;)o.push(e[s]),s++;for(;r<i.length;)o.push(i[r]),r++;return o}function u(e,i){const t=new r.SL,n=e.createDecorationsCollection();return t.add((0,d.UV)({debugName:()=>`Apply decorations from ${i.debugName}`},(e=>{const t=i.read(e);n.set(t)}))),t.add({dispose:()=>{n.clear()}}),t}function f(e,i){return e.appendChild(i),(0,r.OF)((()=>{e.removeChild(i)}))}function m(e,i){return e.prepend(i),(0,r.OF)((()=>{e.removeChild(i)}))}class p extends r.JT{get width(){return this._width}get height(){return this._height}get automaticLayout(){return this._automaticLayout}constructor(e,i){super(),this._automaticLayout=!1,this.elementSizeObserver=this._register(new a.I(e,i)),this._width=(0,d.uh)(this,this.elementSizeObserver.getWidth()),this._height=(0,d.uh)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((e=>(0,d.PS)((e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){this._automaticLayout=e,e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function _(e,i,t){let n=i.get(),o=n,s=n;const r=(0,d.uh)("animatedValue",n);let a=-1;let h;function l(){const i=Date.now()-a;var t,d,g,c;s=Math.floor((d=o,g=n-o,(t=i)===(c=300)?d+g:g*(1-Math.pow(2,-10*t/c))+d)),i<300?h=e.requestAnimationFrame(l):s=n,r.set(s,void 0)}return t.add((0,d.nJ)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(e,t)=>(e.didChange(i)&&(t.animate=t.animate||e.change),!0)},((t,r)=>{void 0!==h&&(e.cancelAnimationFrame(h),h=void 0),o=s,n=i.read(t),a=Date.now()-(r.animate?0:300),l()}))),r}class v extends r.JT{constructor(e,i,t){super(),this._register(new C(e,t)),this._register(L(t,{height:i.actualHeight,top:i.actualTop}))}}class b{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,i){this._afterLineNumber=e,this.heightInPx=i,this.domNode=document.createElement("div"),this._actualTop=(0,d.uh)(this,void 0),this._actualHeight=(0,d.uh)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}}class C{constructor(e,i){this._editor=e,this._domElement=i,this._overlayWidgetId="managedOverlayWidget-"+C._counter++,this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function L(e,i){return(0,d.EH)((t=>{for(let[n,o]of Object.entries(i))o&&"object"==typeof o&&"read"in o&&(o=o.read(t)),"number"==typeof o&&(o=`${o}px`),n=n.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),e.style[n]=o}))}function w(e,i){return function(e,i){if((0,s.H)()){(0,d.aq)("reload",(i=>(0,s.E)((({oldExports:t})=>{if([...Object.values(t)].some((i=>e.includes(i))))return e=>(i(void 0),!0)})))).read(i)}}([e],i),e}function S(e,i,t,n){const o=new r.SL,s=[];return o.add((0,d.gp)(((o,r)=>{const a=i.read(o),h=new Map,l=new Map;t&&t(!0),e.changeViewZones((e=>{for(const i of s)e.removeZone(i),null==n||n.delete(i);s.length=0;for(const i of a){const t=e.addZone(i);i.setZoneId&&i.setZoneId(t),s.push(t),null==n||n.add(t),h.set(i,t)}})),t&&t(!1),r.add((0,d.nJ)({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(e,i){const t=l.get(e.changedObservable);return void 0!==t&&i.zoneIds.push(t),!0}},((i,n)=>{for(const e of a)e.onChange&&(l.set(e.onChange,h.get(e)),e.onChange.read(i));t&&t(!0),e.changeViewZones((e=>{for(const i of n.zoneIds)e.layoutZone(i)})),t&&t(!1)})))}))),o.add({dispose(){t&&t(!0),e.changeViewZones((e=>{for(const i of s)e.removeZone(i)})),null==n||n.clear(),t&&t(!1)}}),o}C._counter=0;class R extends o.AU{dispose(){super.dispose(!0)}}function M(e,i){const t=(0,n.dF)(i,(i=>i.original.startLineNumber<=e.lineNumber));if(!t)return l.e.fromPositions(e);if(t.original.endLineNumberExclusive<=e.lineNumber){const i=e.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return l.e.fromPositions(new h.L(i,e.column))}if(!t.innerChanges)return l.e.fromPositions(new h.L(t.modified.startLineNumber,1));const o=(0,n.dF)(t.innerChanges,(i=>i.originalRange.getStartPosition().isBeforeOrEqual(e)));if(!o){const i=e.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return l.e.fromPositions(new h.L(i,e.column))}if(o.originalRange.containsPosition(e))return o.modifiedRange;{const i=(s=o.originalRange.getEndPosition(),r=e,s.lineNumber===r.lineNumber?new g.A(0,r.column-s.column):new g.A(r.lineNumber-s.lineNumber,r.column-1));return l.e.fromPositions(i.addToPosition(o.modifiedRange.getEndPosition()))}var s,r}function y(e,i){let t;return e.filter((e=>{const n=i(e,t);return t=e,n}))}}}]);