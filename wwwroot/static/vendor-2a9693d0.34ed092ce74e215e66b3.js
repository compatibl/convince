"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[9189],{12376:(e,i,t)=>{t.d(i,{Mg:()=>L,Op:()=>f,SK:()=>u,Ug:()=>w,jN:()=>b,mf:()=>m,oR:()=>_,qu:()=>E,rK:()=>C,zo:()=>v});var n=t(65321),o=t(32429),s=t(16830),r=t(11640),d=t(56652),a=t(29102),l=t(63580),h=t(84144),c=t(33108),g=t(93983);t(48354);class f extends h.Ke{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:(0,l.vv)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:o.l.map,toggled:g.Ao.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:g.Ao.has("isInDiffEditor"),menu:{when:g.Ao.has("isInDiffEditor"),id:h.eH.EditorTitle,order:22,group:"navigation"}})}run(e,...i){const t=e.get(c.Ui),n=!t.getValue("diffEditor.hideUnchangedRegions.enabled");t.updateValue("diffEditor.hideUnchangedRegions.enabled",n)}}class u extends h.Ke{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:(0,l.vv)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:g.Ao.has("isInDiffEditor")})}run(e,...i){const t=e.get(c.Ui),n=!t.getValue("diffEditor.experimental.showMoves");t.updateValue("diffEditor.experimental.showMoves",n)}}class m extends h.Ke{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:(0,l.vv)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:g.Ao.has("isInDiffEditor")})}run(e,...i){const t=e.get(c.Ui),n=!t.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");t.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",n)}}const p=(0,l.vv)("diffEditor","Diff Editor");class _ extends s.x1{constructor(){super({id:"diffEditor.switchSide",title:(0,l.vv)("switchSide","Switch Side"),icon:o.l.arrowSwap,precondition:g.Ao.has("isInDiffEditor"),f1:!0,category:p})}runEditorCommand(e,i,t){const n=S(e);if(n instanceof d.p){if(t&&t.dryRun)return{destinationSelection:n.mapToOtherSide().destinationSelection};n.switchSide()}}}class v extends s.x1{constructor(){super({id:"diffEditor.exitCompareMove",title:(0,l.vv)("exitCompareMove","Exit Compare Move"),icon:o.l.close,precondition:a.u.comparingMovedCode,f1:!1,category:p,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,i,...t){const n=S(e);n instanceof d.p&&n.exitCompareMove()}}class b extends s.x1{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:(0,l.vv)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:o.l.fold,precondition:g.Ao.has("isInDiffEditor"),f1:!0,category:p})}runEditorCommand(e,i,...t){const n=S(e);n instanceof d.p&&n.collapseAllUnchangedRegions()}}class L extends s.x1{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:(0,l.vv)("showAllUnchangedRegions","Show All Unchanged Regions"),icon:o.l.unfold,precondition:g.Ao.has("isInDiffEditor"),f1:!0,category:p})}runEditorCommand(e,i,...t){const n=S(e);n instanceof d.p&&n.showAllUnchangedRegions()}}class w extends h.Ke{constructor(){super({id:"diffEditor.revert",title:(0,l.vv)("revert","Revert"),f1:!1,category:p})}run(e,i){var t;const n=function(e,i,t){const n=e.get(r.$);return n.listDiffEditors().find((e=>{var n,o;const s=e.getModifiedEditor(),r=e.getOriginalEditor();return s&&(null===(n=s.getModel())||void 0===n?void 0:n.uri.toString())===t.toString()&&r&&(null===(o=r.getModel())||void 0===o?void 0:o.uri.toString())===i.toString()}))||null}(e,i.originalUri,i.modifiedUri);n instanceof d.p&&n.revertRangeMappings(null!==(t=i.mapping.innerChanges)&&void 0!==t?t:[])}}const N=(0,l.vv)("accessibleDiffViewer","Accessible Diff Viewer");class C extends h.Ke{constructor(){super({id:C.id,title:(0,l.vv)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:N,precondition:g.Ao.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const i=S(e);null==i||i.accessibleDiffViewerNext()}}C.id="editor.action.accessibleDiffViewer.next";class E extends h.Ke{constructor(){super({id:E.id,title:(0,l.vv)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:N,precondition:g.Ao.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const i=S(e);null==i||i.accessibleDiffViewerPrev()}}function S(e){const i=e.get(r.$).listDiffEditors(),t=(0,n.vY)();if(t)for(const e of i){if(I(e.getContainerDomNode(),t))return e}return null}function I(e,i){let t=i;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}E.id="editor.action.accessibleDiffViewer.prev"},60266:(e,i,t)=>{t.d(i,{X:()=>F,y:()=>P});var n=t(65321),o=t(77514),s=t(90317),r=t(59538),d=t(74741),a=t(9488),l=t(32429),h=t(5976),c=t(21070),g=t(25670),f=t(52136),u=t(97488),m=t(64141),p=t(45463),_=t(19247),v=t(50187),b=t(24314),L=t(54648),w=t(72042),N=t(77378),C=t(91557),E=t(1118),S=t(63580),I=t(38832),x=t(72065),y=t(59554),R=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},M=function(e,i){return function(t,n){i(t,n,e)}};const D=(0,y.q5)("diff-review-insert",l.l.add,(0,S.NC)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),T=(0,y.q5)("diff-review-remove",l.l.remove,(0,S.NC)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),A=(0,y.q5)("diff-review-close",l.l.close,(0,S.NC)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let P=class extends h.JT{constructor(e,i,t,n,o,s,r,d,a){super(),this._parentNode=e,this._visible=i,this._setVisible=t,this._canClose=n,this._width=o,this._height=s,this._diffs=r,this._models=d,this._instantiationService=a,this._state=(0,c.Be)(this,((e,i)=>{const t=this._visible.read(e);if(this._parentNode.style.visibility=t?"visible":"hidden",!t)return null;const n=i.add(this._instantiationService.createInstance(O,this._diffs,this._models,this._setVisible,this._canClose));return{model:n,view:i.add(this._instantiationService.createInstance(q,this._parentNode,n,this._width,this._height,this._models))}})).recomputeInitiallyAndOnChange(this._store)}next(){(0,c.PS)((e=>{const i=this._visible.get();this._setVisible(!0,e),i&&this._state.get().model.nextGroup(e)}))}prev(){(0,c.PS)((e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)}))}close(){(0,c.PS)((e=>{this._setVisible(!1,e)}))}};P._ttPolicy=(0,o.Z)("diffReview",{createHTML:e=>e}),P=R([M(8,x.TG)],P);let O=class extends h.JT{constructor(e,i,t,n,o){super(),this._diffs=e,this._models=i,this._setVisible=t,this.canClose=n,this._accessibilitySignalService=o,this._groups=(0,c.uh)(this,[]),this._currentGroupIdx=(0,c.uh)(this,0),this._currentElementIdx=(0,c.uh)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map(((e,i)=>this._groups.read(i)[e])),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map(((e,i)=>{var t;return null===(t=this.currentGroup.read(i))||void 0===t?void 0:t.lines[e]})),this._register((0,c.EH)((e=>{const i=this._diffs.read(e);if(!i)return void this._groups.set([],void 0);const t=function(e,i,t){const n=[];for(const o of(0,a.mw)(e,((e,i)=>i.modified.startLineNumber-e.modified.endLineNumberExclusive<2*H))){const e=[];e.push(new k);const s=new p.z(Math.max(1,o[0].original.startLineNumber-H),Math.min(o[o.length-1].original.endLineNumberExclusive+H,i+1)),r=new p.z(Math.max(1,o[0].modified.startLineNumber-H),Math.min(o[o.length-1].modified.endLineNumberExclusive+H,t+1));(0,a.zy)(o,((i,t)=>{const n=new p.z(i?i.original.endLineNumberExclusive:s.startLineNumber,t?t.original.startLineNumber:s.endLineNumberExclusive),o=new p.z(i?i.modified.endLineNumberExclusive:r.startLineNumber,t?t.modified.startLineNumber:r.endLineNumberExclusive);n.forEach((i=>{e.push(new z(i,o.startLineNumber+(i-n.startLineNumber)))})),t&&(t.original.forEach((i=>{e.push(new U(t,i))})),t.modified.forEach((i=>{e.push(new B(t,i))})))}));const d=o[0].modified.join(o[o.length-1].modified),l=o[0].original.join(o[o.length-1].original);n.push(new W(new L.f0(d,l),e))}return n}(i,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,c.PS)((e=>{const i=this._models.getModifiedPosition();if(i){const n=t.findIndex((e=>(null==i?void 0:i.lineNumber)<e.range.modified.endLineNumberExclusive));-1!==n&&this._currentGroupIdx.set(n,e)}this._groups.set(t,e)}))}))),this._register((0,c.EH)((e=>{const i=this.currentElement.read(e);(null==i?void 0:i.type)===V.Deleted?this._accessibilitySignalService.playSignal(I.iP.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null==i?void 0:i.type)===V.Added&&this._accessibilitySignalService.playSignal(I.iP.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),this._register((0,c.EH)((e=>{var i;const t=this.currentElement.read(e);if(t&&t.type!==V.Header){const e=null!==(i=t.modifiedLineNumber)&&void 0!==i?i:t.diff.modified.startLineNumber;this._models.modifiedSetSelection(b.e.fromPositions(new v.L(e,1)))}})))}_goToGroupDelta(e,i){const t=this.groups.get();!t||t.length<=1||(0,c.c8)(i,(i=>{this._currentGroupIdx.set(_.q.ofLength(t.length).clipCyclic(this._currentGroupIdx.get()+e),i),this._currentElementIdx.set(0,i)}))}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const i=this.currentGroup.get();!i||i.lines.length<=1||(0,c.PS)((t=>{this._currentElementIdx.set(_.q.ofLength(i.lines.length).clip(this._currentElementIdx.get()+e),t)}))}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const i=this.currentGroup.get();if(!i)return;const t=i.lines.indexOf(e);-1!==t&&(0,c.PS)((e=>{this._currentElementIdx.set(t,e)}))}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===V.Deleted?this._models.originalReveal(b.e.fromPositions(new v.L(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==V.Header?b.e.fromPositions(new v.L(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};O=R([M(4,I.IV)],O);const H=3;var V;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(V||(V={}));class W{constructor(e,i){this.range=e,this.lines=i}}class k{constructor(){this.type=V.Header}}class U{constructor(e,i){this.diff=e,this.originalLineNumber=i,this.type=V.Deleted,this.modifiedLineNumber=void 0}}class B{constructor(e,i){this.diff=e,this.modifiedLineNumber=i,this.type=V.Added,this.originalLineNumber=void 0}}class z{constructor(e,i){this.originalLineNumber=e,this.modifiedLineNumber=i,this.type=V.Unchanged}}let q=class extends h.JT{constructor(e,i,t,o,a,l){super(),this._element=e,this._model=i,this._width=t,this._height=o,this._models=a,this._languageService=l,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const f=document.createElement("div");f.className="diff-review-actions",this._actionBar=this._register(new s.o(f)),this._register((0,c.EH)((e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new d.aU("diffreview.close",(0,S.NC)("label.close","Close"),"close-diff-review "+g.k.asClassName(A),!0,(async()=>i.close())),{label:!1,icon:!0})}))),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new r.s$(this._content,{})),(0,n.mc)(this.domNode,this._scrollbar.getDomNode(),f),this._register((0,c.EH)((e=>{this._height.read(e),this._width.read(e),this._scrollbar.scanDomNode()}))),this._register((0,h.OF)((()=>{(0,n.mc)(this.domNode)}))),this._register((0,u.bg)(this.domNode,{width:this._width,height:this._height})),this._register((0,u.bg)(this._content,{width:this._width,height:this._height})),this._register((0,c.gp)(((e,i)=>{this._model.currentGroup.read(e),this._render(i)}))),this._register((0,n.mu)(this.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())})))}_render(e){const i=this._models.getOriginalOptions(),t=this._models.getModifiedOptions(),o=document.createElement("div");o.className="diff-review-table",o.setAttribute("role","list"),o.setAttribute("aria-label",(0,S.NC)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,f.N)(o,t.get(50)),(0,n.mc)(this._content,o);const s=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!s||!r)return;const d=s.getOptions(),a=r.getOptions(),l=t.get(67),h=this._model.currentGroup.get();for(const g of(null==h?void 0:h.lines)||[]){if(!h)break;let f;if(g.type===V.Header){const e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");const i=h.range,t=this._model.currentGroupIndex.get(),n=this._model.groups.get().length,o=e=>0===e?(0,S.NC)("no_lines_changed","no lines changed"):1===e?(0,S.NC)("one_line_changed","1 line changed"):(0,S.NC)("more_lines_changed","{0} lines changed",e),s=o(i.original.length),r=o(i.modified.length);e.setAttribute("aria-label",(0,S.NC)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",t+1,n,i.original.startLineNumber,s,i.modified.startLineNumber,r));const d=document.createElement("div");d.className="diff-review-cell diff-review-summary",d.appendChild(document.createTextNode(`${t+1}/${n}: @@ -${i.original.startLineNumber},${i.original.length} +${i.modified.startLineNumber},${i.modified.length} @@`)),e.appendChild(d),f=e}else f=this._createRow(g,l,this._width.get(),i,s,d,t,r,a);o.appendChild(f);const u=(0,c.nK)((e=>this._model.currentElement.read(e)===g));e.add((0,c.EH)((e=>{const i=u.read(e);f.tabIndex=i?0:-1,i&&f.focus()}))),e.add((0,n.nm)(f,"focus",(()=>{this._model.goToLine(g)})))}this._scrollbar.scanDomNode()}_createRow(e,i,t,n,o,s,r,d,a){const l=n.get(145),h=l.glyphMarginWidth+l.lineNumbersWidth,c=r.get(145),f=10+c.glyphMarginWidth+c.lineNumbersWidth;let u="diff-review-row",m="";let p=null;switch(e.type){case V.Added:u="diff-review-row line-insert",m=" char-insert",p=D;break;case V.Deleted:u="diff-review-row line-delete",m=" char-delete",p=T}const _=document.createElement("div");_.style.minWidth=t+"px",_.className=u,_.setAttribute("role","listitem"),_.ariaLevel="";const v=document.createElement("div");v.className="diff-review-cell",v.style.height=`${i}px`,_.appendChild(v);const b=document.createElement("span");b.style.width=h+"px",b.style.minWidth=h+"px",b.className="diff-review-line-number"+m,void 0!==e.originalLineNumber?b.appendChild(document.createTextNode(String(e.originalLineNumber))):b.innerText=" ",v.appendChild(b);const L=document.createElement("span");L.style.width=f+"px",L.style.minWidth=f+"px",L.style.paddingRight="10px",L.className="diff-review-line-number"+m,void 0!==e.modifiedLineNumber?L.appendChild(document.createTextNode(String(e.modifiedLineNumber))):L.innerText=" ",v.appendChild(L);const w=document.createElement("span");if(w.className="diff-review-spacer",p){const e=document.createElement("span");e.className=g.k.asClassName(p),e.innerText="  ",w.appendChild(e)}else w.innerText="  ";let N;if(v.appendChild(w),void 0!==e.modifiedLineNumber){let i=this._getLineHtml(d,r,a.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);P._ttPolicy&&(i=P._ttPolicy.createHTML(i)),v.insertAdjacentHTML("beforeend",i),N=d.getLineContent(e.modifiedLineNumber)}else{let i=this._getLineHtml(o,n,s.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);P._ttPolicy&&(i=P._ttPolicy.createHTML(i)),v.insertAdjacentHTML("beforeend",i),N=o.getLineContent(e.originalLineNumber)}0===N.length&&(N=(0,S.NC)("blankLine","blank"));let C="";switch(e.type){case V.Unchanged:C=e.originalLineNumber===e.modifiedLineNumber?(0,S.NC)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",N,e.originalLineNumber):(0,S.NC)("equalLine","{0} original line {1} modified line {2}",N,e.originalLineNumber,e.modifiedLineNumber);break;case V.Added:C=(0,S.NC)("insertLine","+ {0} modified line {1}",N,e.modifiedLineNumber);break;case V.Deleted:C=(0,S.NC)("deleteLine","- {0} original line {1}",N,e.originalLineNumber)}return _.setAttribute("aria-label",C),_}_getLineHtml(e,i,t,n,o){const s=e.getLineContent(n),r=i.get(50),d=N.A.createEmpty(s,o),a=E.wA.isBasicASCII(s,e.mightContainNonBasicASCII()),l=E.wA.containsRTL(s,a,e.mightContainRTL());return(0,C.tF)(new C.IJ(r.isMonospace&&!i.get(33),r.canUseHalfwidthRightwardsArrow,s,!1,a,l,0,d,[],t,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,i.get(117),i.get(99),i.get(94),i.get(51)!==m.n0.OFF,null)).html}};q=R([M(5,w.O)],q);class F{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){var e;return null!==(e=this.editors.modified.getPosition())&&void 0!==e?e:void 0}}},26817:(e,i,t)=>{t.d(i,{r:()=>a});var n=t(5976),o=t(21070),s=t(72362),r=t(48354),d=t(97488);class a extends n.JT{constructor(e,i,t,n){super(),this._editors=e,this._diffModel=i,this._options=t,this._decorations=(0,o.nK)(this,(e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.diff.read(e);if(!t)return null;const n=this._diffModel.read(e).movedTextToCompare.read(e),o=this._options.renderIndicators.read(e),d=this._options.showEmptyDecorations.read(e),a=[],l=[];if(!n)for(const e of t.mappings)if(e.lineRangeMapping.original.isEmpty||a.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:o?r.iq:r.i_}),e.lineRangeMapping.modified.isEmpty||l.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:o?r.vv:r.rd}),e.lineRangeMapping.modified.isEmpty||e.lineRangeMapping.original.isEmpty)e.lineRangeMapping.original.isEmpty||a.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:r.W3}),e.lineRangeMapping.modified.isEmpty||l.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:r.Jv});else for(const i of e.lineRangeMapping.innerChanges||[])e.lineRangeMapping.original.contains(i.originalRange.startLineNumber)&&a.push({range:i.originalRange,options:i.originalRange.isEmpty()&&d?r.$F:r.rq}),e.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)&&l.push({range:i.modifiedRange,options:i.modifiedRange.isEmpty()&&d?r.n_:r.LE});if(n)for(const e of n.changes){const i=e.original.toInclusiveRange();i&&a.push({range:i,options:o?r.iq:r.i_});const t=e.modified.toInclusiveRange();t&&l.push({range:t,options:o?r.vv:r.rd});for(const i of e.innerChanges||[])a.push({range:i.originalRange,options:r.rq}),l.push({range:i.modifiedRange,options:r.LE})}const h=this._diffModel.read(e).activeMovedText.read(e);for(const e of t.movedTexts)a.push({range:e.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(e===h?" currentMove":""),blockPadding:[s.Q.movedCodeBlockPadding,0,s.Q.movedCodeBlockPadding,s.Q.movedCodeBlockPadding]}}),l.push({range:e.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(e===h?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:a,modifiedDecorations:l}})),this._register((0,d.RP)(this._editors.original,this._decorations.map((e=>(null==e?void 0:e.originalDecorations)||[])))),this._register((0,d.RP)(this._editors.modified,this._decorations.map((e=>(null==e?void 0:e.modifiedDecorations)||[]))))}}},76681:(e,i,t)=>{t.d(i,{c:()=>m});var n=t(4669),o=t(5976),s=t(21070),r=t(56639),d=t(54880),a=t(64141),l=t(50187),h=t(63580),c=t(72065),g=t(91847),f=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},u=function(e,i){return function(t,n){i(t,n,e)}};let m=class extends o.JT{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,i,t,o,d,a,h){super(),this.originalEditorElement=e,this.modifiedEditorElement=i,this._options=t,this._argCodeEditorWidgetOptions=o,this._createInnerEditor=d,this._instantiationService=a,this._keybindingService=h,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new n.Q5),this.modifiedScrollTop=(0,s.rD)(this.modified.onDidScrollChange,(()=>this.modified.getScrollTop())),this.modifiedScrollHeight=(0,s.rD)(this.modified.onDidScrollChange,(()=>this.modified.getScrollHeight())),this.modifiedModel=(0,r.b)(this.modified).model,this.modifiedSelections=(0,s.rD)(this.modified.onDidChangeCursorSelection,(()=>{var e;return null!==(e=this.modified.getSelections())&&void 0!==e?e:[]})),this.modifiedCursor=(0,s.bk)({owner:this,equalsFn:l.L.equals},(e=>{var i,t;return null!==(t=null===(i=this.modifiedSelections.read(e)[0])||void 0===i?void 0:i.getPosition())&&void 0!==t?t:new l.L(1,1)})),this.originalCursor=(0,s.rD)(this.original.onDidChangeCursorPosition,(()=>{var e;return null!==(e=this.original.getPosition())&&void 0!==e?e:new l.L(1,1)})),this._argCodeEditorWidgetOptions=null,this._register((0,s.nJ)({createEmptyChangeSummary:()=>({}),handleChange:(e,i)=>(e.didChange(t.editorOptions)&&Object.assign(i,e.change.changedOptions),!0)},((e,i)=>{t.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,i)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,i))})))}_createLeftHandSideEditor(e,i){const t=this._adjustOptionsForLeftHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,t,i);return n.setContextValue("isInDiffLeftEditor",!0),n}_createRightHandSideEditor(e,i){const t=this._adjustOptionsForRightHandSide(void 0,e),n=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,t,i);return n.setContextValue("isInDiffRightEditor",!0),n}_constructInnerEditor(e,i,t,n){const o=this._createInnerEditor(e,i,t,n);return this._register(o.onDidContentSizeChange((e=>{const i=this.original.getContentWidth()+this.modified.getContentWidth()+d.U.ENTIRE_DIFF_OVERVIEW_WIDTH,t=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:t,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),o}_adjustOptionsForLeftHandSide(e,i){const t=this._adjustOptionsForSubEditor(i);return this._options.renderSideBySide.get()?(t.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},t.wordWrapOverride1=this._options.diffWordWrap.get()):(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1},t.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),t.glyphMargin=this._options.renderSideBySide.get(),i.originalAriaLabel&&(t.ariaLabel=i.originalAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.readOnly=!this._options.originalEditable.get(),t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",t}_adjustOptionsForRightHandSide(e,i){const t=this._adjustOptionsForSubEditor(i);return i.modifiedAriaLabel&&(t.ariaLabel=i.modifiedAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.wordWrapOverride1=this._options.diffWordWrap.get(),t.revealHorizontalRightPadding=a.BH.revealHorizontalRightPadding.defaultValue+d.U.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",t}_adjustOptionsForSubEditor(e){const i={...e,dimension:{height:0,width:0}};return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar={...i.scrollbar||{}},i.folding=!1,i.codeLens=this._options.diffCodeLens.get(),i.fixedOverflowWidgets=!0,i.minimap={...i.minimap||{}},i.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?i.stickyScroll={enabled:!1}:i.stickyScroll=this._options.editorOptions.get().stickyScroll,i}_updateAriaLabel(e){var i;e||(e="");const t=(0,h.NC)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===i?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};m=f([u(5,c.TG),u(6,g.d)],m)},93957:(e,i,t)=>{t.d(i,{E:()=>d,v:()=>a});var n=t(73098),o=t(5976),s=t(21070),r=t(54282);class d{resetSash(){this._sashRatio.set(void 0,void 0)}constructor(e,i){this._options=e,this.dimensions=i,this.sashLeft=(0,r.B5)(this,(e=>{var i;const t=null!==(i=this._sashRatio.read(e))&&void 0!==i?i:this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(t,e)}),((e,i)=>{const t=this.dimensions.width.get();this._sashRatio.set(e/t,i)})),this._sashRatio=(0,s.uh)(this,void 0)}_computeSashLeft(e,i){const t=this.dimensions.width.read(i),n=Math.floor(this._options.splitViewDefaultRatio.read(i)*t),o=this._options.enableSplitViewResizing.read(i)?Math.floor(e*t):n,s=100;return t<=200?n:o<s?s:o>t-s?t-s:o}}class a extends o.JT{constructor(e,i,t,o,r,d){super(),this._domNode=e,this._dimensions=i,this._enabled=t,this._boundarySashes=o,this.sashLeft=r,this._resetSash=d,this._sash=this._register(new n.g(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart((()=>{this._startSashPosition=this.sashLeft.get()}))),this._register(this._sash.onDidChange((e=>{this.sashLeft.set(this._startSashPosition+(e.currentX-e.startX),void 0)}))),this._register(this._sash.onDidEnd((()=>this._sash.layout()))),this._register(this._sash.onDidReset((()=>this._resetSash()))),this._register((0,s.EH)((e=>{const i=this._boundarySashes.read(e);i&&(this._sash.orthogonalEndSash=i.bottom)}))),this._register((0,s.EH)((e=>{const i=this._enabled.read(e);this._sash.state=i?3:0,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()})))}}},93666:(e,i,t)=>{t.d(i,{m:()=>H});var n=t(65321),o=t(9488),s=t(15393),r=t(32429),d=t(5976),a=t(21070),l=t(25670),h=t(98401),c=t(52136),g=t(48354),f=t(90471),u=t(74741),m=t(1432),p=t(63580);class _ extends d.JT{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,i,t,o,s,d,a,h,c){super(),this._getViewZoneId=e,this._marginDomNode=i,this._modifiedEditor=t,this._diff=o,this._editor=s,this._viewLineCounts=d,this._originalTextModel=a,this._contextMenuService=h,this._clipboardService=c,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=l.k.asClassName(r.l.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const g=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${g}px`,this._diffActions.style.lineHeight=`${g}px`,this._marginDomNode.appendChild(this._diffActions);let f=0;const _=t.getOption(127)&&!m.gn,v=(e,i)=>{var n;this._contextMenuService.showContextMenu({domForShadowRoot:_&&null!==(n=t.getDomNode())&&void 0!==n?n:void 0,getAnchor:()=>({x:e,y:i}),getActions:()=>{const e=[],i=o.modified.isEmpty;e.push(new u.aU("diff.clipboard.copyDeletedContent",i?o.original.length>1?(0,p.NC)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,p.NC)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):o.original.length>1?(0,p.NC)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,p.NC)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(async()=>{const e=this._originalTextModel.getValueInRange(o.original.toExclusiveRange());await this._clipboardService.writeText(e)}))),o.original.length>1&&e.push(new u.aU("diff.clipboard.copyDeletedLineContent",i?(0,p.NC)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",o.original.startLineNumber+f):(0,p.NC)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",o.original.startLineNumber+f),void 0,!0,(async()=>{let e=this._originalTextModel.getLineContent(o.original.startLineNumber+f);if(""===e){e=0===this._originalTextModel.getEndOfLineSequence()?"\n":"\r\n"}await this._clipboardService.writeText(e)})));return t.getOption(91)||e.push(new u.aU("diff.inline.revertChange",(0,p.NC)("diff.inline.revertChange.label","Revert this change"),void 0,!0,(async()=>{this._editor.revert(this._diff)}))),e},autoSelectFirstItem:!0})};this._register((0,n.mu)(this._diffActions,"mousedown",(e=>{if(!e.leftButton)return;const{top:i,height:t}=(0,n.i)(this._diffActions),o=Math.floor(g/3);e.preventDefault(),v(e.posx,i+t+o)}))),this._register(t.onMouseMove((e=>{8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==this._getViewZoneId()?this.visibility=!1:(f=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,g),this.visibility=!0)}))),this._register(t.onMouseDown((e=>{if(e.event.leftButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._getViewZoneId()&&(e.event.preventDefault(),f=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,g),v(e.event.posx,e.event.posy+g))}})))}_updateLightBulbPosition(e,i,t){const{top:o}=(0,n.i)(e),s=i-o,r=Math.floor(s/t),d=r*t;if(this._diffActions.style.top=`${d}px`,this._viewLineCounts){let e=0;for(let i=0;i<this._viewLineCounts.length;i++)if(e+=this._viewLineCounts[i],r<e)return i}return r}}var v=t(77514),b=t(64141),L=t(50072),w=t(92550),N=t(91557),C=t(1118);const E=(0,v.Z)("diffEditorWidget",{createHTML:e=>e});function S(e,i,t,n){(0,c.N)(n,i.fontInfo);const o=t.length>0,s=new L.HT(1e4);let r=0,d=0;const a=[];for(let n=0;n<e.lineTokens.length;n++){const l=n+1,h=e.lineTokens[n],c=e.lineBreakData[n],g=w.Kp.filter(t,l,1,Number.MAX_SAFE_INTEGER);if(c){let t=0;for(const n of c.breakOffsets){const a=h.sliceAndInflate(t,n,0);r=Math.max(r,y(d,a,w.Kp.extractWrapped(g,t,n),o,e.mightContainNonBasicASCII,e.mightContainRTL,i,s)),d++,t=n}a.push(c.breakOffsets.length)}else a.push(1),r=Math.max(r,y(d,h,g,o,e.mightContainNonBasicASCII,e.mightContainRTL,i,s)),d++}r+=i.scrollBeyondLastColumn;const l=s.build(),h=E?E.createHTML(l):l;n.innerHTML=h;return{heightInLines:d,minWidthInPx:r*i.typicalHalfwidthCharacterWidth,viewLineCounts:a}}class I{constructor(e,i,t,n){this.lineTokens=e,this.lineBreakData=i,this.mightContainNonBasicASCII=t,this.mightContainRTL=n}}class x{static fromEditor(e){var i;const t=e.getOptions(),n=t.get(50),o=t.get(145);return new x((null===(i=e.getModel())||void 0===i?void 0:i.getOptions().tabSize)||0,n,t.get(33),n.typicalHalfwidthCharacterWidth,t.get(104),t.get(67),o.decorationsWidth,t.get(117),t.get(99),t.get(94),t.get(51))}constructor(e,i,t,n,o,s,r,d,a,l,h){this.tabSize=e,this.fontInfo=i,this.disableMonospaceOptimizations=t,this.typicalHalfwidthCharacterWidth=n,this.scrollBeyondLastColumn=o,this.lineHeight=s,this.lineDecorationsWidth=r,this.stopRenderingLineAfter=d,this.renderWhitespace=a,this.renderControlCharacters=l,this.fontLigatures=h}}function y(e,i,t,n,o,s,r,d){d.appendString('<div class="view-line'),n||d.appendString(" char-delete"),d.appendString('" style="top:'),d.appendString(String(e*r.lineHeight)),d.appendString('px;width:1000000px;">');const a=i.getLineContent(),l=C.wA.isBasicASCII(a,o),h=C.wA.containsRTL(a,l,s),c=(0,N.d1)(new N.IJ(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,a,!1,l,h,0,i,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==b.n0.OFF,null),d);return d.appendString("</div>"),c.characterMapping.getHorizontalOffset(c.characterMapping.length)}var R=t(97488),M=t(45463),D=t(50187),T=t(84972),A=t(5606),P=function(e,i,t,n){var o,s=arguments.length,r=s<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(s<3?o(r):s>3?o(i,t,r):o(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},O=function(e,i){return function(t,n){i(t,n,e)}};let H=class extends d.JT{constructor(e,i,t,o,u,m,p,v,b,L){super(),this._targetWindow=e,this._editors=i,this._diffModel=t,this._options=o,this._diffEditorWidget=u,this._canIgnoreViewZoneUpdateEvent=m,this._origViewZonesToIgnore=p,this._modViewZonesToIgnore=v,this._clipboardService=b,this._contextMenuService=L,this._originalTopPadding=(0,a.uh)(this,0),this._originalScrollOffset=(0,a.uh)(this,0),this._originalScrollOffsetAnimated=(0,R.Vm)(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,a.uh)(this,0),this._modifiedScrollOffset=(0,a.uh)(this,0),this._modifiedScrollOffsetAnimated=(0,R.Vm)(this._targetWindow,this._modifiedScrollOffset,this._store);const w=(0,a.uh)("invalidateAlignmentsState",0),N=this._register(new s.pY((()=>{w.set(w.get()+1,void 0)}),0));this._register(this._editors.original.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||N.schedule()}))),this._register(this._editors.modified.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||N.schedule()}))),this._register(this._editors.original.onDidChangeConfiguration((e=>{(e.hasChanged(146)||e.hasChanged(67))&&N.schedule()}))),this._register(this._editors.modified.onDidChangeConfiguration((e=>{(e.hasChanged(146)||e.hasChanged(67))&&N.schedule()})));const E=this._diffModel.map((e=>e?(0,a.rD)(e.model.original.onDidChangeTokens,(()=>2===e.model.original.tokenization.backgroundTokenizationState)):void 0)).map(((e,i)=>null==e?void 0:e.read(i))),y=(0,a.nK)((e=>{const i=this._diffModel.read(e),t=null==i?void 0:i.diff.read(e);if(!i||!t)return null;w.read(e);const n=this._options.renderSideBySide.read(e);return V(this._editors.original,this._editors.modified,t.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,n)})),M=(0,a.nK)((e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);if(!t)return null;w.read(e);const n=t.changes.map((e=>new f.hM(e)));return V(this._editors.original,this._editors.modified,n,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)}));function D(){const e=document.createElement("div");return e.className="diagonal-fill",e}const T=this._register(new d.SL);this.viewZones=(0,a.Be)(this,((e,i)=>{var t,o,s,d,a,f,m,p;T.clear();const v=y.read(e)||[],b=[],L=[],w=this._modifiedTopPadding.read(e);w>0&&L.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:w,showInHiddenAreas:!0,suppressMouseDown:!0});const N=this._originalTopPadding.read(e);N>0&&b.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:N,showInHiddenAreas:!0,suppressMouseDown:!0});const R=this._options.renderSideBySide.read(e),A=R||null===(t=this._editors.modified._getViewModel())||void 0===t?void 0:t.createLineBreaksComputer();if(A){const B=this._editors.original.getModel();for(const z of v)if(z.diff)for(let q=z.originalRange.startLineNumber;q<z.originalRange.endLineNumberExclusive;q++){if(q>B.getLineCount())return{orig:b,mod:L};null==A||A.addRequest(B.getLineContent(q),null,null)}}const P=null!==(o=null==A?void 0:A.finalize())&&void 0!==o?o:[];let O=0;const H=this._editors.modified.getOption(67),V=null===(s=this._diffModel.read(e))||void 0===s?void 0:s.movedTextToCompare.read(e),W=null!==(a=null===(d=this._editors.original.getModel())||void 0===d?void 0:d.mightContainNonBasicASCII())&&void 0!==a&&a,k=null!==(m=null===(f=this._editors.original.getModel())||void 0===f?void 0:f.mightContainRTL())&&void 0!==m&&m,U=x.fromEditor(this._editors.modified);for(const F of v)if(F.diff&&!R){if(!F.originalRange.isEmpty){E.read(e);const j=document.createElement("div");j.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const Z=this._editors.original.getModel();if(F.originalRange.endLineNumberExclusive-1>Z.getLineCount())return{orig:b,mod:L};const $=new I(F.originalRange.mapToLineArray((e=>Z.tokenization.getLineTokens(e))),F.originalRange.mapToLineArray((e=>P[O++])),W,k),K=[];for(const Y of F.diff.innerChanges||[])K.push(new C.$t(Y.originalRange.delta(-(F.diff.original.startLineNumber-1)),g.rq.className,0));const J=S($,U,K,j),X=document.createElement("div");if(X.className="inline-deleted-margin-view-zone",(0,c.N)(X,U.fontInfo),this._options.renderIndicators.read(e))for(let ee=0;ee<J.heightInLines;ee++){const ie=document.createElement("div");ie.className=`delete-sign ${l.k.asClassName(g.fO)}`,ie.setAttribute("style",`position:absolute;top:${ee*H}px;width:${U.lineDecorationsWidth}px;height:${H}px;right:0;`),X.appendChild(ie)}let Q;T.add(new _((()=>(0,h.cW)(Q)),X,this._editors.modified,F.diff,this._diffEditorWidget,J.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let te=0;te<J.viewLineCounts.length;te++){const ne=J.viewLineCounts[te];ne>1&&b.push({afterLineNumber:F.originalRange.startLineNumber+te,domNode:D(),heightInPx:(ne-1)*H,showInHiddenAreas:!0,suppressMouseDown:!0})}L.push({afterLineNumber:F.modifiedRange.startLineNumber-1,domNode:j,heightInPx:J.heightInLines*H,minWidthInPx:J.minWidthInPx,marginDomNode:X,setZoneId(e){Q=e},showInHiddenAreas:!0,suppressMouseDown:!0})}const G=document.createElement("div");G.className="gutter-delete",b.push({afterLineNumber:F.originalRange.endLineNumberExclusive-1,domNode:D(),heightInPx:F.modifiedHeightInPx,marginDomNode:G,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const oe=F.modifiedHeightInPx-F.originalHeightInPx;if(oe>0){if(null==V?void 0:V.lineRangeMapping.original.delta(-1).deltaLength(2).contains(F.originalRange.endLineNumberExclusive-1))continue;b.push({afterLineNumber:F.originalRange.endLineNumberExclusive-1,domNode:D(),heightInPx:oe,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(null==V?void 0:V.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(F.modifiedRange.endLineNumberExclusive-1))continue;function se(){const e=document.createElement("div");return e.className="arrow-revert-change "+l.k.asClassName(r.l.arrowRight),i.add((0,n.nm)(e,"mousedown",(e=>e.stopPropagation()))),i.add((0,n.nm)(e,"click",(e=>{e.stopPropagation(),u.revert(F.diff)}))),(0,n.$)("div",{},e)}let re;F.diff&&F.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(e)&&(re=se()),L.push({afterLineNumber:F.modifiedRange.endLineNumberExclusive-1,domNode:D(),heightInPx:-oe,marginDomNode:re,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const de of null!==(p=M.read(e))&&void 0!==p?p:[]){if(!(null==V?void 0:V.lineRangeMapping.original.intersect(de.originalRange))||!(null==V?void 0:V.lineRangeMapping.modified.intersect(de.modifiedRange)))continue;const ae=de.modifiedHeightInPx-de.originalHeightInPx;ae>0?b.push({afterLineNumber:de.originalRange.endLineNumberExclusive-1,domNode:D(),heightInPx:ae,showInHiddenAreas:!0,suppressMouseDown:!0}):L.push({afterLineNumber:de.modifiedRange.endLineNumberExclusive-1,domNode:D(),heightInPx:-ae,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:b,mod:L}}));let A=!1;this._register(this._editors.original.onDidScrollChange((e=>{e.scrollLeftChanged&&!A&&(A=!0,this._editors.modified.setScrollLeft(e.scrollLeft),A=!1)}))),this._register(this._editors.modified.onDidScrollChange((e=>{e.scrollLeftChanged&&!A&&(A=!0,this._editors.original.setScrollLeft(e.scrollLeft),A=!1)}))),this._originalScrollTop=(0,a.rD)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,a.rD)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._register((0,a.EH)((e=>{const i=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));i!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(i,1)}))),this._register((0,a.EH)((e=>{const i=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));i!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(i,1)}))),this._register((0,a.EH)((e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);let n=0;if(t){const e=this._editors.original.getTopForLineNumber(t.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();n=this._editors.modified.getTopForLineNumber(t.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-e}n>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(n,void 0)):n<0?(this._modifiedTopPadding.set(-n,void 0),this._originalTopPadding.set(0,void 0)):setTimeout((()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)}),400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-n,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+n,void 0,!0)})))}};function V(e,i,t,n,s,r){const d=new o.H9(W(e,n)),a=new o.H9(W(i,s)),l=e.getOption(67),h=i.getOption(67),c=[];let g=0,f=0;function u(e,i){for(;;){let t=d.peek(),n=a.peek();if(t&&t.lineNumber>=e&&(t=void 0),n&&n.lineNumber>=i&&(n=void 0),!t&&!n)break;const o=t?t.lineNumber-g:Number.MAX_VALUE,s=n?n.lineNumber-f:Number.MAX_VALUE;o<s?(d.dequeue(),n={lineNumber:t.lineNumber-g+f,heightInPx:0}):o>s?(a.dequeue(),t={lineNumber:n.lineNumber-f+g,heightInPx:0}):(d.dequeue(),a.dequeue()),c.push({originalRange:M.z.ofLength(t.lineNumber,1),modifiedRange:M.z.ofLength(n.lineNumber,1),originalHeightInPx:l+t.heightInPx,modifiedHeightInPx:h+n.heightInPx,diff:void 0})}}for(const m of t){const p=m.lineRangeMapping;u(p.original.startLineNumber,p.modified.startLineNumber);let _=!0,v=p.modified.startLineNumber,b=p.original.startLineNumber;function L(e,i){var t,n,o,s;if(e<b||i<v)return;if(_)_=!1;else if(e===b||i===v)return;const r=new M.z(b,e),g=new M.z(v,i);if(r.isEmpty&&g.isEmpty)return;const f=null!==(n=null===(t=d.takeWhile((i=>i.lineNumber<e)))||void 0===t?void 0:t.reduce(((e,i)=>e+i.heightInPx),0))&&void 0!==n?n:0,u=null!==(s=null===(o=a.takeWhile((e=>e.lineNumber<i)))||void 0===o?void 0:o.reduce(((e,i)=>e+i.heightInPx),0))&&void 0!==s?s:0;c.push({originalRange:r,modifiedRange:g,originalHeightInPx:r.length*l+f,modifiedHeightInPx:g.length*h+u,diff:m.lineRangeMapping}),b=e,v=i}if(r)for(const w of p.innerChanges||[]){w.originalRange.startColumn>1&&w.modifiedRange.startColumn>1&&L(w.originalRange.startLineNumber,w.modifiedRange.startLineNumber);const N=e.getModel(),C=w.originalRange.endLineNumber<=N.getLineCount()?N.getLineMaxColumn(w.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;w.originalRange.endColumn<C&&L(w.originalRange.endLineNumber,w.modifiedRange.endLineNumber)}L(p.original.endLineNumberExclusive,p.modified.endLineNumberExclusive),g=p.original.endLineNumberExclusive,f=p.modified.endLineNumberExclusive}return u(Number.MAX_VALUE,Number.MAX_VALUE),c}function W(e,i){const t=[],n=[],o=-1!==e.getOption(146).wrappingColumn,s=e._getViewModel().coordinatesConverter,r=e.getOption(67);if(o)for(let i=1;i<=e.getModel().getLineCount();i++){const e=s.getModelLineViewLineCount(i);e>1&&n.push({lineNumber:i,heightInPx:r*(e-1)})}for(const n of e.getWhitespaces()){if(i.has(n.id))continue;const e=0===n.afterLineNumber?0:s.convertViewPositionToModelPosition(new D.L(n.afterLineNumber,1)).lineNumber;t.push({lineNumber:e,heightInPx:n.height})}return(0,R.Ap)(t,n,(e=>e.lineNumber),((e,i)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+i.heightInPx})))}H=P([O(8,T.p),O(9,A.i)],H)}}]);