"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[6299],{63731:(e,t,i)=>{i.d(t,{c:()=>n});var s=i(38626),o=i(86130),r=i(65321);class n extends o.E{constructor(e,t){super(e),this._viewDomNode=t;const i=this._context.configuration.options.get(145);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=(0,s.X)(document.createElement("div")),o.K.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=(0,s.X)(document.createElement("div")),o.K.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){const t=this._context.configuration.options.get(145);return this._verticalScrollbarWidth=t.verticalScrollbarWidth,this._minimapWidth=t.minimap.minimapWidth,this._horizontalScrollbarHeight=t.horizontalScrollbarHeight,this._editorHeight=t.height,this._editorWidth=t.width,!0}addWidget(e){const t=(0,s.X)(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){const i=this._widgets[e.getId()],s=t?t.preference:null,o=null==t?void 0:t.stackOridinal;return i.preference===s&&i.stack===o?(this._updateMaxMinWidth(),!1):(i.preference=s,i.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){const t=e.getId();if(this._widgets.hasOwnProperty(t)){const e=this._widgets[t].domNode.domNode;delete this._widgets[t],e.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){var e,t;let i=0;const s=Object.keys(this._widgets);for(let o=0,r=s.length;o<r;o++){const r=s[o],n=null===(t=(e=this._widgets[r].widget).getMinContentWidthInPx)||void 0===t?void 0:t.call(e);void 0!==n&&(i=Math.max(i,n))}this._context.viewLayout.setOverlayWidgetsMinWidth(i)}_renderWidget(e,t){const i=e.domNode;if(null===e.preference)return void i.setTop("");const s=2*this._verticalScrollbarWidth+this._minimapWidth;if(0===e.preference||1===e.preference){if(1===e.preference){const e=i.domNode.clientHeight;i.setTop(this._editorHeight-e-2*this._horizontalScrollbarHeight)}else i.setTop(0);void 0!==e.stack?(i.setTop(t[e.preference]),t[e.preference]+=i.domNode.clientWidth):i.setRight(s)}else if(2===e.preference)i.domNode.style.right="50%",void 0!==e.stack?(i.setTop(t[2]),t[2]+=i.domNode.clientHeight):i.setTop(0);else{const{top:t,left:s}=e.preference;if(this._context.configuration.options.get(42)&&e.widget.allowEditorOverflow){const e=this._viewDomNodeRect;i.setTop(t+e.top),i.setLeft(s+e.left),i.setPosition("fixed")}else i.setTop(t),i.setLeft(s),i.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=r.i(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);const t=Object.keys(this._widgets),i=Array.from({length:3},(()=>0));t.sort(((e,t)=>(this._widgets[e].stack||0)-(this._widgets[t].stack||0)));for(let e=0,s=t.length;e<s;e++){const s=t[e];this._renderWidget(this._widgets[s],i)}}}},80965:(e,t,i)=>{i.d(t,{p:()=>c});var s=i(38626),o=i(41264),r=i(86130),n=i(50187),h=i(71204),d=i(8625),a=i(1118),l=i(9488);class g{constructor(e,t){const i=e.options;this.lineHeight=i.get(67),this.pixelRatio=i.get(143),this.overviewRulerLanes=i.get(83),this.renderBorder=i.get(82);const s=t.getColor(d.zw);this.borderColor=s?s.toString():null,this.hideCursor=i.get(59);const o=t.getColor(d.n0);this.cursorColorSingle=o?o.transparent(.7).toString():null;const r=t.getColor(d.jD);this.cursorColorPrimary=r?r.transparent(.7).toString():null;const n=t.getColor(d.x_);this.cursorColorSecondary=n?n.transparent(.7).toString():null,this.themeType=t.type;const a=i.get(73),l=a.enabled,g=a.side,c=t.getColor(d.e_),_=h.RW.getDefaultBackground();this.backgroundColor=c||(l&&"right"===g?_:null);const u=i.get(145).overviewRuler;this.top=u.top,this.right=u.right,this.domWidth=u.width,this.domHeight=u.height,0===this.overviewRulerLanes?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);const[m,p]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=m,this.w=p}_initLanes(e,t,i){const s=t-e;if(i>=3){const t=Math.floor(s/3),i=Math.floor(s/3),o=s-t-i,r=e+t;return[[0,e,r,e,e+t+o,e,r,e],[0,t,o,t+o,i,t+o+i,o+i,t+o+i]]}if(2===i){const t=Math.floor(s/2),i=s-t;return[[0,e,e,e,e+t,e,e,e],[0,t,t,t,i,t+i,t+i,t+i]]}return[[0,e,e,e,e,e,e,e],[0,s,s,s,s,s,s,s]]}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&o.Il.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}}class c extends r.E{constructor(e){super(e),this._actualShouldRender=0,this._renderedDecorations=[],this._renderedCursorPositions=[],this._domNode=(0,s.X)(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=h.RW.onDidChange((e=>{e.changedColorMap&&this._updateSettings(!0)})),this._cursorPositions=[{position:new n.L(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){const t=new g(this._context.configuration,this._context.theme);return(!this._settings||!this._settings.equals(t))&&(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,i=e.selections.length;t<i;t++){let s=this._settings.cursorColorSingle;i>1&&(s=0===t?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:s})}return this._cursorPositions.sort(((e,t)=>n.L.compare(e.position,t.position))),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return!!e.affectsOverviewRuler&&this._markRenderingIsMaybeNeeded()}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return!!e.scrollHeightChanged&&this._markRenderingIsNeeded()}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return!!this._updateSettings(!1)&&this._markRenderingIsNeeded()}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){const e=this._settings.backgroundColor;if(0===this._settings.overviewRulerLanes)return this._domNode.setBackgroundColor(e?o.Il.Format.CSS.formatHexA(e):""),void this._domNode.setDisplay("none");const t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(a.SQ.compareByRenderingProps),1!==this._actualShouldRender||a.SQ.equalsArr(this._renderedDecorations,t)||(this._actualShouldRender=2),1!==this._actualShouldRender||(0,l.fS)(this._renderedCursorPositions,this._cursorPositions,((e,t)=>e.position.lineNumber===t.position.lineNumber&&e.color===t.color))||(this._actualShouldRender=2),1===this._actualShouldRender)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");const i=this._settings.canvasWidth,s=this._settings.canvasHeight,r=this._settings.lineHeight,n=this._context.viewLayout,h=s/this._context.viewLayout.getScrollHeight(),d=6*this._settings.pixelRatio|0,g=d/2|0,c=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(c.fillStyle=o.Il.Format.CSS.formatHexA(e),c.fillRect(0,0,i,s)):(c.clearRect(0,0,i,s),c.fillStyle=o.Il.Format.CSS.formatHexA(e),c.fillRect(0,0,i,s)):c.clearRect(0,0,i,s);const _=this._settings.x,u=this._settings.w;for(const e of t){const t=e.color,i=e.data;c.fillStyle=t;let o=0,a=0,l=0;for(let e=0,t=i.length/3;e<t;e++){const t=i[3*e],m=i[3*e+1],p=i[3*e+2];let f=n.getVerticalOffsetForLineNumber(m)*h|0,v=(n.getVerticalOffsetForLineNumber(p)+r)*h|0;if(v-f<d){let e=(f+v)/2|0;e<g?e=g:e+g>s&&(e=s-g),f=e-g,v=e+g}f>l+1||t!==o?(0!==e&&c.fillRect(_[o],a,u[o],l-a),o=t,a=f,l=v):v>l&&(l=v)}c.fillRect(_[o],a,u[o],l-a)}if(!this._settings.hideCursor){const e=2*this._settings.pixelRatio|0,t=e/2|0,i=this._settings.x[7],o=this._settings.w[7];let r=-100,d=-100,a=null;for(let l=0,g=this._cursorPositions.length;l<g;l++){const g=this._cursorPositions[l].color;if(!g)continue;const _=this._cursorPositions[l].position;let u=n.getVerticalOffsetForLineNumber(_.lineNumber)*h|0;u<t?u=t:u+t>s&&(u=s-t);const m=u-t,p=m+e;m>d+1||g!==a?(0!==l&&a&&c.fillRect(i,r,o,d-r),r=m,d=p):p>d&&(d=p),a=g,c.fillStyle=g}a&&c.fillRect(i,r,o,d-r)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(c.beginPath(),c.lineWidth=1,c.strokeStyle=this._settings.borderColor,c.moveTo(0,0),c.lineTo(0,s),c.stroke(),c.moveTo(0,0),c.lineTo(i,0),c.stroke())}}},55170:(e,t,i)=>{i.d(t,{V:()=>n});var s=i(38626),o=i(30665),r=i(50461);class n extends r.O{constructor(e,t){super(),this._context=e;const i=this._context.configuration.options;this._domNode=(0,s.X)(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new o.Tj((e=>this._context.viewLayout.getVerticalOffsetForLineNumber(e))),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(i.get(67)),this._zoneManager.setPixelRatio(i.get(143)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return e.hasChanged(67)&&(this._zoneManager.setLineHeight(t.get(67)),this._render()),e.hasChanged(143)&&(this._zoneManager.setPixelRatio(t.get(143)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(0===this._zoneManager.getOuterHeight())return!1;const e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),i=this._zoneManager.resolveColorZones(),s=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),i.length>0&&this._renderOneLane(o,i,s,e),!0}_renderOneLane(e,t,i,s){let o=0,r=0,n=0;for(const h of t){const t=h.colorId,d=h.from,a=h.to;t!==o?(e.fillRect(0,r,s,n-r),o=t,e.fillStyle=i[o],r=d,n=a):n>=d?n=Math.max(n,a):(e.fillRect(0,r,s,n-r),r=d,n=a)}e.fillRect(0,r,s,n-r)}}},74550:(e,t,i)=>{i.d(t,{b:()=>r});var s=i(38626),o=i(86130);class r extends o.E{constructor(e){super(e),this.domNode=(0,s.X)(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];const t=this._context.configuration.options;this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){const t=this._context.configuration.options;return this._rulers=t.get(102),this._typicalHalfwidthCharacterWidth=t.get(50).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){const e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){const{tabSize:i}=this._context.viewModel.model.getOptions(),o=i;let r=t-e;for(;r>0;){const e=(0,s.X)(document.createElement("div"));e.setClassName("view-ruler"),e.setWidth(o),this.domNode.appendChild(e),this._renderedRulers.push(e),r--}return}let i=e-t;for(;i>0;){const e=this._renderedRulers.pop();this.domNode.removeChild(e),i--}}render(e){this._ensureRulersCount();for(let t=0,i=this._rulers.length;t<i;t++){const i=this._renderedRulers[t],s=this._rulers[t];i.setBoxShadow(s.color?`1px 0 0 0 ${s.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(s.column*this._typicalHalfwidthCharacterWidth)}}}}}]);