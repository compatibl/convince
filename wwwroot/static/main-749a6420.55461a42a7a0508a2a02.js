"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[2091],{11548:(e,n,t)=>{t.d(n,{h:()=>r});var r=function(e){return e[e.MAIN=0]="MAIN",e[e.MIDDLE=1]="MIDDLE",e[e.SECONDARY=2]="SECONDARY",e[e.BROWSER_BACK=3]="BROWSER_BACK",e[e.BROWSER_FORWARD=4]="BROWSER_FORWARD",e}({})},68704:(e,n,t)=>{t.d(n,{R:()=>r});var r=function(e){return e.EXPANDER="expander",e}({})},66752:(e,n,t)=>{t.d(n,{p1:()=>r});var r=function(e){return e.INT="Int",e.NUMBER="Number",e}({})},21285:(e,n,t)=>{t.d(n,{g4:()=>r});var r=function(e){return e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.Enter="Enter",e.Escape="Escape",e.KeyA="KeyA",e.KeyC="KeyC",e.KeyF="KeyF",e.KeyS="KeyS",e.KeyX="KeyX",e.KeyV="KeyV",e.Backspace="Backspace",e.Plus="Plus",e.Minus="Minus",e.Period="Period",e.Zero="Digit0",e.One="Digit1",e.Two="Digit2",e.Three="Digit3",e.Four="Digit4",e.Five="Digit5",e.Six="Digit6",e.Seven="Digit7",e.Eight="Digit8",e.Nine="Digit9",e.Tab="Tab",e.NumpadEnter="NumpadEnter",e.NumpadMinus="NumpadMinus",e.NumpadPlus="NumpadPlus",e.NumpadPeriod="NumpadPeriod",e.NumpadZero="Numpad0",e.NumpadOne="Numpad1",e.NumpadTwo="Numpad2",e.NumpadThree="Numpad3",e.NumpadFour="Numpad4",e.NumpadFive="Numpad5",e.NumpadSix="Numpad6",e.NumpadSeven="Numpad7",e.NumpadEight="Numpad8",e.NumpadNine="Numpad9",e}({}),o=(r.ArrowDown,r.ArrowLeft,r.ArrowRight,r.ArrowUp,[r.One,r.Two,r.Three,r.Four,r.Five,r.Six,r.Seven,r.Eight,r.Nine,r.Zero]),a=[r.NumpadOne,r.NumpadTwo,r.NumpadThree,r.NumpadFour,r.NumpadFive,r.NumpadSix,r.NumpadSeven,r.NumpadEight,r.NumpadNine,r.NumpadZero];[].concat(o,a)},46477:(e,n,t)=>{t.d(n,{P:()=>r});var r=function(e){return e.SUCCESS="success",e.ERROR="error",e.INFO="info",e.WARNING="warning",e}({})},45890:(e,n,t)=>{t.d(n,{Ik:()=>o,rU:()=>r,xN:()=>a});var r=function(e){return e.Data="Data",e.Bool="Bool",e.Double="Double",e.Long="Long",e.Int="Int",e.String="String",e.Date="Date",e.Time="Time",e.DateTime="DateTime",e.Key="Key",e.TimeElement="TimeElement",e.DateTimeElement="DateTimeElement",e.Binary="Binary",e.Variant="Variant",e.Dict="Dict",e}({}),o=[r.String,r.Bool,r.Int,r.Double,r.Long,r.Date,r.Time,r.DateTime,r.TimeElement,r.DateTimeElement],a=function(e){return e.NUMBER_AMOUNT="NumberAmount",e.NUMBER_BASIS_POINT="NumberBp",e.NUMBER_PERCENT="NumberPercent",e}({})},65459:(e,n,t)=>{t.d(n,{QN:()=>L,Yu:()=>M,km:()=>V.k,o2:()=>p.o2,eL:()=>p.eL});var r=t(67294),o=t(3909),a=t(93967),i=t.n(a),u=t(85893),c=(0,r.memo)((function(e){var n=e.className,t=e.placeholder,r=void 0===t?"Please select a node or line to interact with them.":t;return(0,u.jsx)("p",{className:i()(n,"m-0 fs-13 lh-16 text-center"),children:r})}));c.displayName="DagActionPlaceholder";var s=t(79695),d=t(23675),l=function(e){return e.CREATE="create",e.UPDATE="update",e}({}),m=(0,r.memo)((function(e){var n=e.variant,t=e.type,r=e.selectedRowKey,o=e.initialValues,a=e.onSubmit,i=e.onCancel;return n===l.CREATE?(0,u.jsx)(d._,{recordType:t,onCancel:i,onUpdate:function(e){return a(e)}}):(0,u.jsx)(s.A,{editorData:o,recordKey:r,recordType:t,onCancel:i,onUpdate:function(e){return a(e)}})}));m.displayName="DagNodeForm";var f=(0,r.memo)((function(e){var n=e.type,t=e.selectedRowKey,r=e.initialValues,o=e.onCancel,a=e.onSubmit;return(0,u.jsx)(s.A,{editorData:r,recordKey:t,recordType:n,onCancel:o,onUpdate:function(e){return a(e)}})}));f.displayName="DagEdgeForm";var p=t(36533),N=(0,r.createContext)({});function y(){var e=(0,r.useContext)(N);if(null==e)throw new Error("Cannot find Dag context");return e}var g=t(79880),v=function(e){var n=e.selectedRowKey,t=e.className,o=y(),a=o.type,s=o.actionMode,d=o.selected,N=o.resetActionMode,v=o.addNode,h=o.updateSelectedNode,b=o.updateSelectedEdge,E=(0,r.useMemo)((function(){var e=d.edges[0];return e?(0,p.Df)(e):void 0}),[d.edges]),D=(0,r.useMemo)((function(){var e=d.nodes[0];return e?(0,p.WK)(e):void 0}),[d.nodes]);return(0,u.jsxs)("div",{className:i()(t,"d-flex flex-column text-text1 p-2 h-100 w-100"),children:[(0,u.jsx)("h5",{className:"text-center",children:"Actions"}),function(e){switch(e){case g.M.ADD_NODE:return(0,u.jsx)(m,{variant:l.CREATE,type:a,selectedRowKey:n,onSubmit:v,onCancel:N});case g.M.EDIT_NODE:return(0,u.jsx)(m,{variant:l.UPDATE,selectedRowKey:n,type:a,initialValues:D,onSubmit:h,onCancel:N},null==D?void 0:D.Id_);case g.M.EDIT_EDGE:return(0,u.jsx)(f,{type:a,selectedRowKey:n,initialValues:E,onSubmit:b,onCancel:N},null==E?void 0:E.Id_);default:return(0,u.jsx)(c,{})}}(s)]})},h=t(36851),b=t(86706),E=t(74823),D=t(75011),x=t(66088);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function w(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?C(Object(t),!0).forEach((function(n){A(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function A(e,n,t){return(n=function(e){var n=function(e,n){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==S(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function j(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,o,a,i,u=[],c=!0,s=!1;try{if(a=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=a.call(t)).done)&&(u.push(r.value),u.length!==n);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(s)throw o}}return u}}(e,n)||function(e,n){if(e){if("string"==typeof e)return R(e,n);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?R(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}var O=function(e){var n=e.type,t=e.pointer,o=e.isReadonly,a=e.children,i=(0,b.v9)(D.n),c=(0,r.useRef)(!0),s=(0,r.useRef)(),d=j((0,h.Rr)([]),3),l=d[0],m=d[1],f=d[2],y=j((0,h.ll)([]),3),v=y[0],S=y[1],C=y[2],A=j((0,r.useState)({nodes:[],edges:[]}),2),R=A[0],O=A[1],T=j((0,r.useState)(g.M.NONE),2),P=T[0],M=T[1],I=j((0,r.useState)(!1),2),K=I[0],_=I[1],k=(0,r.useMemo)((function(){return{nodes:(0,p.gR)(l),edges:(0,p._H)(v)}}),[l,v]),B=(0,x.n)(k),U=(0,r.useCallback)((function(e){return S((function(n){return(0,h.Z_)(e,n)}))}),[S]),F=(0,r.useCallback)((function(e){o||f(e)}),[o]),L=(0,r.useCallback)((function(e){o||C(e)}),[o]),V=(0,r.useCallback)((function(e){o||m((function(n){var t={id:e.Id_,position:{x:e.Position.X,y:e.Position.Y},data:{label:e.Data.Label}};return n.concat([t])}))}),[o]),W=(0,r.useCallback)((function(e){o||m((function(n){return n.map((function(n){return n.id===e.Id_?w(w({},n),{},{position:{x:e.Position.X,y:e.Position.Y},data:{label:e.Data.Label}}):n}))}))}),[o]),G=(0,r.useCallback)((function(e){o||S((function(n){return n.map((function(n){return n.id===e.Id_?w(w({},n),{},{target:e.Target,source:e.Source,label:e.Label}):n}))}))}),[o]),X=(0,r.useCallback)((function(){return M(g.M.ADD_NODE)}),[]),Z=(0,r.useCallback)((function(){return M(g.M.NONE)}),[]),z=(0,r.useCallback)((function(e){M((function(){return e.nodes[0]?g.M.EDIT_NODE:e.edges[0]?g.M.EDIT_EDGE:g.M.NONE})),O(e)}),[]),Y=(0,r.useCallback)((function(e){var n=s.current;if(!n)throw new Error('Cannot save DAG object because "DAG ref" is empty');_(!0),E.lx.saveEntity({oldRecordKey:t,data:w(w({},n),{},{Nodes:e.nodes,Edges:e.edges})}).finally((function(){return _(!1)}))}),[t]);return(0,r.useEffect)((function(){c.current=!0,E.yI.getRecord({type:n,key:t,dataset:i}).then((function(e){var n=e.data;s.current=n,m((0,p.eL)(n.Nodes)),S((0,p.o2)(n.Edges))})).finally((function(){c.current=!1}))}),[]),(0,r.useEffect)((function(){c.current||o||Y(B)}),[B,o]),(0,u.jsx)(N.Provider,{value:{isReadonly:o,isUpdating:K,pointer:t,type:n,actionMode:P,activateAddNodeMode:X,resetActionMode:Z,nodes:l,edges:v,setNodes:m,setEdges:S,onNodesChange:F,onEdgesChange:L,addNode:V,updateSelectedNode:W,updateSelectedEdge:G,onConnect:U,selected:R,onSelectionChange:z},children:a})};t(53747);const T="fo_0H";var P={hideAttribution:!0},M=function(e){var n=e.className,t=e.nodes,r=e.edges,o=e.onNodesChange,a=e.onEdgesChange,c=e.onConnect,s=e.onSelectionChange;return(0,u.jsx)(h.x$,{className:i()(T,n),nodes:t,edges:r,onNodesChange:o,onEdgesChange:a,onConnect:c,onSelectionChange:s,proOptions:P,fitView:!0})},I=function(e){var n=e.className,t=y(),r=t.nodes,o=t.edges,a=t.onNodesChange,i=t.onEdgesChange,c=t.onConnect,s=t.onSelectionChange;return(0,u.jsx)(M,{className:n,nodes:r,edges:o,onNodesChange:a,onEdgesChange:i,onConnect:c,onSelectionChange:s})},K=t(3280),_=t(97418),k=t(95014),B=t(51879);const U="XGwlN";var F=function(){var e=y(),n=e.isUpdating,t=e.activateAddNodeMode;return(0,u.jsxs)(_.o,{children:[(0,u.jsx)(_.o.Group,{children:(0,u.jsxs)(K.Z,{className:i()(U,"d-flex align-items-center d-flex bg-gray-600 gap-1 border-none text-text1 px-2 py-1 rounded"),onClick:t,children:[(0,u.jsx)(k.J,{SvgIcon:B.C.add}),(0,u.jsx)("span",{className:"fs-13 lh-16",children:"Add node"})]})}),(0,u.jsx)("div",{children:n&&(0,u.jsx)("p",{className:"text-text1 fs-13 lh-16 m-0",children:"Updating..."})})]})},L=(0,r.memo)((function(e){var n=e.type,t=e.selectedRowKey,a=e.isReadonly,i=void 0!==a&&a;return(0,u.jsx)(O,{type:n,pointer:t,isReadonly:i,children:(0,u.jsx)("div",{className:"d-flex w-100 h-100",children:(0,u.jsxs)(o.eh,{direction:"horizontal",children:[(0,u.jsx)(o.s_,{id:"flow-viewer-content",order:1,defaultSize:60,children:(0,u.jsxs)("div",{className:"d-flex flex-column h-100 w-100",children:[!i&&(0,u.jsx)(F,{}),(0,u.jsx)(I,{className:"flex-grow-1"})]})}),!i&&(0,u.jsxs)(r.Fragment,{children:[(0,u.jsx)(o.OT,{className:"verticalPanelResizer"}),(0,u.jsx)(o.s_,{id:"flow-viewer-actions",order:1,minSize:0,maxSize:40,children:(0,u.jsx)(v,{selectedRowKey:t})})]})]})})})}));L.displayName="Dag";var V=t(38980)}}]);