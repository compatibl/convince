"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[9490],{33018:(e,t,i)=>{i.d(t,{m:()=>d});var o=i(65321),n=i(30986),s=i(5976),r=i(91847),a=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},h=function(e,t){return function(i,o){t(i,o,e)}};const c=o.$;let d=class extends s.JT{get hasContent(){return this._hasContent}constructor(e){super(),this._keybindingService=e,this._hasContent=!1,this.hoverElement=c("div.hover-row.status-bar"),this.hoverElement.tabIndex=0,this.actionsElement=o.R3(this.hoverElement,c("div.actions"))}addAction(e){const t=this._keybindingService.lookupKeybinding(e.commandId),i=t?t.getLabel():null;return this._hasContent=!0,this._register(n.Sr.render(this.actionsElement,e,i))}append(e){const t=o.R3(this.actionsElement,e);return this._hasContent=!0,t}};d=a([h(0,r.d)],d)},41095:(e,t,i)=>{i.d(t,{OP:()=>c});var o=i(15393),n=i(71050),s=i(17301),r=i(16830),a=i(71922);class h{constructor(e,t,i){this.provider=e,this.hover=t,this.ordinal=i}}function c(e,t,i,n){const r=e.ordered(t).map(((e,o)=>async function(e,t,i,o,n){const r=await Promise.resolve(e.provideHover(i,o,n)).catch(s.Cp);if(r&&function(e){const t=void 0!==e.range,i=void 0!==e.contents&&e.contents&&e.contents.length>0;return t&&i}(r))return new h(e,r,t)}(e,o,t,i,n)));return o.Aq.fromPromises(r).coalesce()}(0,r.sb)("_executeHoverProvider",((e,t,i)=>function(e,t,i,o){return c(e,t,i,o).map((e=>e.hover)).toPromise()}(e.get(a.p).hoverProvider,t,i,n.Ts.None)))},18987:(e,t,i)=>{i.d(t,{B:()=>l,Gd:()=>v,Io:()=>u,UW:()=>s,ap:()=>p,cW:()=>d,eG:()=>m,eY:()=>g,iS:()=>c,m:()=>_,p:()=>r,q_:()=>h,s9:()=>n,wf:()=>a});var o=i(63580);const n="editor.action.showHover",s="editor.action.showDefinitionPreviewHover",r="editor.action.scrollUpHover",a="editor.action.scrollDownHover",h="editor.action.scrollLeftHover",c="editor.action.scrollRightHover",d="editor.action.pageUpHover",l="editor.action.pageDownHover",u="editor.action.goToTopHover",g="editor.action.goToBottomHover",v="editor.action.increaseHoverVerbosityLevel",p=o.NC({key:"increaseHoverVerbosityLevel",comment:["Label for action that will increase the hover verbosity level."]},"Increase Hover Verbosity Level"),_="editor.action.decreaseHoverVerbosityLevel",m=o.NC({key:"decreaseHoverVerbosityLevel",comment:["Label for action that will decrease the hover verbosity level."]},"Decrease Hover Verbosity Level")},6418:(e,t,i)=>{var o,n=i(18987),s=i(22258),r=i(16830),a=i(24314),h=i(29102),c=i(22470),d=i(64410),l=i(71204),u=i(63580);!function(e){e.NoAutoFocus="noAutoFocus",e.FocusIfVisible="focusIfVisible",e.AutoFocusImmediately="autoFocusImmediately"}(o||(o={}));class g extends r.R6{constructor(){super({id:n.s9,label:u.NC({key:"showOrFocusHover",comment:["Label for action that will trigger the showing/focusing of a hover in the editor.","If the hover is not visible, it will show the hover.","This allows for users to show the hover without using the mouse."]},"Show or Focus Hover"),metadata:{description:u.vv("showOrFocusHoverDescription","Show or focus the editor hover which shows documentation, references, and other content for a symbol at the current cursor position."),args:[{name:"args",schema:{type:"object",properties:{focus:{description:"Controls if and when the hover should take focus upon being triggered by this action.",enum:[o.NoAutoFocus,o.FocusIfVisible,o.AutoFocusImmediately],enumDescriptions:[u.NC("showOrFocusHover.focus.noAutoFocus","The hover will not automatically take focus."),u.NC("showOrFocusHover.focus.focusIfVisible","The hover will take focus only if it is already visible."),u.NC("showOrFocusHover.focus.autoFocusImmediately","The hover will automatically take focus when it appears.")],default:o.FocusIfVisible}}}}]},alias:"Show or Focus Hover",precondition:void 0,kbOpts:{kbExpr:h.u.editorTextFocus,primary:(0,s.gx)(2089,2087),weight:100}})}run(e,t,i){if(!t.hasModel())return;const n=d.c.get(t);if(!n)return;const s=null==i?void 0:i.focus;let r=o.FocusIfVisible;Object.values(o).includes(s)?r=s:"boolean"==typeof s&&s&&(r=o.AutoFocusImmediately);const h=e=>{const i=t.getPosition(),o=new a.e(i.lineNumber,i.column,i.lineNumber,i.column);n.showContentHover(o,1,1,e)},c=2===t.getOption(2);n.isHoverVisible?r!==o.NoAutoFocus?n.focus():h(c):h(c||r===o.AutoFocusImmediately)}}class v extends r.R6{constructor(){super({id:n.UW,label:u.NC({key:"showDefinitionPreviewHover",comment:["Label for action that will trigger the showing of definition preview hover in the editor.","This allows for users to show the definition preview hover without using the mouse."]},"Show Definition Preview Hover"),alias:"Show Definition Preview Hover",precondition:void 0,metadata:{description:u.vv("showDefinitionPreviewHoverDescription","Show the definition preview hover in the editor.")}})}run(e,t){const i=d.c.get(t);if(!i)return;const o=t.getPosition();if(!o)return;const n=new a.e(o.lineNumber,o.column,o.lineNumber,o.column),s=c.S.get(t);if(!s)return;s.startFindDefinitionFromCursor(o).then((()=>{i.showContentHover(n,1,1,!0)}))}}class p extends r.R6{constructor(){super({id:n.p,label:u.NC({key:"scrollUpHover",comment:["Action that allows to scroll up in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Up Hover"),alias:"Scroll Up Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:16,weight:100},metadata:{description:u.vv("scrollUpHoverDescription","Scroll up the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.scrollUp()}}class _ extends r.R6{constructor(){super({id:n.wf,label:u.NC({key:"scrollDownHover",comment:["Action that allows to scroll down in the hover widget with the up arrow when the hover widget is focused."]},"Scroll Down Hover"),alias:"Scroll Down Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:18,weight:100},metadata:{description:u.vv("scrollDownHoverDescription","Scroll down the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.scrollDown()}}class m extends r.R6{constructor(){super({id:n.q_,label:u.NC({key:"scrollLeftHover",comment:["Action that allows to scroll left in the hover widget with the left arrow when the hover widget is focused."]},"Scroll Left Hover"),alias:"Scroll Left Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:15,weight:100},metadata:{description:u.vv("scrollLeftHoverDescription","Scroll left the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.scrollLeft()}}class f extends r.R6{constructor(){super({id:n.iS,label:u.NC({key:"scrollRightHover",comment:["Action that allows to scroll right in the hover widget with the right arrow when the hover widget is focused."]},"Scroll Right Hover"),alias:"Scroll Right Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:17,weight:100},metadata:{description:u.vv("scrollRightHoverDescription","Scroll right the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.scrollRight()}}class b extends r.R6{constructor(){super({id:n.cW,label:u.NC({key:"pageUpHover",comment:["Action that allows to page up in the hover widget with the page up command when the hover widget is focused."]},"Page Up Hover"),alias:"Page Up Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:11,secondary:[528],weight:100},metadata:{description:u.vv("pageUpHoverDescription","Page up the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.pageUp()}}class w extends r.R6{constructor(){super({id:n.B,label:u.NC({key:"pageDownHover",comment:["Action that allows to page down in the hover widget with the page down command when the hover widget is focused."]},"Page Down Hover"),alias:"Page Down Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:12,secondary:[530],weight:100},metadata:{description:u.vv("pageDownHoverDescription","Page down the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.pageDown()}}class y extends r.R6{constructor(){super({id:n.Io,label:u.NC({key:"goToTopHover",comment:["Action that allows to go to the top of the hover widget with the home command when the hover widget is focused."]},"Go To Top Hover"),alias:"Go To Bottom Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:14,secondary:[2064],weight:100},metadata:{description:u.vv("goToTopHoverDescription","Go to the top of the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.goToTop()}}class C extends r.R6{constructor(){super({id:n.eY,label:u.NC({key:"goToBottomHover",comment:["Action that allows to go to the bottom in the hover widget with the end command when the hover widget is focused."]},"Go To Bottom Hover"),alias:"Go To Bottom Hover",precondition:h.u.hoverFocused,kbOpts:{kbExpr:h.u.hoverFocused,primary:13,secondary:[2066],weight:100},metadata:{description:u.vv("goToBottomHoverDescription","Go to the bottom of the editor hover.")}})}run(e,t){const i=d.c.get(t);i&&i.goToBottom()}}class S extends r.R6{constructor(){super({id:n.Gd,label:n.ap,alias:"Increase Hover Verbosity Level",precondition:h.u.hoverVisible})}run(e,t,i){var o;null===(o=d.c.get(t))||void 0===o||o.updateMarkdownHoverVerbosityLevel(l.bq.Increase,null==i?void 0:i.index,null==i?void 0:i.focus)}}class D extends r.R6{constructor(){super({id:n.m,label:n.eG,alias:"Decrease Hover Verbosity Level",precondition:h.u.hoverVisible})}run(e,t,i){var o;null===(o=d.c.get(t))||void 0===o||o.updateMarkdownHoverVerbosityLevel(l.bq.Decrease,null==i?void 0:i.index,null==i?void 0:i.focus)}}var M=i(82992),N=i(97781),H=i(66520),k=i(22374),L=i(65321),I=i(9488),R=i(15393),P=i(17301),O=i(5976),x=i(95935),T=i(71922),A=i(36357),W=i(75396),V=i(38869),F=i(87997),z=i(29368),E=i(98674),U=i(50988),q=i(90535),K=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},Q=function(e,t){return function(i,o){t(i,o,e)}};const B=L.$;class j{constructor(e,t,i){this.owner=e,this.range=t,this.marker=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}const Y={type:1,filter:{include:F.yN.QuickFix},triggerAction:F.aQ.QuickFixHover};let G=class{constructor(e,t,i,o){this._editor=e,this._markerDecorationsService=t,this._openerService=i,this._languageFeaturesService=o,this.hoverOrdinal=1,this.recentMarkerCodeActionsInfo=void 0}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type&&!e.supportsMarkerHover)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,n=i.getLineMaxColumn(o),s=[];for(const r of t){const t=r.range.startLineNumber===o?r.range.startColumn:1,h=r.range.endLineNumber===o?r.range.endColumn:n,c=this._markerDecorationsService.getMarker(i.uri,r);if(!c)continue;const d=new a.e(e.range.startLineNumber,t,e.range.startLineNumber,h);s.push(new j(this,d,c))}return s}renderHoverParts(e,t){if(!t.length)return O.JT.None;const i=new O.SL;t.forEach((t=>e.fragment.appendChild(this.renderMarkerHover(t,i))));const o=1===t.length?t[0]:t.sort(((e,t)=>E.ZL.compare(e.marker.severity,t.marker.severity)))[0];return this.renderMarkerStatusbar(e,o,i),i}renderMarkerHover(e,t){const i=B("div.hover-row");i.tabIndex=0;const o=L.R3(i,B("div.marker.hover-contents")),{source:n,message:s,code:r,relatedInformation:a}=e.marker;this._editor.applyFontInfo(o);const h=L.R3(o,B("span"));if(h.style.whiteSpace="pre-wrap",h.innerText=s,n||r)if(r&&"string"!=typeof r){const e=B("span");if(n){L.R3(e,B("span")).innerText=n}const i=L.R3(e,B("a.code-link"));i.setAttribute("href",r.target.toString()),t.add(L.nm(i,"click",(e=>{this._openerService.open(r.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()})));L.R3(i,B("span")).innerText=r.value;const s=L.R3(o,e);s.style.opacity="0.6",s.style.paddingLeft="6px"}else{const e=L.R3(o,B("span"));e.style.opacity="0.6",e.style.paddingLeft="6px",e.innerText=n&&r?`${n}(${r})`:n||`(${r})`}if((0,I.Of)(a))for(const{message:e,resource:i,startLineNumber:n,startColumn:s}of a){const r=L.R3(o,B("div"));r.style.marginTop="8px";const a=L.R3(r,B("a"));a.innerText=`${(0,x.EZ)(i)}(${n}, ${s}): `,a.style.cursor="pointer",t.add(L.nm(a,"click",(e=>{e.stopPropagation(),e.preventDefault(),this._openerService&&this._openerService.open(i,{fromUserGesture:!0,editorOptions:{selection:{startLineNumber:n,startColumn:s}}}).catch(P.dL)})));const h=L.R3(r,B("span"));h.innerText=e,this._editor.applyFontInfo(h)}return i}renderMarkerStatusbar(e,t,i){if(t.marker.severity===E.ZL.Error||t.marker.severity===E.ZL.Warning||t.marker.severity===E.ZL.Info){const i=z.c.get(this._editor);i&&e.statusBar.addAction({label:u.NC("view problem","View Problem"),commandId:z.v.ID,run:()=>{e.hide(),i.showAtMarker(t.marker),this._editor.focus()}})}if(!this._editor.getOption(91)){const o=e.statusBar.append(B("div"));this.recentMarkerCodeActionsInfo&&(E.H0.makeKey(this.recentMarkerCodeActionsInfo.marker)===E.H0.makeKey(t.marker)?this.recentMarkerCodeActionsInfo.hasCodeActions||(o.textContent=u.NC("noQuickFixes","No quick fixes available")):this.recentMarkerCodeActionsInfo=void 0);const n=this.recentMarkerCodeActionsInfo&&!this.recentMarkerCodeActionsInfo.hasCodeActions?O.JT.None:(0,R.Vg)((()=>o.textContent=u.NC("checkingForQuickFixes","Checking for quick fixes...")),200,i);o.textContent||(o.textContent=String.fromCharCode(160));const s=this.getCodeActions(t.marker);i.add((0,O.OF)((()=>s.cancel()))),s.then((s=>{if(n.dispose(),this.recentMarkerCodeActionsInfo={marker:t.marker,hasCodeActions:s.validActions.length>0},!this.recentMarkerCodeActionsInfo.hasCodeActions)return s.dispose(),void(o.textContent=u.NC("noQuickFixes","No quick fixes available"));o.style.display="none";let r=!1;i.add((0,O.OF)((()=>{r||s.dispose()}))),e.statusBar.addAction({label:u.NC("quick fixes","Quick Fix..."),commandId:W.cz,run:t=>{r=!0;const i=V.G.get(this._editor),o=L.i(t);e.hide(),null==i||i.showCodeActions(Y,s,{x:o.left,y:o.top,width:o.width,height:o.height})}})}),P.dL)}}getCodeActions(e){return(0,R.PG)((t=>(0,W.aI)(this._languageFeaturesService.codeActionProvider,this._editor.getModel(),new a.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),Y,q.Ex.None,t)))}};G=K([Q(1,A.i),Q(2,U.v),Q(3,T.p)],G);var $,J=i(98685);!function(e){e.intro=(0,u.NC)("intro","Focus on the hover widget to cycle through the hover parts with the Tab key."),e.increaseVerbosity=(0,u.NC)("increaseVerbosity","- The focused hover part verbosity level can be increased with the Increase Hover Verbosity command<keybinding:{0}>.",n.Gd),e.decreaseVerbosity=(0,u.NC)("decreaseVerbosity","- The focused hover part verbosity level can be decreased with the Decrease Hover Verbosity command<keybinding:{0}>.",n.m),e.hoverContent=(0,u.NC)("contentHover","The last focused hover content is the following.")}($||($={}));(0,r._K)(d.c.ID,d.c,2),(0,r.Qr)(g),(0,r.Qr)(v),(0,r.Qr)(p),(0,r.Qr)(_),(0,r.Qr)(m),(0,r.Qr)(f),(0,r.Qr)(b),(0,r.Qr)(w),(0,r.Qr)(y),(0,r.Qr)(C),(0,r.Qr)(S),(0,r.Qr)(D),H.Ae.register(k.D5),H.Ae.register(G),(0,N.Ic)(((e,t)=>{const i=e.getColor(M.CNo);i&&(t.addRule(`.monaco-editor .monaco-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-top: 1px solid ${i.transparent(.5)}; }`),t.addRule(`.monaco-editor .monaco-hover hr { border-bottom: 0px solid ${i.transparent(.5)}; }`))})),J.V.register(new class{dispose(){var e;null===(e=this._provider)||void 0===e||e.dispose()}}),J.V.register(new class{dispose(){var e;null===(e=this._provider)||void 0===e||e.dispose()}}),J.V.register(new class{dispose(){}})},64410:(e,t,i)=>{i.d(t,{c:()=>X});var o=i(18987),n=i(5976),s=i(72065),r=i(43677),a=i(91847),h=i(15393),c=i(65321),d=i(17735),l=i(50187);class u extends n.JT{constructor(e,t=new c.Ro(10,10)){super(),this._editor=e,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._resizableNode=this._register(new d.f),this._contentPosition=null,this._isResizing=!1,this._resizableNode.domNode.style.position="absolute",this._resizableNode.minSize=c.Ro.lift(t),this._resizableNode.layout(t.height,t.width),this._resizableNode.enableSashes(!0,!0,!0,!0),this._register(this._resizableNode.onDidResize((e=>{this._resize(new c.Ro(e.dimension.width,e.dimension.height)),e.done&&(this._isResizing=!1)}))),this._register(this._resizableNode.onDidWillResize((()=>{this._isResizing=!0})))}get isResizing(){return this._isResizing}getDomNode(){return this._resizableNode.domNode}getPosition(){return this._contentPosition}get position(){var e;return(null===(e=this._contentPosition)||void 0===e?void 0:e.position)?l.L.lift(this._contentPosition.position):void 0}_availableVerticalSpaceAbove(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;return c.i(t).top+i.top-30}_availableVerticalSpaceBelow(e){const t=this._editor.getDomNode(),i=this._editor.getScrolledVisiblePosition(e);if(!t||!i)return;const o=c.i(t),n=c.D6(t.ownerDocument.body),s=o.top+i.top+i.height;return n.height-s-24}_findPositionPreference(e,t){var i,o;const n=Math.min(null!==(i=this._availableVerticalSpaceBelow(t))&&void 0!==i?i:1/0,e),s=Math.min(null!==(o=this._availableVerticalSpaceAbove(t))&&void 0!==o?o:1/0,e),r=Math.min(Math.max(s,n),e),a=Math.min(e,r);let h;return h=this._editor.getOption(60).above?a<=s?1:2:a<=n?2:1,1===h?this._resizableNode.enableSashes(!0,!0,!1,!1):this._resizableNode.enableSashes(!1,!0,!0,!1),h}_resize(e){this._resizableNode.layout(e.height,e.width)}}var g,v=i(93983),p=i(33108),_=i(31106),m=i(29102),f=i(30986),b=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},w=function(e,t){return function(i,o){t(i,o,e)}};let y=g=class extends u{get isColorPickerVisible(){var e;return Boolean(null===(e=this._visibleData)||void 0===e?void 0:e.colorPicker)}get isVisibleFromKeyboard(){var e;return 1===(null===(e=this._visibleData)||void 0===e?void 0:e.source)}get isVisible(){var e;return null!==(e=this._hoverVisibleKey.get())&&void 0!==e&&e}get isFocused(){var e;return null!==(e=this._hoverFocusedKey.get())&&void 0!==e&&e}constructor(e,t,i,o,n){const s=e.getOption(67)+8,r=new c.Ro(150,s);super(e,r),this._configurationService=i,this._accessibilityService=o,this._keybindingService=n,this._hover=this._register(new f.c8),this._minimumSize=r,this._hoverVisibleKey=m.u.hoverVisible.bindTo(t),this._hoverFocusedKey=m.u.hoverFocused.bindTo(t),c.R3(this._resizableNode.domNode,this._hover.containerDomNode),this._resizableNode.domNode.style.zIndex="50",this._register(this._editor.onDidLayoutChange((()=>{this.isVisible&&this._updateMaxDimensions()}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._updateFont()})));const a=this._register(c.go(this._resizableNode.domNode));this._register(a.onDidFocus((()=>{this._hoverFocusedKey.set(!0)}))),this._register(a.onDidBlur((()=>{this._hoverFocusedKey.set(!1)}))),this._setHoverData(void 0),this._editor.addContentWidget(this)}dispose(){var e;super.dispose(),null===(e=this._visibleData)||void 0===e||e.disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return g.ID}static _applyDimensions(e,t,i){const o="number"==typeof t?`${t}px`:t,n="number"==typeof i?`${i}px`:i;e.style.width=o,e.style.height=n}_setContentsDomNodeDimensions(e,t){const i=this._hover.contentsDomNode;return g._applyDimensions(i,e,t)}_setContainerDomNodeDimensions(e,t){const i=this._hover.containerDomNode;return g._applyDimensions(i,e,t)}_setHoverWidgetDimensions(e,t){this._setContentsDomNodeDimensions(e,t),this._setContainerDomNodeDimensions(e,t),this._layoutContentWidget()}static _applyMaxDimensions(e,t,i){const o="number"==typeof t?`${t}px`:t,n="number"==typeof i?`${i}px`:i;e.style.maxWidth=o,e.style.maxHeight=n}_setHoverWidgetMaxDimensions(e,t){g._applyMaxDimensions(this._hover.contentsDomNode,e,t),g._applyMaxDimensions(this._hover.containerDomNode,e,t),this._hover.containerDomNode.style.setProperty("--vscode-hover-maxWidth","number"==typeof e?`${e}px`:e),this._layoutContentWidget()}_setAdjustedHoverWidgetDimensions(e){this._setHoverWidgetMaxDimensions("none","none");const t=e.width,i=e.height;this._setHoverWidgetDimensions(t,i)}_updateResizableNodeMaxDimensions(){var e,t;const i=null!==(e=this._findMaximumRenderingWidth())&&void 0!==e?e:1/0,o=null!==(t=this._findMaximumRenderingHeight())&&void 0!==t?t:1/0;this._resizableNode.maxSize=new c.Ro(i,o),this._setHoverWidgetMaxDimensions(i,o)}_resize(e){var t,i;g._lastDimensions=new c.Ro(e.width,e.height),this._setAdjustedHoverWidgetDimensions(e),this._resizableNode.layout(e.height,e.width),this._updateResizableNodeMaxDimensions(),this._hover.scrollbar.scanDomNode(),this._editor.layoutContentWidget(this),null===(i=null===(t=this._visibleData)||void 0===t?void 0:t.colorPicker)||void 0===i||i.layout()}_findAvailableSpaceVertically(){var e;const t=null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition;if(t)return 1===this._positionPreference?this._availableVerticalSpaceAbove(t):this._availableVerticalSpaceBelow(t)}_findMaximumRenderingHeight(){const e=this._findAvailableSpaceVertically();if(!e)return;let t=6;return Array.from(this._hover.contentsDomNode.children).forEach((e=>{t+=e.clientHeight})),Math.min(e,t)}_isHoverTextOverflowing(){this._hover.containerDomNode.style.setProperty("--vscode-hover-whiteSpace","nowrap"),this._hover.containerDomNode.style.setProperty("--vscode-hover-sourceWhiteSpace","nowrap");const e=Array.from(this._hover.contentsDomNode.children).some((e=>e.scrollWidth>e.clientWidth));return this._hover.containerDomNode.style.removeProperty("--vscode-hover-whiteSpace"),this._hover.containerDomNode.style.removeProperty("--vscode-hover-sourceWhiteSpace"),e}_findMaximumRenderingWidth(){if(!this._editor||!this._editor.hasModel())return;const e=this._isHoverTextOverflowing(),t=void 0===this._contentWidth?0:this._contentWidth-2;if(e||this._hover.containerDomNode.clientWidth<t){return c.D6(this._hover.containerDomNode.ownerDocument.body).width-14}return this._hover.containerDomNode.clientWidth+2}isMouseGettingCloser(e,t){if(!this._visibleData)return!1;if(void 0===this._visibleData.initialMousePosX||void 0===this._visibleData.initialMousePosY)return this._visibleData.initialMousePosX=e,this._visibleData.initialMousePosY=t,!1;const i=c.i(this.getDomNode());void 0===this._visibleData.closestMouseDistance&&(this._visibleData.closestMouseDistance=C(this._visibleData.initialMousePosX,this._visibleData.initialMousePosY,i.left,i.top,i.width,i.height));const o=C(e,t,i.left,i.top,i.width,i.height);return!(o>this._visibleData.closestMouseDistance+4)&&(this._visibleData.closestMouseDistance=Math.min(this._visibleData.closestMouseDistance,o),!0)}_setHoverData(e){var t;null===(t=this._visibleData)||void 0===t||t.disposables.dispose(),this._visibleData=e,this._hoverVisibleKey.set(!!e),this._hover.containerDomNode.classList.toggle("hidden",!e)}_updateFont(){const{fontSize:e,lineHeight:t}=this._editor.getOption(50),i=this._hover.contentsDomNode;i.style.fontSize=`${e}px`,i.style.lineHeight=""+t/e;Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_updateContent(e){const t=this._hover.contentsDomNode;t.style.paddingBottom="",t.textContent="",t.appendChild(e)}_layoutContentWidget(){this._editor.layoutContentWidget(this),this._hover.onContentsChanged()}_updateMaxDimensions(){const e=Math.max(this._editor.getLayoutInfo().height/4,250,g._lastDimensions.height),t=Math.max(.66*this._editor.getLayoutInfo().width,500,g._lastDimensions.width);this._setHoverWidgetMaxDimensions(t,e)}_render(e,t){this._setHoverData(t),this._updateFont(),this._updateContent(e),this._updateMaxDimensions(),this.onContentsChanged(),this._editor.render()}getPosition(){var e;return this._visibleData?{position:this._visibleData.showAtPosition,secondaryPosition:this._visibleData.showAtSecondaryPosition,positionAffinity:this._visibleData.isBeforeContent?3:void 0,preference:[null!==(e=this._positionPreference)&&void 0!==e?e:1]}:null}showAt(e,t){var i,o,n,s;if(!this._editor||!this._editor.hasModel())return;this._render(e,t);const r=c.wn(this._hover.containerDomNode),a=t.showAtPosition;this._positionPreference=null!==(i=this._findPositionPreference(r,a))&&void 0!==i?i:1,this.onContentsChanged(),t.stoleFocus&&this._hover.containerDomNode.focus(),null===(o=t.colorPicker)||void 0===o||o.layout();const h=this._hover.containerDomNode.ownerDocument.activeElement===this._hover.containerDomNode&&(0,f.uX)(!0===this._configurationService.getValue("accessibility.verbosity.hover")&&this._accessibilityService.isScreenReaderOptimized(),null!==(s=null===(n=this._keybindingService.lookupKeybinding("editor.action.accessibleView"))||void 0===n?void 0:n.getAriaLabel())&&void 0!==s?s:"");h&&(this._hover.contentsDomNode.ariaLabel=this._hover.contentsDomNode.textContent+", "+h)}hide(){if(!this._visibleData)return;const e=this._visibleData.stoleFocus||this._hoverFocusedKey.get();this._setHoverData(void 0),this._resizableNode.maxSize=new c.Ro(1/0,1/0),this._resizableNode.clearSashHoverState(),this._hoverFocusedKey.set(!1),this._editor.layoutContentWidget(this),e&&this._editor.focus()}_removeConstraintsRenderNormally(){const e=this._editor.getLayoutInfo();this._resizableNode.layout(e.height,e.width),this._setHoverWidgetDimensions("auto","auto")}setMinimumDimensions(e){this._minimumSize=new c.Ro(Math.max(this._minimumSize.width,e.width),Math.max(this._minimumSize.height,e.height)),this._updateMinimumWidth()}_updateMinimumWidth(){const e=void 0===this._contentWidth?this._minimumSize.width:Math.min(this._contentWidth,this._minimumSize.width);this._resizableNode.minSize=new c.Ro(e,this._minimumSize.height)}onContentsChanged(){var e;this._removeConstraintsRenderNormally();const t=this._hover.containerDomNode;let i=c.wn(t),o=c.w(t);if(this._resizableNode.layout(i,o),this._setHoverWidgetDimensions(o,i),i=c.wn(t),o=c.w(t),this._contentWidth=o,this._updateMinimumWidth(),this._resizableNode.layout(i,o),null===(e=this._visibleData)||void 0===e?void 0:e.showAtPosition){const e=c.wn(this._hover.containerDomNode);this._positionPreference=this._findPositionPreference(e,this._visibleData.showAtPosition)}this._layoutContentWidget()}focus(){this._hover.containerDomNode.focus()}scrollUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e-t.lineHeight})}scrollDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._editor.getOption(50);this._hover.scrollbar.setScrollPosition({scrollTop:e+t.lineHeight})}scrollLeft(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e-30})}scrollRight(){const e=this._hover.scrollbar.getScrollPosition().scrollLeft;this._hover.scrollbar.setScrollPosition({scrollLeft:e+30})}pageUp(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e-t})}pageDown(){const e=this._hover.scrollbar.getScrollPosition().scrollTop,t=this._hover.scrollbar.getScrollDimensions().height;this._hover.scrollbar.setScrollPosition({scrollTop:e+t})}goToTop(){this._hover.scrollbar.setScrollPosition({scrollTop:0})}goToBottom(){this._hover.scrollbar.setScrollPosition({scrollTop:this._hover.scrollbar.getScrollDimensions().scrollHeight})}};function C(e,t,i,o,n,s){const r=i+n/2,a=o+s/2,h=Math.max(Math.abs(e-r)-n/2,0),c=Math.max(Math.abs(t-a)-s/2,0);return Math.sqrt(h*h+c*c)}y.ID="editor.contrib.resizableContentHoverWidget",y._lastDimensions=new c.Ro(0,0),y=g=b([w(1,v.i6),w(2,p.Ui),w(3,_.F),w(4,a.d)],y);var S=i(24314),D=i(54530),M=i(71204),N=i(17301),H=i(4669);class k{constructor(e,t,i){this.value=e,this.isComplete=t,this.hasLoadingMessage=i}}class L extends n.JT{constructor(e,t){super(),this._editor=e,this._computer=t,this._onResult=this._register(new H.Q5),this.onResult=this._onResult.event,this._firstWaitScheduler=this._register(new h.pY((()=>this._triggerAsyncComputation()),0)),this._secondWaitScheduler=this._register(new h.pY((()=>this._triggerSyncComputation()),0)),this._loadingMessageScheduler=this._register(new h.pY((()=>this._triggerLoadingMessage()),0)),this._state=0,this._asyncIterable=null,this._asyncIterableDone=!1,this._result=[]}dispose(){this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),super.dispose()}get _hoverTime(){return this._editor.getOption(60).delay}get _firstWaitTime(){return this._hoverTime/2}get _secondWaitTime(){return this._hoverTime-this._firstWaitTime}get _loadingMessageTime(){return 3*this._hoverTime}_setState(e,t=!0){this._state=e,t&&this._fireResult()}_triggerAsyncComputation(){this._setState(2),this._secondWaitScheduler.schedule(this._secondWaitTime),this._computer.computeAsync?(this._asyncIterableDone=!1,this._asyncIterable=(0,h.zS)((e=>this._computer.computeAsync(e))),(async()=>{try{for await(const e of this._asyncIterable)e&&(this._result.push(e),this._fireResult());this._asyncIterableDone=!0,3!==this._state&&4!==this._state||this._setState(0)}catch(e){(0,N.dL)(e)}})()):this._asyncIterableDone=!0}_triggerSyncComputation(){this._computer.computeSync&&(this._result=this._result.concat(this._computer.computeSync())),this._setState(this._asyncIterableDone?0:3)}_triggerLoadingMessage(){3===this._state&&this._setState(4)}_fireResult(){if(1===this._state||2===this._state)return;const e=0===this._state,t=4===this._state;this._onResult.fire(new k(this._result.slice(0),e,t))}start(e){if(0===e)0===this._state&&(this._setState(1),this._firstWaitScheduler.schedule(this._firstWaitTime),this._loadingMessageScheduler.schedule(this._loadingMessageTime));else switch(this._state){case 0:this._triggerAsyncComputation(),this._secondWaitScheduler.cancel(),this._triggerSyncComputation();break;case 2:this._secondWaitScheduler.cancel(),this._triggerSyncComputation()}}cancel(){this._firstWaitScheduler.cancel(),this._secondWaitScheduler.cancel(),this._loadingMessageScheduler.cancel(),this._asyncIterable&&(this._asyncIterable.cancel(),this._asyncIterable=null),this._result=[],this._setState(0,!1)}}var I=i(66520),R=i(22374),P=i(51586),O=i(9488);class x{get anchor(){return this._anchor}set anchor(e){this._anchor=e}get shouldFocus(){return this._shouldFocus}set shouldFocus(e){this._shouldFocus=e}get source(){return this._source}set source(e){this._source=e}get insistOnKeepingHoverVisible(){return this._insistOnKeepingHoverVisible}set insistOnKeepingHoverVisible(e){this._insistOnKeepingHoverVisible=e}constructor(e,t){this._editor=e,this._participants=t,this._anchor=null,this._shouldFocus=!1,this._source=0,this._insistOnKeepingHoverVisible=!1}static _getLineDecorations(e,t){if(1!==t.type&&!t.supportsMarkerHover)return[];const i=e.getModel(),o=t.range.startLineNumber;if(o>i.getLineCount())return[];const n=i.getLineMaxColumn(o);return e.getLineDecorations(o).filter((e=>{if(e.options.isWholeLine)return!0;const i=e.range.startLineNumber===o?e.range.startColumn:1,s=e.range.endLineNumber===o?e.range.endColumn:n;if(e.options.showIfCollapsed){if(i>t.range.startColumn+1||t.range.endColumn-1>s)return!1}else if(i>t.range.startColumn||t.range.endColumn>s)return!1;return!0}))}computeAsync(e){const t=this._anchor;if(!this._editor.hasModel()||!t)return h.Aq.EMPTY;const i=x._getLineDecorations(this._editor,t);return h.Aq.merge(this._participants.map((o=>o.computeAsync?o.computeAsync(t,i,e):h.Aq.EMPTY)))}computeSync(){if(!this._editor.hasModel()||!this._anchor)return[];const e=x._getLineDecorations(this._editor,this._anchor);let t=[];for(const i of this._participants)t=t.concat(i.computeSync(this._anchor,e));return(0,O.kX)(t)}}class T{constructor(e,t,i){this.anchor=e,this.messages=t,this.isComplete=i}filter(e){const t=this.messages.filter((t=>t.isValidForHoverAnchor(e)));return t.length===this.messages.length?this:new A(this,this.anchor,t,this.isComplete)}}class A extends T{constructor(e,t,i,o){super(t,i,o),this.original=e}filter(e){return this.original.filter(e)}}class W{constructor(e,t,i,o,n,s,r,a,h,c){this.initialMousePosX=e,this.initialMousePosY=t,this.colorPicker=i,this.showAtPosition=o,this.showAtSecondaryPosition=n,this.preferAbove=s,this.stoleFocus=r,this.source=a,this.isBeforeContent=h,this.disposables=c,this.closestMouseDistance=void 0}}var V,F=i(33018),z=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},E=function(e,t){return function(i,o){t(i,o,e)}};let U=V=class extends n.JT{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._currentResult=null,this._onContentsChanged=this._register(new H.Q5),this.onContentsChanged=this._onContentsChanged.event,this._widget=this._register(this._instantiationService.createInstance(y,this._editor)),this._participants=[];for(const e of I.Ae.getAll()){const t=this._instantiationService.createInstance(e,this._editor);t instanceof R.D5&&!(t instanceof P.G)&&(this._markdownHoverParticipant=t),this._participants.push(t)}this._participants.sort(((e,t)=>e.hoverOrdinal-t.hoverOrdinal)),this._computer=new x(this._editor,this._participants),this._hoverOperation=this._register(new L(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{if(!this._computer.anchor)return;const t=e.hasLoadingMessage?this._addLoadingMessage(e.value):e.value;this._withResult(new T(this._computer.anchor,t,e.isComplete))}))),this._register(c.mu(this._widget.getDomNode(),"keydown",(e=>{e.equals(9)&&this.hide()}))),this._register(M.RW.onDidChange((()=>{this._widget.position&&this._currentResult&&this._setCurrentResult(this._currentResult)})))}_startShowingOrUpdateHover(e,t,i,o,n){if(!this._widget.position||!this._currentResult)return!!e&&(this._startHoverOperationIfNecessary(e,t,i,o,!1),!0);return this._editor.getOption(60).sticky&&n&&this._widget.isMouseGettingCloser(n.event.posx,n.event.posy)?(e&&this._startHoverOperationIfNecessary(e,t,i,o,!0),!0):e?!(!e||!this._currentResult.anchor.equals(e))||(e.canAdoptVisibleHover(this._currentResult.anchor,this._widget.position)?(this._setCurrentResult(this._currentResult.filter(e)),this._startHoverOperationIfNecessary(e,t,i,o,!1),!0):(this._setCurrentResult(null),this._startHoverOperationIfNecessary(e,t,i,o,!1),!0)):(this._setCurrentResult(null),!1)}_startHoverOperationIfNecessary(e,t,i,o,n){this._computer.anchor&&this._computer.anchor.equals(e)||(this._hoverOperation.cancel(),this._computer.anchor=e,this._computer.shouldFocus=o,this._computer.source=i,this._computer.insistOnKeepingHoverVisible=n,this._hoverOperation.start(t))}_setCurrentResult(e){this._currentResult!==e&&(e&&0===e.messages.length&&(e=null),this._currentResult=e,this._currentResult?this._renderMessages(this._currentResult.anchor,this._currentResult.messages):this._widget.hide())}_addLoadingMessage(e){if(this._computer.anchor)for(const t of this._participants)if(t.createLoadingMessage){const i=t.createLoadingMessage(this._computer.anchor);if(i)return e.slice(0).concat([i])}return e}_withResult(e){if(this._widget.position&&this._currentResult&&this._currentResult.isComplete){if(!e.isComplete)return;if(this._computer.insistOnKeepingHoverVisible&&0===e.messages.length)return}this._setCurrentResult(e)}_renderMessages(e,t){const{showAtPosition:i,showAtSecondaryPosition:o,highlightRange:s}=V.computeHoverRanges(this._editor,e.range,t),r=new n.SL,a=r.add(new F.m(this._keybindingService)),h=document.createDocumentFragment();let c=null;const d={fragment:h,statusBar:a,setColorPicker:e=>c=e,onContentsChanged:()=>this._doOnContentsChanged(),setMinimumDimensions:e=>this._widget.setMinimumDimensions(e),hide:()=>this.hide()};for(const e of this._participants){const i=t.filter((t=>t.owner===e));i.length>0&&r.add(e.renderHoverParts(d,i))}const l=t.some((e=>e.isBeforeContent));if(a.hasContent&&h.appendChild(a.hoverElement),h.hasChildNodes()){if(s){const e=this._editor.createDecorationsCollection();e.set([{range:s,options:V._DECORATION_OPTIONS}]),r.add((0,n.OF)((()=>{e.clear()})))}this._widget.showAt(h,new W(e.initialMousePosX,e.initialMousePosY,c,i,o,this._editor.getOption(60).above,this._computer.shouldFocus,this._computer.source,l,r))}else r.dispose()}_doOnContentsChanged(){this._onContentsChanged.fire(),this._widget.onContentsChanged()}static computeHoverRanges(e,t,i){let o=1;if(e.hasModel()){const i=e._getViewModel(),n=i.coordinatesConverter,s=n.convertModelRangeToViewRange(t),r=new l.L(s.startLineNumber,i.getLineMinColumn(s.startLineNumber));o=n.convertViewPositionToModelPosition(r).column}const n=t.startLineNumber;let s=t.startColumn,r=i[0].range,a=null;for(const e of i)r=S.e.plusRange(r,e.range),e.range.startLineNumber===n&&e.range.endLineNumber===n&&(s=Math.max(Math.min(s,e.range.startColumn),o)),e.forceShowAtRange&&(a=e.range);return{showAtPosition:a?a.getStartPosition():new l.L(n,t.startColumn),showAtSecondaryPosition:a?a.getStartPosition():new l.L(n,s),highlightRange:r}}showsOrWillShow(e){if(this._widget.isResizing)return!0;const t=[];for(const i of this._participants)if(i.suggestHoverAnchor){const o=i.suggestHoverAnchor(e);o&&t.push(o)}const i=e.target;if(6===i.type&&t.push(new I.Qj(0,i.range,e.event.posx,e.event.posy)),7===i.type){const o=this._editor.getOption(50).typicalHalfwidthCharacterWidth/2;!i.detail.isAfterLines&&"number"==typeof i.detail.horizontalDistanceToText&&i.detail.horizontalDistanceToText<o&&t.push(new I.Qj(0,i.range,e.event.posx,e.event.posy))}return 0===t.length?this._startShowingOrUpdateHover(null,0,0,!1,e):(t.sort(((e,t)=>t.priority-e.priority)),this._startShowingOrUpdateHover(t[0],0,0,!1,e))}startShowingAtRange(e,t,i,o){this._startShowingOrUpdateHover(new I.Qj(0,e,void 0,void 0),t,i,o,null)}async updateMarkdownHoverVerbosityLevel(e,t,i){var o;null===(o=this._markdownHoverParticipant)||void 0===o||o.updateMarkdownHoverVerbosityLevel(e,t,i)}markdownHoverContentAtIndex(e){var t,i;return null!==(i=null===(t=this._markdownHoverParticipant)||void 0===t?void 0:t.markdownHoverContentAtIndex(e))&&void 0!==i?i:""}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){var i,o;return null!==(o=null===(i=this._markdownHoverParticipant)||void 0===i?void 0:i.doesMarkdownHoverAtIndexSupportVerbosityAction(e,t))&&void 0!==o&&o}containsNode(e){return!!e&&this._widget.getDomNode().contains(e)}focus(){this._widget.focus()}scrollUp(){this._widget.scrollUp()}scrollDown(){this._widget.scrollDown()}scrollLeft(){this._widget.scrollLeft()}scrollRight(){this._widget.scrollRight()}pageUp(){this._widget.pageUp()}pageDown(){this._widget.pageDown()}goToTop(){this._widget.goToTop()}goToBottom(){this._widget.goToBottom()}hide(){this._computer.anchor=null,this._hoverOperation.cancel(),this._setCurrentResult(null)}get isColorPickerVisible(){return this._widget.isColorPickerVisible}get isVisibleFromKeyboard(){return this._widget.isVisibleFromKeyboard}get isVisible(){return this._widget.isVisible}get isFocused(){return this._widget.isFocused}get isResizing(){return this._widget.isResizing}get widget(){return this._widget}};U._DECORATION_OPTIONS=D.qx.register({description:"content-hover-highlight",className:"hoverHighlight"}),U=V=z([E(1,s.TG),E(2,a.d)],U);var q=i(72545),K=i(59365),Q=i(84973);class B{get lineNumber(){return this._lineNumber}set lineNumber(e){this._lineNumber=e}get lane(){return this._laneOrLine}set lane(e){this._laneOrLine=e}constructor(e){this._editor=e,this._lineNumber=-1,this._laneOrLine=Q.U.Center}computeSync(){var e,t;const i=e=>({value:e}),o=this._editor.getLineDecorations(this._lineNumber),n=[],s="lineNo"===this._laneOrLine;if(!o)return n;for(const r of o){const o=null!==(t=null===(e=r.options.glyphMargin)||void 0===e?void 0:e.position)&&void 0!==t?t:Q.U.Center;if(!s&&o!==this._laneOrLine)continue;const a=s?r.options.lineNumberHoverMessage:r.options.glyphMarginHoverMessage;a&&!(0,K.CP)(a)&&n.push(...(0,O._2)(a).map(i))}return n}}const j=c.$;class Y extends n.JT{constructor(e,t,i){super(),this._renderDisposeables=this._register(new n.SL),this._editor=e,this._isVisible=!1,this._messages=[],this._hover=this._register(new f.c8),this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible),this._markdownRenderer=this._register(new q.$({editor:this._editor},t,i)),this._computer=new B(this._editor),this._hoverOperation=this._register(new L(this._editor,this._computer)),this._register(this._hoverOperation.onResult((e=>{this._withResult(e.value)}))),this._register(this._editor.onDidChangeModelDecorations((()=>this._onModelDecorationsChanged()))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._updateFont()}))),this._editor.addOverlayWidget(this)}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return Y.ID}getDomNode(){return this._hover.containerDomNode}getPosition(){return null}_updateFont(){Array.prototype.slice.call(this._hover.contentsDomNode.getElementsByClassName("code")).forEach((e=>this._editor.applyFontInfo(e)))}_onModelDecorationsChanged(){this._isVisible&&(this._hoverOperation.cancel(),this._hoverOperation.start(0))}showsOrWillShow(e){const t=e.target;return 2===t.type&&t.detail.glyphMarginLane?(this._startShowingAt(t.position.lineNumber,t.detail.glyphMarginLane),!0):3===t.type&&(this._startShowingAt(t.position.lineNumber,"lineNo"),!0)}_startShowingAt(e,t){this._computer.lineNumber===e&&this._computer.lane===t||(this._hoverOperation.cancel(),this.hide(),this._computer.lineNumber=e,this._computer.lane=t,this._hoverOperation.start(0))}hide(){this._computer.lineNumber=-1,this._hoverOperation.cancel(),this._isVisible&&(this._isVisible=!1,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible))}_withResult(e){this._messages=e,this._messages.length>0?this._renderMessages(this._computer.lineNumber,this._messages):this.hide()}_renderMessages(e,t){this._renderDisposeables.clear();const i=document.createDocumentFragment();for(const e of t){const t=j("div.hover-row.markdown-hover"),o=c.R3(t,j("div.hover-contents")),n=this._renderDisposeables.add(this._markdownRenderer.render(e.value));o.appendChild(n.element),i.appendChild(t)}this._updateContents(i),this._showAt(e)}_updateContents(e){this._hover.contentsDomNode.textContent="",this._hover.contentsDomNode.appendChild(e),this._updateFont()}_showAt(e){this._isVisible||(this._isVisible=!0,this._hover.containerDomNode.classList.toggle("hidden",!this._isVisible));const t=this._editor.getLayoutInfo(),i=this._editor.getTopForLineNumber(e),o=this._editor.getScrollTop(),n=this._editor.getOption(67),s=i-o-(this._hover.containerDomNode.clientHeight-n)/2,r=t.glyphMarginLeft+t.glyphMarginWidth+("lineNo"===this._computer.lane?t.lineNumbersWidth:0);this._hover.containerDomNode.style.left=`${r}px`,this._hover.containerDomNode.style.top=`${Math.max(Math.round(s),0)}px`}}Y.ID="editor.contrib.modesGlyphHoverWidget";var G,$=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},J=function(e,t){return function(i,o){t(i,o,e)}};let X=G=class extends n.JT{constructor(e,t,i){super(),this._editor=e,this._instantiationService=t,this._keybindingService=i,this._onHoverContentsChanged=this._register(new H.Q5),this.shouldKeepOpenOnEditorMouseMoveOrLeave=!1,this._listenersStore=new n.SL,this._hoverState={mouseDown:!1,activatedByDecoratorClick:!1},this._reactToEditorMouseMoveRunner=this._register(new h.pY((()=>this._reactToEditorMouseMove(this._mouseMoveEvent)),0)),this._hookListeners(),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(60)&&(this._unhookListeners(),this._hookListeners())})))}static get(e){return e.getContribution(G.ID)}_hookListeners(){const e=this._editor.getOption(60);this._hoverSettings={enabled:e.enabled,sticky:e.sticky,hidingDelay:e.delay},e.enabled?(this._listenersStore.add(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._listenersStore.add(this._editor.onMouseUp((()=>this._onEditorMouseUp()))),this._listenersStore.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._listenersStore.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))):(this._listenersStore.add(this._editor.onMouseMove((e=>this._onEditorMouseMove(e)))),this._listenersStore.add(this._editor.onKeyDown((e=>this._onKeyDown(e))))),this._listenersStore.add(this._editor.onMouseLeave((e=>this._onEditorMouseLeave(e)))),this._listenersStore.add(this._editor.onDidChangeModel((()=>{this._cancelScheduler(),this._hideWidgets()}))),this._listenersStore.add(this._editor.onDidChangeModelContent((()=>this._cancelScheduler()))),this._listenersStore.add(this._editor.onDidScrollChange((e=>this._onEditorScrollChanged(e))))}_unhookListeners(){this._listenersStore.clear()}_cancelScheduler(){this._mouseMoveEvent=void 0,this._reactToEditorMouseMoveRunner.cancel()}_onEditorScrollChanged(e){(e.scrollTopChanged||e.scrollLeftChanged)&&this._hideWidgets()}_onEditorMouseDown(e){this._hoverState.mouseDown=!0;this._shouldNotHideCurrentHoverWidget(e)||this._hideWidgets()}_shouldNotHideCurrentHoverWidget(e){return!!(this._isMouseOnContentHoverWidget(e)||this._isMouseOnMarginHoverWidget(e)||this._isContentWidgetResizing())}_isMouseOnMarginHoverWidget(e){const t=e.target;return!!t&&(12===t.type&&t.detail===Y.ID)}_isMouseOnContentHoverWidget(e){const t=e.target;return!!t&&(9===t.type&&t.detail===y.ID)}_onEditorMouseUp(){this._hoverState.mouseDown=!1}_onEditorMouseLeave(e){if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;this._cancelScheduler();this._shouldNotHideCurrentHoverWidget(e)||this._hideWidgets()}_shouldNotRecomputeCurrentHoverWidget(e){const t=this._hoverSettings.sticky;return!!(((e,t)=>{const i=this._isMouseOnMarginHoverWidget(e);return t&&i})(e,t)||((e,t)=>{const i=this._isMouseOnContentHoverWidget(e);return t&&i})(e,t)||(e=>{var t;const i=this._isMouseOnContentHoverWidget(e),o=null===(t=this._contentWidget)||void 0===t?void 0:t.isColorPickerVisible;return i&&o})(e)||((e,t)=>{var i,o,n,s;return t&&(null===(i=this._contentWidget)||void 0===i?void 0:i.containsNode(null===(o=e.event.browserEvent.view)||void 0===o?void 0:o.document.activeElement))&&!(null===(s=null===(n=e.event.browserEvent.view)||void 0===n?void 0:n.getSelection())||void 0===s?void 0:s.isCollapsed)})(e,t))}_onEditorMouseMove(e){var t,i,o,n;if(this.shouldKeepOpenOnEditorMouseMoveOrLeave)return;if(this._mouseMoveEvent=e,(null===(t=this._contentWidget)||void 0===t?void 0:t.isFocused)||(null===(i=this._contentWidget)||void 0===i?void 0:i.isResizing))return;const s=this._hoverSettings.sticky;if(s&&(null===(o=this._contentWidget)||void 0===o?void 0:o.isVisibleFromKeyboard))return;if(this._shouldNotRecomputeCurrentHoverWidget(e))return void this._reactToEditorMouseMoveRunner.cancel();const r=this._hoverSettings.hidingDelay;(null===(n=this._contentWidget)||void 0===n?void 0:n.isVisible)&&s&&r>0?this._reactToEditorMouseMoveRunner.isScheduled()||this._reactToEditorMouseMoveRunner.schedule(r):this._reactToEditorMouseMove(e)}_reactToEditorMouseMove(e){var t;if(!e)return;const i=null===(t=e.target.element)||void 0===t?void 0:t.classList.contains("colorpicker-color-decoration"),o=this._editor.getOption(148),n=this._hoverSettings.enabled,s=this._hoverState.activatedByDecoratorClick;if(i&&("click"===o&&!s||"hover"===o&&!n||"clickAndHover"===o&&!n&&!s)||!i&&!n&&!s)return void this._hideWidgets();if(this._tryShowHoverWidget(e,0))return;this._tryShowHoverWidget(e,1)||this._hideWidgets()}_tryShowHoverWidget(e,t){const i=this._getOrCreateContentWidget(),o=this._getOrCreateGlyphWidget();let n,s;switch(t){case 0:n=i,s=o;break;case 1:n=o,s=i;break;default:throw new Error(`HoverWidgetType ${t} is unrecognized`)}const r=n.showsOrWillShow(e);return r&&s.hide(),r}_onKeyDown(e){var t;if(!this._editor.hasModel())return;const i=this._keybindingService.softDispatch(e,this._editor.getDomNode()),n=1===i.kind||2===i.kind&&(i.commandId===o.s9||i.commandId===o.Gd||i.commandId===o.m)&&(null===(t=this._contentWidget)||void 0===t?void 0:t.isVisible);5===e.keyCode||6===e.keyCode||57===e.keyCode||4===e.keyCode||n||this._hideWidgets()}_hideWidgets(){var e,t,i;this._hoverState.mouseDown&&(null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible)||r.QG.dropDownVisible||(this._hoverState.activatedByDecoratorClick=!1,null===(t=this._glyphWidget)||void 0===t||t.hide(),null===(i=this._contentWidget)||void 0===i||i.hide())}_getOrCreateContentWidget(){return this._contentWidget||(this._contentWidget=this._instantiationService.createInstance(U,this._editor),this._listenersStore.add(this._contentWidget.onContentsChanged((()=>this._onHoverContentsChanged.fire())))),this._contentWidget}_getOrCreateGlyphWidget(){return this._glyphWidget||(this._glyphWidget=this._instantiationService.createInstance(Y,this._editor)),this._glyphWidget}showContentHover(e,t,i,o,n=!1){this._hoverState.activatedByDecoratorClick=n,this._getOrCreateContentWidget().startShowingAtRange(e,t,i,o)}_isContentWidgetResizing(){var e;return(null===(e=this._contentWidget)||void 0===e?void 0:e.widget.isResizing)||!1}markdownHoverContentAtIndex(e){return this._getOrCreateContentWidget().markdownHoverContentAtIndex(e)}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){return this._getOrCreateContentWidget().doesMarkdownHoverAtIndexSupportVerbosityAction(e,t)}updateMarkdownHoverVerbosityLevel(e,t,i){this._getOrCreateContentWidget().updateMarkdownHoverVerbosityLevel(e,t,i)}focus(){var e;null===(e=this._contentWidget)||void 0===e||e.focus()}scrollUp(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollUp()}scrollDown(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollDown()}scrollLeft(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollLeft()}scrollRight(){var e;null===(e=this._contentWidget)||void 0===e||e.scrollRight()}pageUp(){var e;null===(e=this._contentWidget)||void 0===e||e.pageUp()}pageDown(){var e;null===(e=this._contentWidget)||void 0===e||e.pageDown()}goToTop(){var e;null===(e=this._contentWidget)||void 0===e||e.goToTop()}goToBottom(){var e;null===(e=this._contentWidget)||void 0===e||e.goToBottom()}get isColorPickerVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isColorPickerVisible}get isHoverVisible(){var e;return null===(e=this._contentWidget)||void 0===e?void 0:e.isVisible}dispose(){var e,t;super.dispose(),this._unhookListeners(),this._listenersStore.dispose(),null===(e=this._glyphWidget)||void 0===e||e.dispose(),null===(t=this._contentWidget)||void 0===t||t.dispose()}};X.ID="editor.contrib.hover",X=G=$([J(1,s.TG),J(2,a.d)],X)},66520:(e,t,i)=>{i.d(t,{Ae:()=>s,Qj:()=>o,YM:()=>n});class o{constructor(e,t,i,o){this.priority=e,this.range=t,this.initialMousePosX=i,this.initialMousePosY=o,this.type=1}equals(e){return 1===e.type&&this.range.equalsRange(e.range)}canAdoptVisibleHover(e,t){return 1===e.type&&t.lineNumber===this.range.startLineNumber}}class n{constructor(e,t,i,o,n,s){this.priority=e,this.owner=t,this.range=i,this.initialMousePosX=o,this.initialMousePosY=n,this.supportsMarkerHover=s,this.type=2}equals(e){return 2===e.type&&this.owner===e.owner}canAdoptVisibleHover(e,t){return 2===e.type&&this.owner===e.owner}}const s=new class{constructor(){this._participants=[]}register(e){this._participants.push(e)}getAll(){return this._participants}}},22374:(e,t,i)=>{i.d(t,{D5:()=>O,c:()=>T,hU:()=>R});var o=i(65321),n=i(9488),s=i(71050),r=i(59365),a=i(5976),h=i(72545),c=i(18987),d=i(24314),l=i(72042),u=i(63580),g=i(33108),v=i(50988),p=i(71922),_=i(71204),m=i(59554),f=i(32429),b=i(25670),w=i(17301),y=i(91847),C=i(30986),S=i(31543),D=i(15393),M=i(41095),N=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},H=function(e,t){return function(i,o){t(i,o,e)}};const k=o.$,L=(0,m.q5)("hover-increase-verbosity",f.l.add,u.NC("increaseHoverVerbosity","Icon for increaseing hover verbosity.")),I=(0,m.q5)("hover-decrease-verbosity",f.l.remove,u.NC("decreaseHoverVerbosity","Icon for decreasing hover verbosity."));class R{constructor(e,t,i,o,n,s=void 0){this.owner=e,this.range=t,this.contents=i,this.isBeforeContent=o,this.ordinal=n,this.source=s}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}class P{constructor(e,t,i){this.hover=e,this.hoverProvider=t,this.hoverPosition=i}supportsVerbosityAction(e){var t,i;switch(e){case _.bq.Increase:return null!==(t=this.hover.canIncreaseVerbosity)&&void 0!==t&&t;case _.bq.Decrease:return null!==(i=this.hover.canDecreaseVerbosity)&&void 0!==i&&i}}}let O=class{constructor(e,t,i,o,n,s,r){this._editor=e,this._languageService=t,this._openerService=i,this._configurationService=o,this._languageFeaturesService=n,this._keybindingService=s,this._hoverService=r,this.hoverOrdinal=3}createLoadingMessage(e){return new R(this,e.range,[(new r.W5).appendText(u.NC("modesContentHover.loading","Loading..."))],!1,2e3)}computeSync(e,t){if(!this._editor.hasModel()||1!==e.type)return[];const i=this._editor.getModel(),o=e.range.startLineNumber,s=i.getLineMaxColumn(o),a=[];let h=1e3;const c=i.getLineLength(o),l=i.getLanguageIdAtPosition(e.range.startLineNumber,e.range.startColumn),g=this._editor.getOption(117),v=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:l});let p=!1;g>=0&&c>g&&e.range.startColumn>=g&&(p=!0,a.push(new R(this,e.range,[{value:u.NC("stopped rendering","Rendering paused for long line for performance reasons. This can be configured via `editor.stopRenderingLineAfter`.")}],!1,h++))),!p&&"number"==typeof v&&c>=v&&a.push(new R(this,e.range,[{value:u.NC("too many characters","Tokenization is skipped for long lines for performance reasons. This can be configured via `editor.maxTokenizationLineLength`.")}],!1,h++));let _=!1;for(const i of t){const t=i.range.startLineNumber===o?i.range.startColumn:1,c=i.range.endLineNumber===o?i.range.endColumn:s,l=i.options.hoverMessage;if(!l||(0,r.CP)(l))continue;i.options.beforeContentClassName&&(_=!0);const u=new d.e(e.range.startLineNumber,t,e.range.startLineNumber,c);a.push(new R(this,u,(0,n._2)(l),_,h++))}return a}computeAsync(e,t,i){if(!this._editor.hasModel()||1!==e.type)return D.Aq.EMPTY;const o=this._editor.getModel(),n=this._languageFeaturesService.hoverProvider;if(!n.has(o))return D.Aq.EMPTY;return this._getMarkdownHovers(n,o,e,i)}_getMarkdownHovers(e,t,i,o){const n=i.range.getStartPosition();return(0,M.OP)(e,t,n,o).filter((e=>!(0,r.CP)(e.hover.contents))).map((e=>{const t=e.hover.range?d.e.lift(e.hover.range):i.range,o=new P(e.hover,e.provider,n);return new R(this,t,e.hover.contents,!1,e.ordinal,o)}))}renderHoverParts(e,t){return this._renderedHoverParts=new x(t,e.fragment,this._editor,this._languageService,this._openerService,this._keybindingService,this._hoverService,this._configurationService,e.onContentsChanged),this._renderedHoverParts}markdownHoverContentAtIndex(e){var t,i;return null!==(i=null===(t=this._renderedHoverParts)||void 0===t?void 0:t.markdownHoverContentAtIndex(e))&&void 0!==i?i:""}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){var i,o;return null!==(o=null===(i=this._renderedHoverParts)||void 0===i?void 0:i.doesMarkdownHoverAtIndexSupportVerbosityAction(e,t))&&void 0!==o&&o}updateMarkdownHoverVerbosityLevel(e,t,i){var o;null===(o=this._renderedHoverParts)||void 0===o||o.updateMarkdownHoverPartVerbosityLevel(e,t,i)}};O=N([H(1,l.O),H(2,v.v),H(3,g.Ui),H(4,p.p),H(5,y.d),H(6,S.Bs)],O);class x extends a.JT{constructor(e,t,i,o,n,s,r,h,c){super(),this._editor=i,this._languageService=o,this._openerService=n,this._keybindingService=s,this._hoverService=r,this._configurationService=h,this._onFinishedRendering=c,this._focusedHoverPartIndex=-1,this._ongoingHoverOperations=new Map,this._renderedHoverParts=this._renderHoverParts(e,t,this._onFinishedRendering),this._register((0,a.OF)((()=>{this._renderedHoverParts.forEach((e=>{e.disposables.dispose()}))}))),this._register((0,a.OF)((()=>{this._ongoingHoverOperations.forEach((e=>{e.tokenSource.dispose(!0)}))})))}_renderHoverParts(e,t,i){return e.sort((0,n.tT)((e=>e.ordinal),n.fv)),e.map(((e,o)=>{const n=this._renderHoverPart(o,e.contents,e.source,i);return t.appendChild(n.renderedMarkdown),n}))}_renderHoverPart(e,t,i,n){const{renderedMarkdown:s,disposables:r}=this._renderMarkdownContent(t,n);if(!i)return{renderedMarkdown:s,disposables:r};const a=i.supportsVerbosityAction(_.bq.Increase),h=i.supportsVerbosityAction(_.bq.Decrease);if(!a&&!h)return{renderedMarkdown:s,disposables:r,hoverSource:i};const c=k("div.verbosity-actions");return s.prepend(c),r.add(this._renderHoverExpansionAction(c,_.bq.Increase,a)),r.add(this._renderHoverExpansionAction(c,_.bq.Decrease,h)),this._register(o.nm(s,o.tw.FOCUS_IN,(t=>{t.stopPropagation(),this._focusedHoverPartIndex=e}))),this._register(o.nm(s,o.tw.FOCUS_OUT,(e=>{e.stopPropagation(),this._focusedHoverPartIndex=-1}))),{renderedMarkdown:s,disposables:r,hoverSource:i}}_renderMarkdownContent(e,t){const i=k("div.hover-row");i.tabIndex=0;const o=k("div.hover-row-contents");i.appendChild(o);const n=new a.SL;return n.add(A(this._editor,o,e,this._languageService,this._openerService,t)),{renderedMarkdown:i,disposables:n}}_renderHoverExpansionAction(e,t,i){const n=new a.SL,s=t===_.bq.Increase,r=o.R3(e,k(b.k.asCSSSelector(s?L:I)));r.tabIndex=0;const h=new S.mQ("mouse",!1,{target:e,position:{hoverPosition:0}},this._configurationService,this._hoverService);if(n.add(this._hoverService.setupUpdatableHover(h,r,function(e,t){switch(t){case _.bq.Increase:{const t=e.lookupKeybinding(c.Gd);return t?u.NC("increaseVerbosityWithKb","Increase Hover Verbosity ({0})",t.getLabel()):u.NC("increaseVerbosity","Increase Hover Verbosity")}case _.bq.Decrease:{const t=e.lookupKeybinding(c.m);return t?u.NC("decreaseVerbosityWithKb","Decrease Hover Verbosity ({0})",t.getLabel()):u.NC("decreaseVerbosity","Decrease Hover Verbosity")}}}(this._keybindingService,t))),!i)return r.classList.add("disabled"),n;r.classList.add("enabled");const d=()=>this.updateMarkdownHoverPartVerbosityLevel(t);return n.add(new C.R0(r,d)),n.add(new C.rb(r,d,[3,10])),n}async updateMarkdownHoverPartVerbosityLevel(e,t=-1,i=!0){var o;const n=this._editor.getModel();if(!n)return;const s=-1!==t?t:this._focusedHoverPartIndex,r=this._getRenderedHoverPartAtIndex(s);if(!r||!(null===(o=r.hoverSource)||void 0===o?void 0:o.supportsVerbosityAction(e)))return;const a=r.hoverSource,h=await this._fetchHover(a,n,e);if(!h)return;const c=new P(h,a.hoverProvider,a.hoverPosition),d=this._renderHoverPart(s,h.contents,c,this._onFinishedRendering);this._replaceRenderedHoverPartAtIndex(s,d),i&&this._focusOnHoverPartWithIndex(s),this._onFinishedRendering()}markdownHoverContentAtIndex(e){var t;const i=this._getRenderedHoverPartAtIndex(e);return null!==(t=null==i?void 0:i.renderedMarkdown.innerText)&&void 0!==t?t:""}doesMarkdownHoverAtIndexSupportVerbosityAction(e,t){var i;const o=this._getRenderedHoverPartAtIndex(e);return!(!o||!(null===(i=o.hoverSource)||void 0===i?void 0:i.supportsVerbosityAction(t)))}async _fetchHover(e,t,i){let o=i===_.bq.Increase?1:-1;const n=e.hoverProvider,r=this._ongoingHoverOperations.get(n);r&&(r.tokenSource.cancel(),o+=r.verbosityDelta);const a=new s.AU;this._ongoingHoverOperations.set(n,{verbosityDelta:o,tokenSource:a});const h={verbosityRequest:{verbosityDelta:o,previousHover:e.hover}};let c;try{c=await Promise.resolve(n.provideHover(t,e.hoverPosition,a.token,h))}catch(e){(0,w.Cp)(e)}return a.dispose(),this._ongoingHoverOperations.delete(n),c}_replaceRenderedHoverPartAtIndex(e,t){if(e>=this._renderHoverParts.length||e<0)return;const i=this._renderedHoverParts[e];i.renderedMarkdown.replaceWith(t.renderedMarkdown),i.disposables.dispose(),this._renderedHoverParts[e]=t}_focusOnHoverPartWithIndex(e){this._renderedHoverParts[e].renderedMarkdown.focus()}_getRenderedHoverPartAtIndex(e){return this._renderedHoverParts[e]}}function T(e,t,i,o,s){t.sort((0,n.tT)((e=>e.ordinal),n.fv));const r=new a.SL;for(const n of t)r.add(A(i,e.fragment,n.contents,o,s,e.onContentsChanged));return r}function A(e,t,i,n,s,c){const d=new a.SL;for(const a of i){if((0,r.CP)(a))continue;const i=k("div.markdown-hover"),l=o.R3(i,k("div.hover-contents")),u=d.add(new h.$({editor:e},n,s));d.add(u.onDidRenderAsync((()=>{l.className="hover-contents code-hover-contents",c()})));const g=d.add(u.render(a));l.appendChild(g.element),t.appendChild(i)}return d}},56353:(e,t,i)=>{var o=i(15393),n=i(17301),s=i(16467),r=i(16830),a=i(24314),h=i(3860),c=i(29102),d=i(54530),l=i(85215),u=i(63580);class g{constructor(e,t,i){this._editRange=e,this._originalSelection=t,this._text=i}getEditOperations(e,t){t.addTrackedEditOperation(this._editRange,this._text)}computeCursorState(e,t){const i=t.getInverseEditOperations()[0].range;return this._originalSelection.isEmpty()?new h.Y(i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn),i.endLineNumber,Math.min(this._originalSelection.positionColumn,i.endColumn)):new h.Y(i.endLineNumber,i.endColumn-this._text.length,i.endLineNumber,i.endColumn)}}var v,p=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,o){t(i,o,e)}};let m=v=class{static get(e){return e.getContribution(v.ID)}constructor(e,t){this.editor=e,this.editorWorkerService=t,this.decorations=this.editor.createDecorationsCollection()}dispose(){}run(e,t){var i;null===(i=this.currentRequest)||void 0===i||i.cancel();const r=this.editor.getSelection(),c=this.editor.getModel();if(!c||!r)return;let d=r;if(d.startLineNumber!==d.endLineNumber)return;const l=new s.yy(this.editor,5),u=c.uri;return this.editorWorkerService.canNavigateValueSet(u)?(this.currentRequest=(0,o.PG)((e=>this.editorWorkerService.navigateValueSet(u,d,t))),this.currentRequest.then((t=>{var i;if(!t||!t.range||!t.value)return;if(!l.validate(this.editor))return;const s=a.e.lift(t.range);let r=t.range;const c=t.value.length-(d.endColumn-d.startColumn);r={startLineNumber:r.startLineNumber,startColumn:r.startColumn,endLineNumber:r.endLineNumber,endColumn:r.startColumn+t.value.length},c>1&&(d=new h.Y(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn+c-1));const u=new g(s,d,t.value);this.editor.pushUndoStop(),this.editor.executeCommand(e,u),this.editor.pushUndoStop(),this.decorations.set([{range:r,options:v.DECORATION}]),null===(i=this.decorationRemover)||void 0===i||i.cancel(),this.decorationRemover=(0,o.Vs)(350),this.decorationRemover.then((()=>this.decorations.clear())).catch(n.dL)})).catch(n.dL)):Promise.resolve(void 0)}};m.ID="editor.contrib.inPlaceReplaceController",m.DECORATION=d.qx.register({description:"in-place-replace",className:"valueSetReplacement"}),m=v=p([_(1,l.p)],m);class f extends r.R6{constructor(){super({id:"editor.action.inPlaceReplace.up",label:u.NC("InPlaceReplaceAction.previous.label","Replace with Previous Value"),alias:"Replace with Previous Value",precondition:c.u.writable,kbOpts:{kbExpr:c.u.editorTextFocus,primary:3159,weight:100}})}run(e,t){const i=m.get(t);return i?i.run(this.id,!1):Promise.resolve(void 0)}}class b extends r.R6{constructor(){super({id:"editor.action.inPlaceReplace.down",label:u.NC("InPlaceReplaceAction.next.label","Replace with Next Value"),alias:"Replace with Next Value",precondition:c.u.writable,kbOpts:{kbExpr:c.u.editorTextFocus,primary:3161,weight:100}})}run(e,t){const i=m.get(t);return i?i.run(this.id,!0):Promise.resolve(void 0)}}(0,r._K)(m.ID,m,4),(0,r.Qr)(f),(0,r.Qr)(b)},65395:(e,t,i)=>{var o=i(5976),n=i(97295),s=i(16830),r=i(10291),a=i(24314),h=i(29102),c=i(51381),d=i(73733),l=i(11924),u=i(63580),g=i(41157),v=i(75383),p=i(69386),_=i(83158),m=i(3860),f=i(85838);function b(e,t,i,o){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return[];const s=t.getLanguageConfiguration(e.getLanguageId()).indentRulesSupport;if(!s)return[];const a=new f.sW(e,s,t);for(o=Math.min(o,e.getLineCount());i<=o&&a.shouldIgnore(i);)i++;if(i>o-1)return[];const{tabSize:h,indentSize:c,insertSpaces:d}=e.getOptions(),l=(e,t)=>(t=t||1,r.U.shiftIndent(e,e.length+t,h,c,d)),u=(e,t)=>(t=t||1,r.U.unshiftIndent(e,e.length+t,h,c,d)),g=[],v=e.getLineContent(i);let b=n.V8(v),y=b;a.shouldIncrease(i)?(y=l(y),b=l(b)):a.shouldIndentNextLine(i)&&(y=l(y));for(let t=++i;t<=o;t++){if(w(e,t))continue;const i=e.getLineContent(t),o=n.V8(i),s=y;a.shouldDecrease(t,s)&&(y=u(y),b=u(b)),o!==y&&g.push(p.h.replaceMove(new m.Y(t,1,t,o.length+1),(0,_.x)(y,c,d))),a.shouldIgnore(t)||(a.shouldIncrease(t,s)?(b=l(b),y=b):y=a.shouldIndentNextLine(t,s)?l(y):b)}return g}function w(e,t){if(!e.tokenization.isCheapToTokenize(t))return!1;return 2===e.tokenization.getLineTokens(t).getStandardTokenType(0)}var y=i(77378),C=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,o){t(i,o,e)}};class D extends s.R6{constructor(){super({id:D.ID,label:u.NC("indentationToSpaces","Convert Indentation to Spaces"),alias:"Convert Indentation to Spaces",precondition:h.u.writable,metadata:{description:u.vv("indentationToSpacesDescription","Convert the tab indentation to spaces.")}})}run(e,t){const i=t.getModel();if(!i)return;const o=i.getOptions(),n=t.getSelection();if(!n)return;const s=new A(n,o.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!0})}}D.ID="editor.action.indentationToSpaces";class M extends s.R6{constructor(){super({id:M.ID,label:u.NC("indentationToTabs","Convert Indentation to Tabs"),alias:"Convert Indentation to Tabs",precondition:h.u.writable,metadata:{description:u.vv("indentationToTabsDescription","Convert the spaces indentation to tabs.")}})}run(e,t){const i=t.getModel();if(!i)return;const o=i.getOptions(),n=t.getSelection();if(!n)return;const s=new W(n,o.tabSize);t.pushUndoStop(),t.executeCommands(this.id,[s]),t.pushUndoStop(),i.updateOptions({insertSpaces:!1})}}M.ID="editor.action.indentationToTabs";class N extends s.R6{constructor(e,t,i){super(i),this.insertSpaces=e,this.displaySizeOnly=t}run(e,t){const i=e.get(g.eJ),o=e.get(d.q),n=t.getModel();if(!n)return;const s=o.getCreationOptions(n.getLanguageId(),n.uri,n.isForSimpleWidget),r=n.getOptions(),a=[1,2,3,4,5,6,7,8].map((e=>({id:e.toString(),label:e.toString(),description:e===s.tabSize&&e===r.tabSize?u.NC("configuredTabSize","Configured Tab Size"):e===s.tabSize?u.NC("defaultTabSize","Default Tab Size"):e===r.tabSize?u.NC("currentTabSize","Current Tab Size"):void 0}))),h=Math.min(n.getOptions().tabSize-1,7);setTimeout((()=>{i.pick(a,{placeHolder:u.NC({key:"selectTabWidth",comment:["Tab corresponds to the tab key"]},"Select Tab Size for Current File"),activeItem:a[h]}).then((e=>{if(e&&n&&!n.isDisposed()){const t=parseInt(e.label,10);this.displaySizeOnly?n.updateOptions({tabSize:t}):n.updateOptions({tabSize:t,indentSize:t,insertSpaces:this.insertSpaces})}}))}),50)}}class H extends N{constructor(){super(!1,!1,{id:H.ID,label:u.NC("indentUsingTabs","Indent Using Tabs"),alias:"Indent Using Tabs",precondition:void 0,metadata:{description:u.vv("indentUsingTabsDescription","Use indentation with tabs.")}})}}H.ID="editor.action.indentUsingTabs";class k extends N{constructor(){super(!0,!1,{id:k.ID,label:u.NC("indentUsingSpaces","Indent Using Spaces"),alias:"Indent Using Spaces",precondition:void 0,metadata:{description:u.vv("indentUsingSpacesDescription","Use indentation with spaces.")}})}}k.ID="editor.action.indentUsingSpaces";class L extends N{constructor(){super(!0,!0,{id:L.ID,label:u.NC("changeTabDisplaySize","Change Tab Display Size"),alias:"Change Tab Display Size",precondition:void 0,metadata:{description:u.vv("changeTabDisplaySizeDescription","Change the space size equivalent of the tab.")}})}}L.ID="editor.action.changeTabDisplaySize";class I extends s.R6{constructor(){super({id:I.ID,label:u.NC("detectIndentation","Detect Indentation from Content"),alias:"Detect Indentation from Content",precondition:void 0,metadata:{description:u.vv("detectIndentationDescription","Detect the indentation from content.")}})}run(e,t){const i=e.get(d.q),o=t.getModel();if(!o)return;const n=i.getCreationOptions(o.getLanguageId(),o.uri,o.isForSimpleWidget);o.detectIndentation(n.insertSpaces,n.tabSize)}}I.ID="editor.action.detectIndentation";class R extends s.R6{constructor(){super({id:"editor.action.reindentlines",label:u.NC("editor.reindentlines","Reindent Lines"),alias:"Reindent Lines",precondition:h.u.writable,metadata:{description:u.vv("editor.reindentlinesDescription","Reindent the lines of the editor.")}})}run(e,t){const i=e.get(c.c_),o=t.getModel();if(!o)return;const n=b(o,i,1,o.getLineCount());n.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,n),t.pushUndoStop())}}class P extends s.R6{constructor(){super({id:"editor.action.reindentselectedlines",label:u.NC("editor.reindentselectedlines","Reindent Selected Lines"),alias:"Reindent Selected Lines",precondition:h.u.writable,metadata:{description:u.vv("editor.reindentselectedlinesDescription","Reindent the selected lines of the editor.")}})}run(e,t){const i=e.get(c.c_),o=t.getModel();if(!o)return;const n=t.getSelections();if(null===n)return;const s=[];for(const e of n){let t=e.startLineNumber,n=e.endLineNumber;if(t!==n&&1===e.endColumn&&n--,1===t){if(t===n)continue}else t--;const r=b(o,i,t,n);s.push(...r)}s.length>0&&(t.pushUndoStop(),t.executeEdits(this.id,s),t.pushUndoStop())}}class O{constructor(e,t){this._initialSelection=t,this._edits=[],this._selectionId=null;for(const t of e)t.range&&"string"==typeof t.text&&this._edits.push(t)}getEditOperations(e,t){for(const e of this._edits)t.addEditOperation(a.e.lift(e.range),e.text);let i=!1;Array.isArray(this._edits)&&1===this._edits.length&&this._initialSelection.isEmpty()&&(this._edits[0].range.startColumn===this._initialSelection.endColumn&&this._edits[0].range.startLineNumber===this._initialSelection.endLineNumber?(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!0)):this._edits[0].range.endColumn===this._initialSelection.startColumn&&this._edits[0].range.endLineNumber===this._initialSelection.startLineNumber&&(i=!0,this._selectionId=t.trackSelection(this._initialSelection,!1))),i||(this._selectionId=t.trackSelection(this._initialSelection))}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}}let x=class{constructor(e,t){this.editor=e,this._languageConfigurationService=t,this.callOnDispose=new o.SL,this.callOnModel=new o.SL,this.callOnDispose.add(e.onDidChangeConfiguration((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModel((()=>this.update()))),this.callOnDispose.add(e.onDidChangeModelLanguage((()=>this.update())))}update(){this.callOnModel.clear(),this.editor.getOption(12)<4||this.editor.getOption(55)||this.editor.hasModel()&&this.callOnModel.add(this.editor.onDidPaste((({range:e})=>{this.trigger(e)})))}trigger(e){const t=this.editor.getSelections();if(null===t||t.length>1)return;const i=this.editor.getModel();if(!i)return;if(function(e,t){const i=t=>2===(0,y.e)(e,t);return i(t.getStartPosition())||i(t.getEndPosition())}(i,e))return;if(!i.tokenization.isCheapToTokenize(e.getStartPosition().lineNumber))return;const o=this.editor.getOption(12),{tabSize:s,indentSize:h,insertSpaces:c}=i.getOptions(),d=[],u={shiftIndent:e=>r.U.shiftIndent(e,e.length+1,s,h,c),unshiftIndent:e=>r.U.unshiftIndent(e,e.length+1,s,h,c)};let g=e.startLineNumber;for(;g<=e.endLineNumber&&this.shouldIgnoreLine(i,g);)g++;if(g>e.endLineNumber)return;let p=i.getLineContent(g);if(!/\S/.test(p.substring(0,e.startColumn-1))){const e=(0,v.n8)(o,i,i.getLanguageId(),g,u,this._languageConfigurationService);if(null!==e){const t=n.V8(p),o=l.Y(e,s);if(o!==l.Y(t,s)){const e=l.J(o,s,c);d.push({range:new a.e(g,1,g,t.length+1),text:e}),p=e+p.substr(t.length)}else{const e=(0,v.tI)(i,g,this._languageConfigurationService);if(0===e||8===e)return}}}const _=g;for(;g<e.endLineNumber&&!/\S/.test(i.getLineContent(g+1));)g++;if(g!==e.endLineNumber){const t={tokenization:{getLineTokens:e=>i.tokenization.getLineTokens(e),getLanguageId:()=>i.getLanguageId(),getLanguageIdAtPosition:(e,t)=>i.getLanguageIdAtPosition(e,t)},getLineContent:e=>e===_?p:i.getLineContent(e)},r=(0,v.n8)(o,t,i.getLanguageId(),g+1,u,this._languageConfigurationService);if(null!==r){const t=l.Y(r,s),o=l.Y(n.V8(i.getLineContent(g+1)),s);if(t!==o){const r=t-o;for(let t=g+1;t<=e.endLineNumber;t++){const e=i.getLineContent(t),o=n.V8(e),h=l.Y(o,s)+r,u=l.J(h,s,c);u!==o&&d.push({range:new a.e(t,1,t,o.length+1),text:u})}}}}if(d.length>0){this.editor.pushUndoStop();const e=new O(d,this.editor.getSelection());this.editor.executeCommand("autoIndentOnPaste",e),this.editor.pushUndoStop()}}shouldIgnoreLine(e,t){e.tokenization.forceTokenization(t);const i=e.getLineFirstNonWhitespaceColumn(t);if(0===i)return!0;const o=e.tokenization.getLineTokens(t);if(o.getCount()>0){const e=o.findTokenIndexAtOffset(i);if(e>=0&&1===o.getStandardTokenType(e))return!0}return!1}dispose(){this.callOnDispose.dispose(),this.callOnModel.dispose()}};function T(e,t,i,o){if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return;let n="";for(let e=0;e<i;e++)n+=" ";const s=new RegExp(n,"gi");for(let i=1,r=e.getLineCount();i<=r;i++){let r=e.getLineFirstNonWhitespaceColumn(i);if(0===r&&(r=e.getLineMaxColumn(i)),1===r)continue;const h=new a.e(i,1,i,r),c=e.getValueInRange(h),d=o?c.replace(/\t/gi,n):c.replace(s,"\t");t.addEditOperation(h,d)}}x.ID="editor.contrib.autoIndentOnPaste",x=C([S(1,c.c_)],x);class A{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),T(e,t,this.tabSize,!0)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}class W{constructor(e,t){this.selection=e,this.tabSize=t,this.selectionId=null}getEditOperations(e,t){this.selectionId=t.trackSelection(this.selection),T(e,t,this.tabSize,!1)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}}(0,s._K)(x.ID,x,2),(0,s.Qr)(D),(0,s.Qr)(M),(0,s.Qr)(H),(0,s.Qr)(k),(0,s.Qr)(L),(0,s.Qr)(I),(0,s.Qr)(R),(0,s.Qr)(P)},11924:(e,t,i)=>{function o(e,t){let i=0;for(let o=0;o<e.length;o++)"\t"===e.charAt(o)?i+=t:i++;return i}function n(e,t,i){e=e<0?0:e;let o="";if(!i){const i=Math.floor(e/t);e%=t;for(let e=0;e<i;e++)o+="\t"}for(let t=0;t<e;t++)o+=" ";return o}i.d(t,{J:()=>n,Y:()=>o})}}]);