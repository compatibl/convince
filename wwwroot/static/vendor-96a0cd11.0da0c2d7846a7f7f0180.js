"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[5157],{85729:(e,t,o)=>{var i=o(15393),n=o(17301),s=o(5976),r=o(43407),a=o(16830),l=o(64141),d=o(29102),c=o(71050),h=o(98401),u=o(70666),g=o(73733),m=o(94565),_=o(71922);class p{constructor(){this.lenses=[],this._disposables=new s.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const o of e.lenses)this.lenses.push({symbol:o,provider:t})}}async function C(e,t,o){const i=e.ordered(t),s=new Map,r=new p,a=i.map((async(e,i)=>{s.set(e,i);try{const i=await Promise.resolve(e.provideCodeLenses(t,o));i&&r.add(i,e)}catch(e){(0,n.Cp)(e)}}));return await Promise.all(a),r.lenses=r.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:s.get(e.provider)<s.get(t.provider)?-1:s.get(e.provider)>s.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),r}m.P.registerCommand("_executeCodeLensProvider",(function(e,...t){let[o,i]=t;(0,h.p_)(u.o.isUri(o)),(0,h.p_)("number"==typeof i||!i);const{codeLensProvider:r}=e.get(_.p),a=e.get(g.q).getModel(o);if(!a)throw(0,n.b1)();const l=[],d=new s.SL;return C(r,a,c.Ts.None).then((e=>{d.add(e);const t=[];for(const o of e.lenses)null==i||Boolean(o.symbol.command)?l.push(o.symbol):i-- >0&&o.provider.resolveCodeLens&&t.push(Promise.resolve(o.provider.resolveCodeLens(a,o.symbol,c.Ts.None)).then((e=>l.push(e||o.symbol))));return Promise.all(t)})).then((()=>l)).finally((()=>{setTimeout((()=>d.dispose()),100)}))}));var f=o(4669),b=o(43702),v=o(24314),L=o(65026),w=o(72065),S=o(52365),y=o(48906),D=o(65321),P=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},k=function(e,t){return function(o,i){t(o,i,e)}};const N=(0,w.yh)("ICodeLensCache");class x{constructor(e,t){this.lineCount=e,this.data=t}}let I=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new b.z6(20,.75);(0,D.se)(y.E,(()=>e.remove("codelens/cache",1)));const t="codelens/cache2",o=e.get(t,1,"{}");this._deserialize(o),f.ju.once(e.onWillSaveState)((o=>{o.reason===S.fk.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const o=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new p;i.add({lenses:o,dispose:()=>{}},this._fakeProvider);const n=new x(e.getLineCount(),i);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,o]of this._cache){const i=new Set;for(const e of o.data.lenses)i.add(e.symbol.range.startLineNumber);e[t]={lineCount:o.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const o=t[e],i=[];for(const e of o.lines)i.push({range:new v.e(e,1,e,11)});const n=new p;n.add({lenses:i,dispose(){}},this._fakeProvider),this._cache.set(e,new x(o.lineCount,n))}}catch(e){}}};I=P([k(0,S.Uy)],I),(0,L.z)(N,I,1);var M=o(56811),O=o(54530);class E{constructor(e,t,o){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class R{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+R._idPool++,this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const o=[];let i=!1;for(let t=0;t<e.length;t++){const n=e[t];if(n&&(i=!0,n.command)){const i=(0,M.T)(n.command.title.trim());if(n.command.id){const e="c"+R._idPool++;o.push(D.$("a",{id:e,title:n.command.tooltip,role:"button"},...i)),this._commands.set(e,n.command)}else o.push(D.$("span",{title:n.command.tooltip},...i));t+1<e.length&&o.push(D.$("span",void 0," | "))}}i?(D.mc(this._domNode,...o),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):D.mc(this._domNode,D.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}R._idPool=0;class T{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,o=t.length;e<o;e++)this._addDecorationsCallbacks[e](t[e])}}const F=O.qx.register({collapseOnReplaceEdit:!0,description:"codelens"});class A{constructor(e,t,o,i,n,s){let r;this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),o.addDecoration({range:e.symbol.range,options:F},(e=>this._decorationIds[t]=e)),r=r?v.e.plusRange(r,e.symbol.range):v.e.lift(e.symbol.range)})),this._viewZone=new E(r.startLineNumber-1,n,s),this._viewZoneId=i.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new R(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null==t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const o=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!(!o||v.e.isEmpty(i.range)!==o.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,o)=>{t.addDecoration({range:e.symbol.range,options:F},(e=>this._decorationIds[o]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const o=e.getDecorationRange(this._decorationIds[t]);o&&(this._data[t].symbol.range=o)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const o=e[t];if(o){const{symbol:e}=this._data[t];e.command=o.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var V=o(63580),H=o(59422),B=o(41157),W=o(88191),j=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},z=function(e,t){return function(o,i){t(o,i,e)}};let U=class{constructor(e,t,o,n,r,a){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=r,this._codeLensCache=a,this._disposables=new s.SL,this._localToDispose=new s.SL,this._lenses=[],this._oldCodeLensModels=new s.SL,this._provideCodeLensDebounce=o.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=o.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new i.pY((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&this._updateLensStyle(),e.hasChanged(17)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(67)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),o=this._editor.getOption(18),i=this._editor.getOption(50),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight",`${e}px`),n.setProperty("--vscode-editorCodeLens-fontSize",`${t}px`),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),o&&(n.setProperty("--vscode-editorCodeLens-fontFamily",o),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",l.hL.fontFamily)),this._editor.changeViewZones((t=>{for(const o of this._lenses)o.updateHeight(e,t)}))}_localDispose(){var e,t,o;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(o=this._currentCodeLensModel)||void 0===o||o.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&(0,i.Vg)((()=>{const o=this._codeLensCache.get(e);t===o&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4,this._localToDispose));for(const t of this._languageFeaturesService.codeLensProvider.all(e))if("function"==typeof t.onDidChange){const e=t.onDidChange((()=>o.schedule()));this._localToDispose.add(e)}const o=new i.pY((()=>{var t;const s=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,i.PG)((t=>C(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const i=this._provideCodeLensDebounce.update(e,Date.now()-s);o.delay=i,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),n.dL)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(o),this._localToDispose.add((0,s.OF)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{var e;this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=[];let i=-1;this._lenses.forEach((e=>{e.isValid()&&i!==e.getLineNumber()?(e.update(t),i=e.getLineNumber()):o.push(e)}));const n=new T;o.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),o.schedule(),this._resolveCodeLensesScheduler.cancel(),null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorText((()=>{o.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((()=>{o.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,s.OF)((()=>{if(this._editor.getModel()){const e=r.Z.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){const o=e.getCommand(t);if(o){this._commandService.executeCommand(o.id,...o.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),o.schedule()}_disposeAllLenses(e,t){const o=new T;for(const e of this._lenses)e.dispose(o,t);e&&o.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),o=[];let i;for(const n of e.lenses){const e=n.symbol.range.startLineNumber;e<1||e>t||(i&&i[i.length-1].symbol.range.startLineNumber===e?i.push(n):(i=[n],o.push(i)))}if(!o.length&&!this._lenses.length)return;const n=r.Z.capture(this._editor),s=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=new T;let n=0,r=0;for(;r<o.length&&n<this._lenses.length;){const e=o[r][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(i,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(o[r],i),r++,n++):(this._lenses.splice(n,0,new A(o[r],this._editor,i,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,r++)}for(;n<this._lenses.length;)this._lenses[n].dispose(i,t),this._lenses.splice(n,1);for(;r<o.length;)this._lenses.push(new A(o[r],this._editor,i,t,s.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;i.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const o=[],s=[];if(this._lenses.forEach((e=>{const i=e.computeIfNecessary(t);i&&(o.push(i),s.push(e))})),0===o.length)return;const r=Date.now(),a=(0,i.PG)((e=>{const i=o.map(((o,i)=>{const r=new Array(o.length),a=o.map(((o,i)=>o.symbol.command||"function"!=typeof o.provider.resolveCodeLens?(r[i]=o.symbol,Promise.resolve(void 0)):Promise.resolve(o.provider.resolveCodeLens(t,o.symbol,e)).then((e=>{r[i]=e}),n.Cp)));return Promise.all(a).then((()=>{e.isCancellationRequested||s[i].isDisposed()||s[i].updateCommands(r)}))}));return Promise.all(i)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.dL)(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}async getModel(){var e;return await this._getCodeLensModelPromise,await this._resolveCodeLensesPromise,(null===(e=this._currentCodeLensModel)||void 0===e?void 0:e.isDisposed)?void 0:this._currentCodeLensModel}};U.ID="css.editor.codeLens",U=j([z(1,_.p),z(2,W.A),z(3,m.H),z(4,H.lT),z(5,N)],U),(0,a._K)(U.ID,U,1),(0,a.Qr)(class extends a.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:d.u.hasCodeLensProvider,label:(0,V.NC)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}async run(e,t){if(!t.hasModel())return;const o=e.get(B.eJ),i=e.get(m.H),n=e.get(H.lT),s=t.getSelection().positionLineNumber,r=t.getContribution(U.ID);if(!r)return;const a=await r.getModel();if(!a)return;const l=[];for(const e of a.lenses)e.symbol.command&&e.symbol.range.startLineNumber===s&&l.push({label:e.symbol.command.title,command:e.symbol.command});if(0===l.length)return;const d=await o.pick(l,{canPickMany:!1,placeHolder:(0,V.NC)("placeHolder","Select a command")});if(!d)return;let c=d.command;if(a.isDisposed){const e=await r.getModel(),t=null==e?void 0:e.lenses.find((e=>{var t;return e.symbol.range.startLineNumber===s&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===c.title}));if(!t||!t.symbol.command)return;c=t.symbol.command}try{await i.executeCommand(c.id,...c.arguments||[])}catch(e){n.error(e)}}})},52640:(e,t,o)=>{o.d(t,{E:()=>u,R:()=>g});var i=o(71050),n=o(17301),s=o(70666),r=o(24314),a=o(73733),l=o(94565),d=o(71922),c=o(15418),h=o(33108);async function u(e,t,o,i=!0){return C(new m,e,t,o,i)}function g(e,t,o,i){return Promise.resolve(o.provideColorPresentations(e,t,i))}class m{constructor(){}async compute(e,t,o,i){const n=await e.provideDocumentColors(t,o);if(Array.isArray(n))for(const t of n)i.push({colorInfo:t,provider:e});return Array.isArray(n)}}class _{constructor(){}async compute(e,t,o,i){const n=await e.provideDocumentColors(t,o);if(Array.isArray(n))for(const e of n)i.push({range:e.range,color:[e.color.red,e.color.green,e.color.blue,e.color.alpha]});return Array.isArray(n)}}class p{constructor(e){this.colorInfo=e}async compute(e,t,o,n){const s=await e.provideColorPresentations(t,this.colorInfo,i.Ts.None);return Array.isArray(s)&&n.push(...s),Array.isArray(s)}}async function C(e,t,o,i,s){let r,a=!1;const l=[],d=t.ordered(o);for(let t=d.length-1;t>=0;t--){const s=d[t];if(s instanceof c.G)r=s;else try{await e.compute(s,o,i,l)&&(a=!0)}catch(e){(0,n.Cp)(e)}}return a?l:r&&s?(await e.compute(r,o,i,l),l):[]}function f(e,t){const{colorProvider:o}=e.get(d.p),i=e.get(a.q).getModel(t);if(!i)throw(0,n.b1)();return{model:i,colorProviderRegistry:o,isDefaultColorDecoratorsEnabled:e.get(h.Ui).getValue("editor.defaultColorDecorators",{resource:t})}}l.P.registerCommand("_executeDocumentColorProvider",(function(e,...t){const[o]=t;if(!(o instanceof s.o))throw(0,n.b1)();const{model:r,colorProviderRegistry:a,isDefaultColorDecoratorsEnabled:l}=f(e,o);return C(new _,a,r,i.Ts.None,l)})),l.P.registerCommand("_executeColorPresentationProvider",(function(e,...t){const[o,a]=t,{uri:l,range:d}=a;if(!(l instanceof s.o&&Array.isArray(o)&&4===o.length&&r.e.isIRange(d)))throw(0,n.b1)();const{model:c,colorProviderRegistry:h,isDefaultColorDecoratorsEnabled:u}=f(e,l),[g,m,_,b]=o;return C(new p({range:d,color:{red:g,green:m,blue:_,alpha:b}}),h,c,i.Ts.None,u)}))},46838:(e,t,o)=>{var i=o(5976),n=o(16830),s=o(24314),r=o(89431),a=o(65766),l=o(64410),d=o(66520);class c extends i.JT{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(148);if("click"!==t&&"clickAndHover"!==t)return;const o=e.target;if(6!==o.type)return;if(!o.detail.injectedText)return;if(o.detail.injectedText.options.attachedData!==r.Ak)return;if(!o.range)return;const i=this._editor.getContribution(l.c.ID);if(i&&!i.isColorPickerVisible){const e=new s.e(o.range.startLineNumber,o.range.startColumn+1,o.range.endLineNumber,o.range.endColumn+1);i.showContentHover(e,1,0,!1,!0)}}}c.ID="editor.contrib.colorContribution",(0,n._K)(c.ID,c,2),d.Ae.register(a.nh)},89431:(e,t,o)=>{o.d(t,{Ak:()=>L,if:()=>w});var i,n=o(15393),s=o(41264),r=o(17301),a=o(4669),l=o(5976),d=o(84013),c=o(97295),h=o(29994),u=o(16830),g=o(24314),m=o(54530),_=o(88191),p=o(71922),C=o(52640),f=o(33108),b=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},v=function(e,t){return function(o,i){t(o,i,e)}};const L=Object.create({});let w=i=class extends l.JT{constructor(e,t,o,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=o,this._localToDispose=this._register(new l.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new h.t7(this._editor),this._decoratorLimitReporter=new S,this._colorDecorationClassRefs=this._register(new l.SL),this._debounceInformation=n.for(o.colorProvider,"Document Colors",{min:i.RECOMPUTE_TIME}),this._register(e.onDidChangeModel((()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()}))),this._register(e.onDidChangeModelLanguage((()=>this.updateColors()))),this._register(o.colorProvider.onDidChange((()=>this.updateColors()))),this._register(e.onDidChangeConfiguration((e=>{const t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147);const o=t!==this._isColorDecoratorsEnabled||e.hasChanged(21),i=e.hasChanged(147);(o||i)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(147),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),o=this._configurationService.getValue(t);if(o&&"object"==typeof o){const e=o.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new n._F,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(e)))}))),this.beginCompute())}async beginCompute(){this._computePromise=(0,n.PG)((async e=>{const t=this._editor.getModel();if(!t)return[];const o=new d.G(!1),i=await(0,C.E)(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,o.elapsed()),i}));try{const e=await this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,r.dL)(e)}}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:m.qx.EMPTY})));this._editor.changeDecorations((o=>{this._decorationsIds=o.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,o)=>this._colorDatas.set(t,e[o])))}))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],o=this._editor.getOption(21);for(let i=0;i<e.length&&t.length<o;i++){const{red:o,green:n,blue:r,alpha:a}=e[i].colorInfo.color,l=new s.VS(Math.round(255*o),Math.round(255*n),Math.round(255*r),a),d=`rgba(${l.r}, ${l.g}, ${l.b}, ${l.a})`,h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[i].colorInfo.range.startLineNumber,startColumn:e[i].colorInfo.range.startColumn,endLineNumber:e[i].colorInfo.range.endLineNumber,endColumn:e[i].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:c.B4,inlineClassName:`${h.className} colorpicker-color-decoration`,inlineClassNameAffectsLetterSpacing:!0,attachedData:L}}})}const i=o<e.length&&o;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const o=t.getDecorationsInRange(g.e.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===o.length?null:this._colorDatas.get(o[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};w.ID="editor.contrib.colorDetector",w.RECOMPUTE_TIME=1e3,w=i=b([v(1,f.Ui),v(2,p.p),v(3,_.A)],w);class S{constructor(){this._onDidChange=new a.Q5,this._computed=0,this._limited=!1}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}(0,u._K)(w.ID,w,1)},65766:(e,t,o)=>{o.d(t,{nh:()=>T,PQ:()=>A});var i=o(15393),n=o(71050),s=o(41264),r=o(5976),a=o(24314),l=o(52640),d=o(89431),c=o(4669);class h{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,o){this.presentationIndex=o,this._onColorFlushed=new c.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new c.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new c.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let o=-1;for(let e=0;e<this.colorPresentations.length;e++)if(t.toLowerCase()===this.colorPresentations[e].label){o=e;break}if(-1===o){const e=t.split("(")[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){o=t;break}}-1!==o&&o!==this.presentationIndex&&(this.presentationIndex=o,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var u=o(28731),g=o(65321),m=o(93911),_=o(93794),p=o(32429),C=o(25670),f=o(63580),b=o(82992),v=o(59554);const L=g.$;class w extends r.JT{constructor(e,t,o,i=!1){super(),this.model=t,this.showingStandaloneColorPicker=i,this._closeButton=null,this._domNode=L(".colorpicker-header"),g.R3(e,this._domNode),this._pickedColorNode=g.R3(this._domNode,L(".picked-color")),g.R3(this._pickedColorNode,L("span.codicon.codicon-color-mode")),this._pickedColorPresentation=g.R3(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const n=(0,f.NC)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=g.R3(this._domNode,L(".original-color")),this._originalColorNode.style.backgroundColor=s.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=o.getColorTheme().getColor(b.yJx)||s.Il.white,this._register(o.onDidColorThemeChange((e=>{this.backgroundColor=e.getColor(b.yJx)||s.Il.white}))),this._register(g.nm(this._pickedColorNode,g.tw.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(g.nm(this._originalColorNode,g.tw.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=s.Il.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new S(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=s.Il.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class S extends r.JT{constructor(e){super(),this._onClicked=this._register(new c.Q5),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),g.R3(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),g.R3(this._button,t);g.R3(t,L(".button"+C.k.asCSSSelector((0,v.q5)("color-picker-close",p.l.close,(0,f.NC)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._register(g.nm(this._button,g.tw.CLICK,(()=>{this._onClicked.fire()})))}}class y extends r.JT{constructor(e,t,o,i=!1){super(),this.model=t,this.pixelRatio=o,this._insertButton=null,this._domNode=L(".colorpicker-body"),g.R3(e,this._domNode),this._saturationBox=new D(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new k(this._domNode,this.model,i),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new N(this._domNode,this.model,i),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),i&&(this._insertButton=this._register(new x(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange({s:e,v:t}){const o=this.model.color.hsva;this.model.color=new s.Il(new s.tx(o.h,e,t,o.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new s.Il(new s.tx(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,o=360*(1-e);this.model.color=new s.Il(new s.tx(360===o?0:o,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class D extends r.JT{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this._onDidChange=new c.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new c.Q5,this.onColorFlushed=this._onColorFlushed.event,this._domNode=L(".saturation-wrap"),g.R3(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",g.R3(this._domNode,this._canvas),this.selection=L(".saturation-selection"),g.R3(this._domNode,this.selection),this.layout(),this._register(g.nm(this._domNode,g.tw.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!(e.target&&e.target instanceof Element))return;this.monitor=this._register(new m.C);const t=g.i(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top)),(()=>null));const o=g.nm(e.target.ownerDocument,g.tw.POINTER_UP,(()=>{this._onColorFlushed.fire(),o.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const o=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(o,i),this._onDidChange.fire({s:o,v:i})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new s.Il(new s.tx(e.h,1,1,1)),o=this._canvas.getContext("2d"),i=o.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const n=o.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),o.rect(0,0,this._canvas.width,this._canvas.height),o.fillStyle=s.Il.Format.CSS.format(t),o.fill(),o.fillStyle=i,o.fill(),o.fillStyle=n,o.fill()}paintSelection(e,t){this.selection.style.left=e*this.width+"px",this.selection.style.top=this.height-t*this.height+"px"}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class P extends r.JT{constructor(e,t,o=!1){super(),this.model=t,this._onDidChange=new c.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new c.Q5,this.onColorFlushed=this._onColorFlushed.event,o?(this.domNode=g.R3(e,L(".standalone-strip")),this.overlay=g.R3(this.domNode,L(".standalone-overlay"))):(this.domNode=g.R3(e,L(".strip")),this.overlay=g.R3(this.domNode,L(".overlay"))),this.slider=g.R3(this.domNode,L(".slider")),this.slider.style.top="0px",this._register(g.nm(this.domNode,g.tw.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!(e.target&&e.target instanceof Element))return;const t=this._register(new m.C),o=g.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangeTop(e.pageY-o.top)),(()=>null));const i=g.nm(e.target.ownerDocument,g.tw.POINTER_UP,(()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top=(1-e)*this.height+"px"}}class k extends P{constructor(e,t,o=!1){super(e,t,o),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:o,b:i}=e.rgba,n=new s.Il(new s.VS(t,o,i,1)),r=new s.Il(new s.VS(t,o,i,0));this.overlay.style.background=`linear-gradient(to bottom, ${n} 0%, ${r} 100%)`}getValue(e){return e.hsva.a}}class N extends P{constructor(e,t,o=!1){super(e,t,o),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class x extends r.JT{constructor(e){super(),this._onClicked=this._register(new c.Q5),this.onClicked=this._onClicked.event,this._button=g.R3(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._register(g.nm(this._button,g.tw.CLICK,(()=>{this._onClicked.fire()})))}get button(){return this._button}}class I extends _.${constructor(e,t,o,i,n=!1){super(),this.model=t,this.pixelRatio=o,this._register(u.T.getInstance(g.Jj(e)).onDidChange((()=>this.layout())));const s=L(".colorpicker-widget");e.appendChild(s),this.header=this._register(new w(s,this.model,i,n)),this.body=this._register(new y(s,this.model,this.pixelRatio,n))}layout(){this.body.layout()}}var M=o(97781),O=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},E=function(e,t){return function(o,i){t(o,i,e)}};class R{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let T=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,o){return i.Aq.fromPromise(this._computeAsync(e,t,o))}async _computeAsync(e,t,o){if(!this._editor.hasModel())return[];const i=d.if.get(this._editor);if(!i)return[];for(const e of t){if(!i.isColorDecoration(e))continue;const t=i.getColorData(e.range.getStartPosition());if(t){return[await V(this,this._editor.getModel(),t.colorInfo,t.provider)]}}return[]}renderHoverParts(e,t){return H(this,this._editor,this._themeService,t,e)}};T=O([E(1,M.XE)],T);class F{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i}}let A=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}async createColorHover(e,t,o){if(!this._editor.hasModel())return null;if(!d.if.get(this._editor))return null;const i=await(0,l.E)(o,this._editor.getModel(),n.Ts.None);let s=null,r=null;for(const t of i){const o=t.colorInfo;a.e.containsRange(o.range,e.range)&&(s=o,r=t.provider)}const c=null!=s?s:e,h=null!=r?r:t,u=!!s;return{colorHover:await V(this,this._editor.getModel(),c,h),foundInEditor:u}}async updateEditorModel(e){if(!this._editor.hasModel())return;const t=e.model;let o=new a.e(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(await W(this._editor.getModel(),t,this._color,o,e),o=B(this._editor,o,t))}renderHoverParts(e,t){return H(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};async function V(e,t,o,i){const r=t.getValueInRange(o.range),{red:d,green:c,blue:u,alpha:g}=o.color,m=new s.VS(Math.round(255*d),Math.round(255*c),Math.round(255*u),g),_=new s.Il(m),p=await(0,l.R)(t,o,i,n.Ts.None),C=new h(_,[],0);return C.colorPresentations=p||[],C.guessColorPresentation(_,r),e instanceof T?new R(e,a.e.lift(o.range),C,i):new F(e,a.e.lift(o.range),C,i)}function H(e,t,o,i,n){if(0===i.length||!t.hasModel())return r.JT.None;if(n.setMinimumDimensions){const e=t.getOption(67)+8;n.setMinimumDimensions(new g.Ro(302,e))}const s=new r.SL,l=i[0],d=t.getModel(),c=l.model,h=s.add(new I(n.fragment,c,t.getOption(143),o,e instanceof A));n.setColorPicker(h);let u=!1,m=new a.e(l.range.startLineNumber,l.range.startColumn,l.range.endLineNumber,l.range.endColumn);if(e instanceof A){const t=i[0].model.color;e.color=t,W(d,c,t,m,l),s.add(c.onColorFlushed((t=>{e.color=t})))}else s.add(c.onColorFlushed((async e=>{await W(d,c,e,m,l),u=!0,m=B(t,m,c)})));return s.add(c.onDidChangeColor((e=>{W(d,c,e,m,l)}))),s.add(t.onDidChangeModelContent((e=>{u?u=!1:(n.hide(),t.focus())}))),s}function B(e,t,o){var i,n;const s=[],r=null!==(i=o.presentation.textEdit)&&void 0!==i?i:{range:t,text:o.presentation.label,forceMoveMarkers:!1};s.push(r),o.presentation.additionalTextEdits&&s.push(...o.presentation.additionalTextEdits);const l=a.e.lift(r.range),d=e.getModel()._setTrackedRange(null,l,3);return e.executeEdits("colorpicker",s),e.pushUndoStop(),null!==(n=e.getModel()._getTrackedRange(d))&&void 0!==n?n:l}async function W(e,t,o,i,s){const r=await(0,l.R)(e,{range:i,color:{red:o.rgba.r/255,green:o.rgba.g/255,blue:o.rgba.b/255,alpha:o.rgba.a}},s.provider,n.Ts.None);t.colorPresentations=r||[]}A=O([E(1,M.XE)],A)},15418:(e,t,o)=>{o.d(t,{G:()=>u});var i=o(41264),n=o(13807),s=o(73733),r=o(51381),a=o(5976),l=o(71922),d=o(10637),c=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},h=function(e,t){return function(o,i){t(o,i,e)}};class u{constructor(e,t){this._editorWorkerClient=new n.Q8(e,!1,"editorWorkerService",t)}async provideDocumentColors(e,t){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}provideColorPresentations(e,t,o){const n=t.range,s=t.color,r=s.alpha,a=new i.Il(new i.VS(Math.round(255*s.red),Math.round(255*s.green),Math.round(255*s.blue),r)),l=r?i.Il.Format.CSS.formatRGB(a):i.Il.Format.CSS.formatRGBA(a),d=r?i.Il.Format.CSS.formatHSL(a):i.Il.Format.CSS.formatHSLA(a),c=r?i.Il.Format.CSS.formatHex(a):i.Il.Format.CSS.formatHexA(a),h=[];return h.push({label:l,textEdit:{range:n,text:l}}),h.push({label:d,textEdit:{range:n,text:d}}),h.push({label:c,textEdit:{range:n,text:c}}),h}}let g=class extends a.JT{constructor(e,t,o){super(),this._register(o.colorProvider.register("*",new u(e,t)))}};g=c([h(0,s.q),h(1,r.c_),h(2,l.p)],g),(0,d.y)(g)},2719:(e,t,o)=>{var i,n,s=o(16830),r=o(63580),a=o(5976),l=o(65766),d=o(72065),c=o(33018),h=o(91847),u=o(4669),g=o(71922),m=o(29102),_=o(93983),p=o(73733),C=o(51381),f=o(15418),b=o(65321),v=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},L=function(e,t){return function(o,i){t(o,i,e)}};let w=i=class extends a.JT{constructor(e,t,o,i,n,s,r){super(),this._editor=e,this._modelService=o,this._keybindingService=i,this._instantiationService=n,this._languageFeatureService=s,this._languageConfigurationService=r,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=m.u.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=m.u.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new S(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}insertColor(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}static get(e){return e.getContribution(i.ID)}};w.ID="editor.contrib.standaloneColorPickerController",w=i=v([L(1,_.i6),L(2,p.q),L(3,h.d),L(4,d.TG),L(5,g.p),L(6,C.c_)],w),(0,s._K)(w.ID,w,1);let S=n=class extends a.JT{constructor(e,t,o,i,n,s,r,a){var d;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=o,this._modelService=n,this._keybindingService=s,this._languageFeaturesService=r,this._languageConfigurationService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new u.Q5),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=i.createInstance(l.PQ,this._editor),this._position=null===(d=this._editor._getViewModel())||void 0===d?void 0:d.getPrimaryCursorState().modelState.position;const c=this._editor.getSelection(),h=c?{startLineNumber:c.startLineNumber,startColumn:c.startColumn,endLineNumber:c.endLineNumber,endColumn:c.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(b.go(this._body));this._register(g.onDidBlur((e=>{this.hide()}))),this._register(g.onDidFocus((e=>{this.focus()}))),this._register(this._editor.onDidChangeCursorPosition((()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()}))),this._register(this._editor.onMouseMove((e=>{var t;const o=null===(t=e.target.element)||void 0===t?void 0:t.classList;o&&o.contains("colorpicker-color-decoration")&&this.hide()}))),this._register(this.onResult((e=>{this._render(e.value,e.foundInEditor)}))),this._start(h),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return n.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}async _start(e){const t=await this._computeAsync(e);t&&this._onResult.fire(new y(t.result,t.foundInEditor))}async _computeAsync(e){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},o=await this._standaloneColorPickerParticipant.createColorHover(t,new f.G(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return o?{result:o.colorHover,foundInEditor:o.foundInEditor}:null}_render(e,t){const o=document.createDocumentFragment();let i;const n={fragment:o,statusBar:this._register(new c.m(this._keybindingService)),setColorPicker:e=>i=e,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(n,[e])),void 0===i)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(o),i.layout();const s=i.body,r=s.saturationBox.domNode.clientWidth,a=s.domNode.clientWidth-r-22-8,l=i.body.enterButton;null==l||l.onClicked((()=>{this.updateEditor(),this.hide()}));const d=i.header;d.pickedColorNode.style.width=r+8+"px";d.originalColorNode.style.width=a+"px";const h=i.header.closeButton;null==h||h.onClicked((()=>{this.hide()})),t&&(l&&(l.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};S.ID="editor.contrib.standaloneColorPickerWidget",S=n=v([L(3,d.TG),L(4,p.q),L(5,h.d),L(6,g.p),L(7,C.c_)],S);class y{constructor(e,t){this.value=e,this.foundInEditor=t}}var D=o(84144);class P extends s.x1{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{...(0,r.vv)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,r.NC)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker")},precondition:void 0,menu:[{id:D.eH.CommandPalette}],metadata:{description:(0,r.vv)("showOrFocusStandaloneColorPickerDescription","Show or focus a standalone color picker which uses the default color provider. It displays hex/rgb/hsl colors.")}})}runEditorCommand(e,t){var o;null===(o=w.get(t))||void 0===o||o.showOrFocus()}}class k extends s.R6{constructor(){super({id:"editor.action.hideColorPicker",label:(0,r.NC)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:m.u.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100},metadata:{description:(0,r.vv)("hideColorPickerDescription","Hide the standalone color picker.")}})}run(e,t){var o;null===(o=w.get(t))||void 0===o||o.hide()}}class N extends s.R6{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,r.NC)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:m.u.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100},metadata:{description:(0,r.vv)("insertColorWithStandaloneColorPickerDescription","Insert hex/rgb/hsl colors with the focused standalone color picker.")}})}run(e,t){var o;null===(o=w.get(t))||void 0===o||o.insertColor()}}(0,s.Qr)(k),(0,s.Qr)(N),(0,D.r1)(P)},23365:(e,t,o)=>{var i=o(22258),n=o(16830),s=o(24314),r=o(29102),a=o(51381),l=o(69386),d=o(50187),c=o(3860);class h{constructor(e,t,o){this.languageConfigurationService=o,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,o){if(o<0)return!1;const i=t.length;if(o+i>e.length)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(o+n),s=t.charCodeAt(n);if(i!==s&&!(i>=65&&i<=90&&i+32===s||s>=65&&s<=90&&s+32===i))return!1}return!0}_createOperationsForBlockComment(e,t,o,i,n,r){const a=e.startLineNumber,l=e.startColumn,d=e.endLineNumber,c=e.endColumn,u=n.getLineContent(a),g=n.getLineContent(d);let m,_=u.lastIndexOf(t,l-1+t.length),p=g.indexOf(o,c-1-o.length);if(-1!==_&&-1!==p)if(a===d){u.substring(_+t.length,p).indexOf(o)>=0&&(_=-1,p=-1)}else{const e=u.substring(_+t.length),i=g.substring(0,p);(e.indexOf(o)>=0||i.indexOf(o)>=0)&&(_=-1,p=-1)}-1!==_&&-1!==p?(i&&_+t.length<u.length&&32===u.charCodeAt(_+t.length)&&(t+=" "),i&&p>0&&32===g.charCodeAt(p-1)&&(o=" "+o,p-=1),m=h._createRemoveBlockCommentOperations(new s.e(a,_+t.length+1,d,p+1),t,o)):(m=h._createAddBlockCommentOperations(e,t,o,this._insertSpace),this._usedEndToken=1===m.length?o:null);for(const e of m)r.addTrackedEditOperation(e.range,e.text)}static _createRemoveBlockCommentOperations(e,t,o){const i=[];return s.e.isEmpty(e)?i.push(l.h.delete(new s.e(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+o.length))):(i.push(l.h.delete(new s.e(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(l.h.delete(new s.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+o.length)))),i}static _createAddBlockCommentOperations(e,t,o,i){const n=[];return s.e.isEmpty(e)?n.push(l.h.replace(new s.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+o)):(n.push(l.h.insert(new d.L(e.startLineNumber,e.startColumn),t+(i?" ":""))),n.push(l.h.insert(new d.L(e.endLineNumber,e.endColumn),(i?" ":"")+o))),n}getEditOperations(e,t){const o=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(o);const n=e.getLanguageIdAtPosition(o,i),s=this.languageConfigurationService.getLanguageConfiguration(n).comments;s&&s.blockCommentStartToken&&s.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,s.blockCommentStartToken,s.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const o=t.getInverseEditOperations();if(2===o.length){const e=o[0],t=o[1];return new c.Y(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=o[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new c.Y(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=o(97295);class g{constructor(e,t,o,i,n,s,r){this.languageConfigurationService=e,this._selection=t,this._indentSize=o,this._type=i,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=s,this._ignoreFirstLine=r||!1}static _gatherPreflightCommentStrings(e,t,o,i){e.tokenization.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),s=i.getLanguageConfiguration(n).comments,r=s?s.lineCommentToken:null;if(!r)return null;const a=[];for(let e=0,i=o-t+1;e<i;e++)a[e]={ignore:!1,commentStr:r,commentStrOffset:0,commentStrLength:r.length};return a}static _analyzeLines(e,t,o,i,n,s,r,a){let l,d=!0;l=0===e||1!==e;for(let a=0,c=i.length;a<c;a++){const c=i[a],g=n+a;if(g===n&&r){c.ignore=!0;continue}const m=o.getLineContent(g),_=u.LC(m);if(-1!==_){if(d=!1,c.ignore=!1,c.commentStrOffset=_,l&&!h._haystackHasNeedleAtOffset(m,c.commentStr,_)&&(0===e?l=!1:1===e||(c.ignore=!0)),l&&t){const e=_+c.commentStrLength;e<m.length&&32===m.charCodeAt(e)&&(c.commentStrLength+=1)}}else c.ignore=s,c.commentStrOffset=m.length}if(0===e&&d){l=!1;for(let e=0,t=i.length;e<t;e++)i[e].ignore=!1}return{supported:!0,shouldRemoveComments:l,lines:i}}static _gatherPreflightData(e,t,o,i,n,s,r,a){const l=g._gatherPreflightCommentStrings(o,i,n,a);return null===l?{supported:!1}:g._analyzeLines(e,t,o,l,i,s,r,a)}_executeLineComments(e,t,o,i){let n;o.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(o.lines,i.startLineNumber):(g._normalizeInsertionPoint(e,o.lines,i.startLineNumber,this._indentSize),n=this._createAddLineCommentsOperations(o.lines,i.startLineNumber));const r=new d.L(i.positionLineNumber,i.positionColumn);for(let o=0,i=n.length;o<i;o++)if(t.addEditOperation(n[o].range,n[o].text),s.e.isEmpty(n[o].range)&&s.e.getStartPosition(n[o].range).equals(r)){e.getLineContent(r.lineNumber).length+1===r.column&&(this._deltaColumn=(n[o].text||"").length)}this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,o,i){let n=t.startLineNumber,r=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let l=e.getLineContent(n).lastIndexOf(o,a-1),d=e.getLineContent(r).indexOf(i,t.endColumn-1-o.length);return-1!==l&&-1===d&&(d=e.getLineContent(n).indexOf(i,l+o.length),r=n),-1===l&&-1!==d&&(l=e.getLineContent(r).lastIndexOf(o,d),n=r),!t.isEmpty()||-1!==l&&-1!==d||(l=e.getLineContent(n).indexOf(o),-1!==l&&(d=e.getLineContent(n).indexOf(i,l+o.length))),-1!==l&&32===e.getLineContent(n).charCodeAt(l+o.length)&&(o+=" "),-1!==d&&32===e.getLineContent(r).charCodeAt(d-1)&&(i=" "+i,d-=1),-1!==l&&-1!==d?h._createRemoveBlockCommentOperations(new s.e(n,l+o.length+1,r,d+1),o,i):null}_executeBlockComment(e,t,o){e.tokenization.tokenizeIfCheap(o.startLineNumber);const i=e.getLanguageIdAtPosition(o.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const r=n.blockCommentStartToken,a=n.blockCommentEndToken;let l=this._attemptRemoveBlockComment(e,o,r,a);if(!l){if(o.isEmpty()){const t=e.getLineContent(o.startLineNumber);let i=u.LC(t);-1===i&&(i=t.length),l=h._createAddBlockCommentOperations(new s.e(o.startLineNumber,i+1,o.startLineNumber,t.length+1),r,a,this._insertSpace)}else l=h._createAddBlockCommentOperations(new s.e(o.startLineNumber,e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),r,a,this._insertSpace);1===l.length&&(this._deltaColumn=r.length+1)}this._selectionId=t.trackSelection(o);for(const e of l)t.addEditOperation(e.range,e.text)}getEditOperations(e,t){let o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new s.e(o.startLineNumber,e.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(o));o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const i=g._gatherPreflightData(this._type,this._insertSpace,e,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,o):this._executeBlockComment(e,t,o)}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),new c.Y(o.selectionStartLineNumber,o.selectionStartColumn+this._deltaColumn,o.positionLineNumber,o.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const o=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.ignore||o.push(l.h.delete(new s.e(t+i,n.commentStrOffset+1,t+i,n.commentStrOffset+n.commentStrLength+1)))}return o}_createAddLineCommentsOperations(e,t){const o=[],i=this._insertSpace?" ":"";for(let n=0,s=e.length;n<s;n++){const s=e[n];s.ignore||o.push(l.h.insert(new d.L(t+n,s.commentStrOffset+1),s.commentStr+i))}return o}static nextVisibleColumn(e,t,o,i){return o?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,o,i){let n,s,r=1073741824;for(let n=0,s=t.length;n<s;n++){if(t[n].ignore)continue;const s=e.getLineContent(o+n);let a=0;for(let e=0,o=t[n].commentStrOffset;a<r&&e<o;e++)a=g.nextVisibleColumn(a,i,9===s.charCodeAt(e),1);a<r&&(r=a)}r=Math.floor(r/i)*i;for(let a=0,l=t.length;a<l;a++){if(t[a].ignore)continue;const l=e.getLineContent(o+a);let d=0;for(n=0,s=t[a].commentStrOffset;d<r&&n<s;n++)d=g.nextVisibleColumn(d,i,9===l.charCodeAt(n),1);t[a].commentStrOffset=d>r?n-1:n}}}var m=o(63580),_=o(84144);class p extends n.R6{constructor(e,t){super(t),this._type=e}run(e,t){const o=e.get(a.c_);if(!t.hasModel())return;const i=[],n=t.getModel().getOptions(),r=t.getOption(23),l=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));l.sort(((e,t)=>s.e.compareRangesUsingStarts(e.selection,t.selection)));let d=l[0];for(let e=1;e<l.length;e++){const t=l[e];d.selection.endLineNumber===t.selection.startLineNumber&&(d.index<t.index?t.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=t))}for(const e of l)i.push(new g(o,e.selection,n.indentSize,this._type,r.insertSpace,r.ignoreEmptyLines,e.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class C extends n.R6{constructor(){super({id:"editor.action.blockComment",label:m.NC("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:_.eH.MenubarEditMenu,group:"5_insert",title:m.NC({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const o=e.get(a.c_);if(!t.hasModel())return;const i=t.getOption(23),n=[],s=t.getSelections();for(const e of s)n.push(new h(e,i.insertSpace,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}(0,n.Qr)(class extends p{constructor(){super(0,{id:"editor.action.commentLine",label:m.NC("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:_.eH.MenubarEditMenu,group:"5_insert",title:m.NC({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.Qr)(class extends p{constructor(){super(1,{id:"editor.action.addCommentLine",label:m.NC("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:(0,i.gx)(2089,2081),weight:100}})}}),(0,n.Qr)(class extends p{constructor(){super(2,{id:"editor.action.removeCommentLine",label:m.NC("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:r.u.writable,kbOpts:{kbExpr:r.u.editorTextFocus,primary:(0,i.gx)(2089,2099),weight:100}})}}),(0,n.Qr)(C)},93740:(e,t,o)=>{var i,n=o(65321),s=o(76033),r=o(74741),a=o(5976),l=o(1432),d=o(16830),c=o(29102),h=o(63580),u=o(84144),g=o(93983),m=o(5606),_=o(91847),p=o(33108),C=o(40382),f=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},b=function(e,t){return function(o,i){t(o,i,e)}};let v=i=class{static get(e){return e.getContribution(i.ID)}constructor(e,t,o,i,s,r,l,d){this._contextMenuService=t,this._contextViewService=o,this._contextKeyService=i,this._keybindingService=s,this._menuService=r,this._configurationService=l,this._workspaceContextService=d,this._toDispose=new a.SL,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),o=e.srcElement;o.shadowRoot&&n.Ay(t)===o.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{this._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const o of this._editor.getSelections())if(o.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24))return;if(!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const o=[],i=this._menuService.createMenu(t,this._contextKeyService),n=i.getActions({arg:e.uri});i.dispose();for(const t of n){const[,i]=t;let n=0;for(const t of i)if(t instanceof u.NZ){const i=this._getMenuActions(e,t.item.submenu);i.length>0&&(o.push(new r.wY(t.id,t.label,i)),n++)}else o.push(t),n++;n&&o.push(new r.Z0)}return o.length&&o.pop(),o}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;const o=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let i=t;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),t=n.i(this._editor.getDomNode()),o=t.left+e.left,s=t.top+e.top+e.height;i={x:o,y:s}}const r=this._editor.getOption(127)&&!l.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:r?this._editor.getDomNode():void 0,getAnchor:()=>i,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new s.gU(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const o=e;return"function"==typeof o.getActionViewItem?o.getActionViewItem():new s.gU(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:o})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;if((0,C.x)(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(73);let o=0;const i=e=>({id:"menu-action-"+ ++o,label:e.label,tooltip:"",class:void 0,enabled:void 0===e.enabled||e.enabled,checked:e.checked,run:e.run}),n=(e,t,n,s,a)=>{if(!t)return i({label:e,enabled:t,run:()=>{}});const l=e=>()=>{this._configurationService.updateValue(n,e)},d=[];for(const e of a)d.push(i({label:e.label,checked:s===e.value,run:l(e.value)}));return((e,t)=>new r.wY("menu-action-"+ ++o,e,t,void 0))(e,d)},s=[];s.push(i({label:h.NC("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),s.push(new r.Z0),s.push(i({label:h.NC("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),s.push(n(h.NC("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:h.NC("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:h.NC("context.minimap.size.fill","Fill"),value:"fill"},{label:h.NC("context.minimap.size.fit","Fit"),value:"fit"}])),s.push(n(h.NC("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:h.NC("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:h.NC("context.minimap.slider.always","Always"),value:"always"}]));const a=this._editor.getOption(127)&&!l.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:a?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>s,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};v.ID="editor.contrib.contextmenu",v=i=f([b(1,m.i),b(2,m.u),b(3,g.i6),b(4,_.d),b(5,u.co),b(6,p.Ui),b(7,C.ec)],v);class L extends d.R6{constructor(){super({id:"editor.action.showContextMenu",label:h.NC("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:c.u.textInputFocus,primary:1092,weight:100}})}run(e,t){var o;null===(o=v.get(t))||void 0===o||o.showContextMenu()}}(0,d._K)(v.ID,v,2),(0,d.Qr)(L)},41895:(e,t,o)=>{var i=o(5976),n=o(16830),s=o(29102),r=o(63580);class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}}class l{constructor(e,t,o){this.cursorState=e,this.scrollTop=t,this.scrollLeft=o}}class d extends i.JT{static get(e){return e.getContribution(d.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const o=new a(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(o)||(this._undoStack.push(new l(o,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new l(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new l(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}d.ID="editor.contrib.cursorUndoRedoController";class c extends n.R6{constructor(){super({id:"cursorUndo",label:r.NC("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:s.u.textInputFocus,primary:2099,weight:100}})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorUndo()}}class h extends n.R6{constructor(){super({id:"cursorRedo",label:r.NC("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorRedo()}}(0,n._K)(d.ID,d,0),(0,n.Qr)(c),(0,n.Qr)(h)},58076:(e,t,o)=>{var i=o(9488),n=o(21070),s=o(78713),r=o(97488),a=o(71922),l=o(30335),d=o(5976),c=o(4669),h=function(e,t,o,i){var n,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,o,r):n(t,o))||r);return s>3&&r&&Object.defineProperty(t,o,r),r},u=function(e,t){return function(o,i){t(o,i,e)}};let g=class extends d.JT{constructor(e,t,o){super(),this._textModel=e,this._languageFeaturesService=t,this._outlineModelService=o,this._currentModel=(0,n.uh)(this,void 0);const i=(0,n.aq)("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),s=(0,n.aq)("_textModel.onDidChangeContent",c.ju.debounce((e=>this._textModel.onDidChangeContent(e)),(()=>{}),100));this._register((0,n.gp)((async(e,t)=>{i.read(e),s.read(e);const o=t.add(new r.t2),n=await this._outlineModelService.getOrCreate(this._textModel,o.token);t.isDisposed||this._currentModel.set(n,void 0)})))}getBreadcrumbItems(e,t){const o=this._currentModel.read(t);if(!o)return[];const n=o.asListOfDocumentSymbols().filter((t=>e.contains(t.range.startLineNumber)&&!e.contains(t.range.endLineNumber)));return n.sort((0,i.BV)((0,i.tT)((e=>e.range.endLineNumber-e.range.startLineNumber),i.fv))),n.map((e=>({name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber})))}};g=h([u(1,a.p),u(2,l.Je)],g),s.O.setBreadcrumbsSourceFactory(((e,t)=>t.createInstance(g,e)))}}]);