"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[3432],{41548:(e,t,n)=>{var i=n(22258),r=n(96623),o=n(16830),s=n(61329),a=n(60631),u=n(30718),l=n(69386),d=n(50187),c=n(24314),g=n(3860),m=n(29102);class h{constructor(e,t,n){this._selection=e,this._isCopyingDown=t,this._noop=n||!1,this._selectionDirection=0,this._selectionId=null,this._startLineNumberDelta=0,this._endLineNumberDelta=0}getEditOperations(e,t){let n=this._selection;this._startLineNumberDelta=0,this._endLineNumberDelta=0,n.startLineNumber<n.endLineNumber&&1===n.endColumn&&(this._endLineNumberDelta=1,n=n.setEndPosition(n.endLineNumber-1,e.getLineMaxColumn(n.endLineNumber-1)));const i=[];for(let t=n.startLineNumber;t<=n.endLineNumber;t++)i.push(e.getLineContent(t));const r=i.join("\n");""===r&&this._isCopyingDown&&(this._startLineNumberDelta++,this._endLineNumberDelta++),this._noop?t.addEditOperation(new c.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber+1,1),n.endLineNumber===e.getLineCount()?"":"\n"):this._isCopyingDown?t.addEditOperation(new c.e(n.startLineNumber,1,n.startLineNumber,1),r+"\n"):t.addEditOperation(new c.e(n.endLineNumber,e.getLineMaxColumn(n.endLineNumber),n.endLineNumber,e.getLineMaxColumn(n.endLineNumber)),"\n"+r),this._selectionId=t.trackSelection(n),this._selectionDirection=this._selection.getDirection()}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);if(0!==this._startLineNumberDelta||0!==this._endLineNumberDelta){let e=n.startLineNumber,t=n.startColumn,i=n.endLineNumber,r=n.endColumn;0!==this._startLineNumberDelta&&(e+=this._startLineNumberDelta,t=1),0!==this._endLineNumberDelta&&(i+=this._endLineNumberDelta,r=1),n=g.Y.createWithDirection(e,t,i,r,this._selectionDirection)}return n}}var p=n(97295),L=n(10291),b=n(49119),C=n(51381),f=n(11924),N=n(75383),_=n(1615),w=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},x=function(e,t){return function(n,i){t(n,i,e)}};let S=class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=()=>e.getLanguageId(),i=(t,n)=>e.getLanguageIdAtPosition(t,n),r=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===r)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let o=this._selection;o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const{tabSize:s,indentSize:a,insertSpaces:u}=e.getOptions(),l=this.buildIndentConverter(s,a,u);if(o.startLineNumber===o.endLineNumber&&1===e.getLineMaxColumn(o.startLineNumber)){const n=o.startLineNumber,i=this._isMovingDown?n+1:n-1;1===e.getLineMaxColumn(i)?t.addEditOperation(new c.e(1,1,1,1),null):(t.addEditOperation(new c.e(n,1,n,1),e.getLineContent(i)),t.addEditOperation(new c.e(i,1,i,e.getLineMaxColumn(i)),null)),o=new g.Y(i,1,i,1)}else{let r,a;if(this._isMovingDown){r=o.endLineNumber+1,a=e.getLineContent(r),t.addEditOperation(new c.e(r-1,e.getLineMaxColumn(r-1),r,e.getLineMaxColumn(r)),null);let d=a;if(this.shouldAutoIndent(e,o)){const g=this.matchEnterRule(e,l,s,r,o.startLineNumber-1);if(null!==g){const t=p.V8(e.getLineContent(r)),n=g+f.Y(t,s),i=f.J(n,s,u);d=i+this.trimStart(a)}else{const t={tokenization:{getLineTokens:t=>t===o.startLineNumber?e.tokenization.getLineTokens(r):e.tokenization.getLineTokens(t),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:t=>t===o.startLineNumber?e.getLineContent(r):e.getLineContent(t)},c=(0,N.n8)(this._autoIndent,t,e.getLanguageIdAtPosition(r,1),o.startLineNumber,l,this._languageConfigurationService);if(null!==c){const t=p.V8(e.getLineContent(r)),n=f.Y(c,s);if(n!==f.Y(t,s)){const e=f.J(n,s,u);d=e+this.trimStart(a)}}}t.addEditOperation(new c.e(o.startLineNumber,1,o.startLineNumber,1),d+"\n");const m=this.matchEnterRuleMovingDown(e,l,s,o.startLineNumber,r,d);if(null!==m)0!==m&&this.getIndentEditsOfMovingBlock(e,t,o,s,u,m);else{const a={tokenization:{getLineTokens:t=>t===o.startLineNumber?e.tokenization.getLineTokens(r):t>=o.startLineNumber+1&&t<=o.endLineNumber+1?e.tokenization.getLineTokens(t-1):e.tokenization.getLineTokens(t),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:t=>t===o.startLineNumber?d:t>=o.startLineNumber+1&&t<=o.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t)},c=(0,N.n8)(this._autoIndent,a,e.getLanguageIdAtPosition(r,1),o.startLineNumber+1,l,this._languageConfigurationService);if(null!==c){const n=p.V8(e.getLineContent(o.startLineNumber)),i=f.Y(c,s),r=f.Y(n,s);if(i!==r){const n=i-r;this.getIndentEditsOfMovingBlock(e,t,o,s,u,n)}}}}else t.addEditOperation(new c.e(o.startLineNumber,1,o.startLineNumber,1),d+"\n")}else if(r=o.startLineNumber-1,a=e.getLineContent(r),t.addEditOperation(new c.e(r,1,r+1,1),null),t.addEditOperation(new c.e(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),"\n"+a),this.shouldAutoIndent(e,o)){const a={tokenization:{getLineTokens:t=>t===r?e.tokenization.getLineTokens(o.startLineNumber):e.tokenization.getLineTokens(t),getLanguageId:n,getLanguageIdAtPosition:i},getLineContent:t=>t===r?e.getLineContent(o.startLineNumber):e.getLineContent(t)},d=this.matchEnterRule(e,l,s,o.startLineNumber,o.startLineNumber-2);if(null!==d)0!==d&&this.getIndentEditsOfMovingBlock(e,t,o,s,u,d);else{const n=(0,N.n8)(this._autoIndent,a,e.getLanguageIdAtPosition(o.startLineNumber,1),r,l,this._languageConfigurationService);if(null!==n){const i=p.V8(e.getLineContent(o.startLineNumber)),r=f.Y(n,s),a=f.Y(i,s);if(r!==a){const n=r-a;this.getIndentEditsOfMovingBlock(e,t,o,s,u,n)}}}}}this._selectionId=t.trackSelection(o)}buildIndentConverter(e,t,n){return{shiftIndent:i=>L.U.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>L.U.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,i,r){if(r){let o=r.indentation;r.indentAction===b.wU.None||r.indentAction===b.wU.Indent?o=r.indentation+r.appendText:r.indentAction===b.wU.IndentOutdent?o=r.indentation:r.indentAction===b.wU.Outdent&&(o=t.unshiftIndent(r.indentation)+r.appendText);const s=e.getLineContent(i);if(this.trimStart(s).indexOf(this.trimStart(o))>=0){const r=p.V8(e.getLineContent(i));let s=p.V8(o);const a=(0,N.tI)(e,i,this._languageConfigurationService);null!==a&&2&a&&(s=t.unshiftIndent(s));return f.Y(s,n)-f.Y(r,n)}}return null}matchEnterRuleMovingDown(e,t,n,i,r,o){if(p.ow(o)>=0){const o=e.getLineMaxColumn(r),s=(0,_.A)(this._autoIndent,e,new c.e(r,o,r,o),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,s)}{let r=i-1;for(;r>=1;){const t=e.getLineContent(r);if(p.ow(t)>=0)break;r--}if(r<1||i>e.getLineCount())return null;const o=e.getLineMaxColumn(r),s=(0,_.A)(this._autoIndent,e,new c.e(r,o,r,o),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,s)}}matchEnterRule(e,t,n,i,r,o){let s=r;for(;s>=1;){let t;t=s===r&&void 0!==o?o:e.getLineContent(s);if(p.ow(t)>=0)break;s--}if(s<1||i>e.getLineCount())return null;const a=e.getLineMaxColumn(s),u=(0,_.A)(this._autoIndent,e,new c.e(s,a,s,a),this._languageConfigurationService);return this.parseEnterResult(e,t,n,i,u)}trimStart(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport}getIndentEditsOfMovingBlock(e,t,n,i,r,o){for(let s=n.startLineNumber;s<=n.endLineNumber;s++){const a=e.getLineContent(s),u=p.V8(a),l=f.Y(u,i)+o,d=f.J(l,i,r);d!==u&&(t.addEditOperation(new c.e(s,1,s,u.length+1),d),s===n.endLineNumber&&n.endColumn<=u.length+1&&""===d&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}};S=w([x(3,C.c_)],S);class y{static getCollator(){return y._COLLATOR||(y._COLLATOR=new Intl.Collator),y._COLLATOR}constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}getEditOperations(e,t){const n=function(e,t,n){const i=T(e,t,n);if(!i)return null;return l.h.replace(new c.e(i.startLineNumber,1,i.endLineNumber,e.getLineMaxColumn(i.endLineNumber)),i.after.join("\n"))}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(null===e)return!1;const i=T(e,t,n);if(!i)return!1;for(let e=0,t=i.before.length;e<t;e++)if(i.before[e]!==i.after[e])return!0;return!1}}function T(e,t,n){const i=t.startLineNumber;let r=t.endLineNumber;if(1===t.endColumn&&r--,i>=r)return null;const o=[];for(let t=i;t<=r;t++)o.push(e.getLineContent(t));let s=o.slice(0);return s.sort(y.getCollator().compare),!0===n&&(s=s.reverse()),{startLineNumber:i,endLineNumber:r,before:o,after:s}}y._COLLATOR=null;var k=n(63580),R=n(84144),v=n(33108);class D extends o.R6{constructor(e,t){super(t),this.down=e}run(e,t){if(!t.hasModel())return;const n=t.getSelections().map(((e,t)=>({selection:e,index:t,ignore:!1})));n.sort(((e,t)=>c.e.compareRangesUsingStarts(e.selection,t.selection)));let i=n[0];for(let e=1;e<n.length;e++){const t=n[e];i.selection.endLineNumber===t.selection.startLineNumber&&(i.index<t.index?t.ignore=!0:(i.ignore=!0,i=t))}const r=[];for(const e of n)r.push(new h(e.selection,this.down,e.ignore));t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class E extends o.R6{constructor(){super({id:"editor.action.duplicateSelection",label:k.NC("duplicateSelection","Duplicate Selection"),alias:"Duplicate Selection",precondition:m.u.writable,menuOpts:{menuId:R.eH.MenubarSelectionMenu,group:"2_line",title:k.NC({key:"miDuplicateSelection",comment:["&& denotes a mnemonic"]},"&&Duplicate Selection"),order:5}})}run(e,t,n){if(!t.hasModel())return;const i=[],r=t.getSelections(),o=t.getModel();for(const e of r)if(e.isEmpty())i.push(new h(e,!0));else{const t=new g.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn);i.push(new s.OY(t,o.getValueInRange(e)))}t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class M extends o.R6{constructor(e,t){super(t),this.down=e}run(e,t){const n=e.get(C.c_),i=[],r=t.getSelections()||[],o=t.getOption(12);for(const e of r)i.push(new S(e,this.down,o,n));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class I extends o.R6{constructor(e,t){super(t),this.descending=e}run(e,t){if(!t.hasModel())return;const n=t.getModel();let i=t.getSelections();1===i.length&&i[0].isEmpty()&&(i=[new g.Y(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))]);for(const e of i)if(!y.canRun(t.getModel(),e,this.descending))return;const r=[];for(let e=0,t=i.length;e<t;e++)r[e]=new y(i[e],this.descending);t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class O extends o.R6{constructor(){super({id:"editor.action.removeDuplicateLines",label:k.NC("lines.deleteDuplicates","Delete Duplicate Lines"),alias:"Delete Duplicate Lines",precondition:m.u.writable})}run(e,t){if(!t.hasModel())return;const n=t.getModel();if(1===n.getLineCount()&&1===n.getLineMaxColumn(1))return;const i=[],r=[];let o=0,s=!0,a=t.getSelections();1===a.length&&a[0].isEmpty()&&(a=[new g.Y(1,1,n.getLineCount(),n.getLineMaxColumn(n.getLineCount()))],s=!1);for(const e of a){const t=new Set,s=[];for(let i=e.startLineNumber;i<=e.endLineNumber;i++){const e=n.getLineContent(i);t.has(e)||(s.push(e),t.add(e))}const a=new g.Y(e.startLineNumber,1,e.endLineNumber,n.getLineMaxColumn(e.endLineNumber)),u=e.startLineNumber-o,d=new g.Y(u,1,u+s.length-1,s[s.length-1].length);i.push(l.h.replace(a,s.join("\n"))),r.push(d),o+=e.endLineNumber-e.startLineNumber+1-s.length}t.pushUndoStop(),t.executeEdits(this.id,i,s?r:void 0),t.pushUndoStop()}}class P extends o.R6{constructor(){super({id:P.ID,label:k.NC("lines.trimTrailingWhitespace","Trim Trailing Whitespace"),alias:"Trim Trailing Whitespace",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:(0,i.gx)(2089,2102),weight:100}})}run(e,t,n){let i=[];"auto-save"===n.reason&&(i=(t.getSelections()||[]).map((e=>new d.L(e.positionLineNumber,e.positionColumn))));const r=t.getSelection();if(null===r)return;const o=e.get(v.Ui),s=t.getModel(),u=o.getValue("files.trimTrailingWhitespaceInRegexAndStrings",{overrideIdentifier:null==s?void 0:s.getLanguageId(),resource:null==s?void 0:s.uri}),l=new a.V(r,i,u);t.pushUndoStop(),t.executeCommands(this.id,[l]),t.pushUndoStop()}}P.ID="editor.action.trimTrailingWhitespace";class U extends o.R6{constructor(){super({id:"editor.action.deleteLines",label:k.NC("lines.delete","Delete Line"),alias:"Delete Line",precondition:m.u.writable,kbOpts:{kbExpr:m.u.textInputFocus,primary:3113,weight:100}})}run(e,t){if(!t.hasModel())return;const n=this._getLinesToRemove(t),i=t.getModel();if(1===i.getLineCount()&&1===i.getLineMaxColumn(1))return;let r=0;const o=[],s=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];let a=t.startLineNumber,u=t.endLineNumber,d=1,c=i.getLineMaxColumn(u);u<i.getLineCount()?(u+=1,c=1):a>1&&(a-=1,d=i.getLineMaxColumn(a)),o.push(l.h.replace(new g.Y(a,d,u,c),"")),s.push(new g.Y(a-r,t.positionColumn,a-r,t.positionColumn)),r+=t.endLineNumber-t.startLineNumber+1}t.pushUndoStop(),t.executeEdits(this.id,o,s),t.pushUndoStop()}_getLinesToRemove(e){const t=e.getSelections().map((e=>{let t=e.endLineNumber;return e.startLineNumber<e.endLineNumber&&1===e.endColumn&&(t-=1),{startLineNumber:e.startLineNumber,selectionStartColumn:e.selectionStartColumn,endLineNumber:t,positionColumn:e.positionColumn}}));t.sort(((e,t)=>e.startLineNumber===t.startLineNumber?e.endLineNumber-t.endLineNumber:e.startLineNumber-t.startLineNumber));const n=[];let i=t[0];for(let e=1;e<t.length;e++)i.endLineNumber+1>=t[e].startLineNumber?i.endLineNumber=t[e].endLineNumber:(n.push(i),i=t[e]);return n.push(i),n}}class A extends o.R6{constructor(){super({id:"editor.action.indentLines",label:k.NC("lines.indent","Indent Line"),alias:"Indent Line",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:2142,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,u.u6.indent(n.cursorConfig,t.getModel(),t.getSelections())),t.pushUndoStop())}}class B extends o.R6{constructor(){super({id:"editor.action.outdentLines",label:k.NC("lines.outdent","Outdent Line"),alias:"Outdent Line",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:2140,weight:100}})}run(e,t){r.wk.Outdent.runEditorCommand(e,t,null)}}class Y extends o.R6{constructor(){super({id:"editor.action.insertLineBefore",label:k.NC("lines.insertBefore","Insert Line Above"),alias:"Insert Line Above",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:3075,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,u.u6.lineInsertBefore(n.cursorConfig,t.getModel(),t.getSelections())))}}class V extends o.R6{constructor(){super({id:"editor.action.insertLineAfter",label:k.NC("lines.insertAfter","Insert Line Below"),alias:"Insert Line Below",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:2051,weight:100}})}run(e,t){const n=t._getViewModel();n&&(t.pushUndoStop(),t.executeCommands(this.id,u.u6.lineInsertAfter(n.cursorConfig,t.getModel(),t.getSelections())))}}class Q extends o.R6{run(e,t){if(!t.hasModel())return;const n=t.getSelection(),i=this._getRangesToDelete(t),r=[];for(let e=0,t=i.length-1;e<t;e++){const t=i[e],n=i[e+1];null===c.e.intersectRanges(t,n)?r.push(t):i[e+1]=c.e.plusRange(t,n)}r.push(i[i.length-1]);const o=this._getEndCursorState(n,r),s=r.map((e=>l.h.replace(e,"")));t.pushUndoStop(),t.executeEdits(this.id,s,o),t.pushUndoStop()}}class q extends o.R6{constructor(){super({id:"editor.action.joinLines",label:k.NC("lines.joinLines","Join Lines"),alias:"Join Lines",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:0,mac:{primary:296},weight:100}})}run(e,t){const n=t.getSelections();if(null===n)return;let i=t.getSelection();if(null===i)return;n.sort(c.e.compareRangesUsingStarts);const r=[],o=n.reduce(((e,t)=>e.isEmpty()?e.endLineNumber===t.startLineNumber?(i.equalsSelection(e)&&(i=t),t):t.startLineNumber>e.endLineNumber+1?(r.push(e),t):new g.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn):t.startLineNumber>e.endLineNumber?(r.push(e),t):new g.Y(e.startLineNumber,e.startColumn,t.endLineNumber,t.endColumn)));r.push(o);const s=t.getModel();if(null===s)return;const a=[],u=[];let d=i,m=0;for(let e=0,t=r.length;e<t;e++){const t=r[e],n=t.startLineNumber,o=1;let h,p,L=0;const b=s.getLineLength(t.endLineNumber)-t.endColumn;if(t.isEmpty()||t.startLineNumber===t.endLineNumber){const e=t.getStartPosition();e.lineNumber<s.getLineCount()?(h=n+1,p=s.getLineMaxColumn(h)):(h=e.lineNumber,p=s.getLineMaxColumn(e.lineNumber))}else h=t.endLineNumber,p=s.getLineMaxColumn(h);let C=s.getLineContent(n);for(let e=n+1;e<=h;e++){const t=s.getLineContent(e),n=s.getLineFirstNonWhitespaceColumn(e);if(n>=1){let e=!0;""===C&&(e=!1),!e||" "!==C.charAt(C.length-1)&&"\t"!==C.charAt(C.length-1)||(e=!1,C=C.replace(/[\s\uFEFF\xA0]+$/g," "));const i=t.substr(n-1);C+=(e?" ":"")+i,L=e?i.length+1:i.length}else L=0}const f=new c.e(n,o,h,p);if(!f.isEmpty()){let e;t.isEmpty()?(a.push(l.h.replace(f,C)),e=new g.Y(f.startLineNumber-m,C.length-L+1,n-m,C.length-L+1)):t.startLineNumber===t.endLineNumber?(a.push(l.h.replace(f,C)),e=new g.Y(t.startLineNumber-m,t.startColumn,t.endLineNumber-m,t.endColumn)):(a.push(l.h.replace(f,C)),e=new g.Y(t.startLineNumber-m,t.startColumn,t.startLineNumber-m,C.length-b)),null!==c.e.intersectRanges(f,i)?d=e:u.push(e)}m+=f.endLineNumber-f.startLineNumber}u.unshift(d),t.pushUndoStop(),t.executeEdits(this.id,a,u),t.pushUndoStop()}}class z extends o.R6{constructor(){super({id:"editor.action.transpose",label:k.NC("editor.transpose","Transpose Characters around the Cursor"),alias:"Transpose Characters around the Cursor",precondition:m.u.writable})}run(e,t){const n=t.getSelections();if(null===n)return;const i=t.getModel();if(null===i)return;const r=[];for(let e=0,t=n.length;e<t;e++){const t=n[e];if(!t.isEmpty())continue;const o=t.getStartPosition(),a=i.getLineMaxColumn(o.lineNumber);if(o.column>=a){if(o.lineNumber===i.getLineCount())continue;const e=new c.e(o.lineNumber,Math.max(1,o.column-1),o.lineNumber+1,1),t=i.getValueInRange(e).split("").reverse().join("");r.push(new s.T4(new g.Y(o.lineNumber,Math.max(1,o.column-1),o.lineNumber+1,1),t))}else{const e=new c.e(o.lineNumber,Math.max(1,o.column-1),o.lineNumber,o.column+1),t=i.getValueInRange(e).split("").reverse().join("");r.push(new s.hP(e,t,new g.Y(o.lineNumber,o.column+1,o.lineNumber,o.column+1)))}}t.pushUndoStop(),t.executeCommands(this.id,r),t.pushUndoStop()}}class F extends o.R6{run(e,t){const n=t.getSelections();if(null===n)return;const i=t.getModel();if(null===i)return;const r=t.getOption(131),o=[];for(const e of n)if(e.isEmpty()){const n=e.getStartPosition(),s=t.getConfiguredWordAtPosition(n);if(!s)continue;const a=new c.e(n.lineNumber,s.startColumn,n.lineNumber,s.endColumn),u=i.getValueInRange(a);o.push(l.h.replace(a,this._modifyText(u,r)))}else{const t=i.getValueInRange(e);o.push(l.h.replace(e,this._modifyText(t,r)))}t.pushUndoStop(),t.executeEdits(this.id,o),t.pushUndoStop()}}class W{constructor(e,t){this._pattern=e,this._flags=t,this._actual=null,this._evaluated=!1}get(){if(!this._evaluated){this._evaluated=!0;try{this._actual=new RegExp(this._pattern,this._flags)}catch(e){}}return this._actual}isSupported(){return null!==this.get()}}class j extends F{constructor(){super({id:"editor.action.transformToTitlecase",label:k.NC("editor.transformToTitlecase","Transform to Title Case"),alias:"Transform to Title Case",precondition:m.u.writable})}_modifyText(e,t){const n=j.titleBoundary.get();return n?e.toLocaleLowerCase().replace(n,(e=>e.toLocaleUpperCase())):e}}j.titleBoundary=new W("(^|[^\\p{L}\\p{N}']|((^|\\P{L})'))\\p{L}","gmu");class $ extends F{constructor(){super({id:"editor.action.transformToSnakecase",label:k.NC("editor.transformToSnakecase","Transform to Snake Case"),alias:"Transform to Snake Case",precondition:m.u.writable})}_modifyText(e,t){const n=$.caseBoundary.get(),i=$.singleLetters.get();return n&&i?e.replace(n,"$1_$2").replace(i,"$1_$2$3").toLocaleLowerCase():e}}$.caseBoundary=new W("(\\p{Ll})(\\p{Lu})","gmu"),$.singleLetters=new W("(\\p{Lu}|\\p{N})(\\p{Lu})(\\p{Ll})","gmu");class K extends F{constructor(){super({id:"editor.action.transformToCamelcase",label:k.NC("editor.transformToCamelcase","Transform to Camel Case"),alias:"Transform to Camel Case",precondition:m.u.writable})}_modifyText(e,t){const n=K.wordBoundary.get();if(!n)return e;const i=e.split(n);return i.shift()+i.map((e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1))).join("")}}K.wordBoundary=new W("[_\\s-]","gm");class H extends F{constructor(){super({id:"editor.action.transformToPascalcase",label:k.NC("editor.transformToPascalcase","Transform to Pascal Case"),alias:"Transform to Pascal Case",precondition:m.u.writable})}_modifyText(e,t){const n=H.wordBoundary.get(),i=H.wordBoundaryToMaintain.get();if(!n||!i)return e;return e.split(i).map((e=>e.split(n))).flat().map((e=>e.substring(0,1).toLocaleUpperCase()+e.substring(1))).join("")}}H.wordBoundary=new W("[_\\s-]","gm"),H.wordBoundaryToMaintain=new W("(?<=\\.)","gm");class J extends F{static isSupported(){return[this.caseBoundary,this.singleLetters,this.underscoreBoundary].every((e=>e.isSupported()))}constructor(){super({id:"editor.action.transformToKebabcase",label:k.NC("editor.transformToKebabcase","Transform to Kebab Case"),alias:"Transform to Kebab Case",precondition:m.u.writable})}_modifyText(e,t){const n=J.caseBoundary.get(),i=J.singleLetters.get(),r=J.underscoreBoundary.get();return n&&i&&r?e.replace(r,"$1-$3").replace(n,"$1-$2").replace(i,"$1-$2").toLocaleLowerCase():e}}J.caseBoundary=new W("(\\p{Ll})(\\p{Lu})","gmu"),J.singleLetters=new W("(\\p{Lu}|\\p{N})(\\p{Lu}\\p{Ll})","gmu"),J.underscoreBoundary=new W("(\\S)(_)(\\S)","gm"),(0,o.Qr)(class extends D{constructor(){super(!1,{id:"editor.action.copyLinesUpAction",label:k.NC("lines.copyUp","Copy Line Up"),alias:"Copy Line Up",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:1552,linux:{primary:3600},weight:100},menuOpts:{menuId:R.eH.MenubarSelectionMenu,group:"2_line",title:k.NC({key:"miCopyLinesUp",comment:["&& denotes a mnemonic"]},"&&Copy Line Up"),order:1}})}}),(0,o.Qr)(class extends D{constructor(){super(!0,{id:"editor.action.copyLinesDownAction",label:k.NC("lines.copyDown","Copy Line Down"),alias:"Copy Line Down",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:1554,linux:{primary:3602},weight:100},menuOpts:{menuId:R.eH.MenubarSelectionMenu,group:"2_line",title:k.NC({key:"miCopyLinesDown",comment:["&& denotes a mnemonic"]},"Co&&py Line Down"),order:2}})}}),(0,o.Qr)(E),(0,o.Qr)(class extends M{constructor(){super(!1,{id:"editor.action.moveLinesUpAction",label:k.NC("lines.moveUp","Move Line Up"),alias:"Move Line Up",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:528,linux:{primary:528},weight:100},menuOpts:{menuId:R.eH.MenubarSelectionMenu,group:"2_line",title:k.NC({key:"miMoveLinesUp",comment:["&& denotes a mnemonic"]},"Mo&&ve Line Up"),order:3}})}}),(0,o.Qr)(class extends M{constructor(){super(!0,{id:"editor.action.moveLinesDownAction",label:k.NC("lines.moveDown","Move Line Down"),alias:"Move Line Down",precondition:m.u.writable,kbOpts:{kbExpr:m.u.editorTextFocus,primary:530,linux:{primary:530},weight:100},menuOpts:{menuId:R.eH.MenubarSelectionMenu,group:"2_line",title:k.NC({key:"miMoveLinesDown",comment:["&& denotes a mnemonic"]},"Move &&Line Down"),order:4}})}}),(0,o.Qr)(class extends I{constructor(){super(!1,{id:"editor.action.sortLinesAscending",label:k.NC("lines.sortAscending","Sort Lines Ascending"),alias:"Sort Lines Ascending",precondition:m.u.writable})}}),(0,o.Qr)(class extends I{constructor(){super(!0,{id:"editor.action.sortLinesDescending",label:k.NC("lines.sortDescending","Sort Lines Descending"),alias:"Sort Lines Descending",precondition:m.u.writable})}}),(0,o.Qr)(O),(0,o.Qr)(P),(0,o.Qr)(U),(0,o.Qr)(A),(0,o.Qr)(B),(0,o.Qr)(Y),(0,o.Qr)(V),(0,o.Qr)(class extends Q{constructor(){super({id:"deleteAllLeft",label:k.NC("lines.deleteAllLeft","Delete All Left"),alias:"Delete All Left",precondition:m.u.writable,kbOpts:{kbExpr:m.u.textInputFocus,primary:0,mac:{primary:2049},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];let r=0;return t.forEach((t=>{let o;if(1===t.endColumn&&r>0){const e=t.startLineNumber-r;o=new g.Y(e,t.startColumn,e,t.startColumn)}else o=new g.Y(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn);r+=t.endLineNumber-t.startLineNumber,t.intersectRanges(e)?n=o:i.push(o)})),n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getSelections();if(null===t)return[];let n=t;const i=e.getModel();return null===i?[]:(n.sort(c.e.compareRangesUsingStarts),n=n.map((e=>{if(e.isEmpty()){if(1===e.startColumn){const t=Math.max(1,e.startLineNumber-1),n=1===e.startLineNumber?1:i.getLineLength(t)+1;return new c.e(t,n,e.startLineNumber,1)}return new c.e(e.startLineNumber,1,e.startLineNumber,e.startColumn)}return new c.e(e.startLineNumber,1,e.endLineNumber,e.endColumn)})),n)}}),(0,o.Qr)(class extends Q{constructor(){super({id:"deleteAllRight",label:k.NC("lines.deleteAllRight","Delete All Right"),alias:"Delete All Right",precondition:m.u.writable,kbOpts:{kbExpr:m.u.textInputFocus,primary:0,mac:{primary:297,secondary:[2068]},weight:100}})}_getEndCursorState(e,t){let n=null;const i=[];for(let r=0,o=t.length,s=0;r<o;r++){const o=t[r],a=new g.Y(o.startLineNumber-s,o.startColumn,o.startLineNumber-s,o.startColumn);o.intersectRanges(e)?n=a:i.push(a)}return n&&i.unshift(n),i}_getRangesToDelete(e){const t=e.getModel();if(null===t)return[];const n=e.getSelections();if(null===n)return[];const i=n.map((e=>{if(e.isEmpty()){const n=t.getLineMaxColumn(e.startLineNumber);return e.startColumn===n?new c.e(e.startLineNumber,e.startColumn,e.startLineNumber+1,1):new c.e(e.startLineNumber,e.startColumn,e.startLineNumber,n)}return e}));return i.sort(c.e.compareRangesUsingStarts),i}}),(0,o.Qr)(q),(0,o.Qr)(z),(0,o.Qr)(class extends F{constructor(){super({id:"editor.action.transformToUppercase",label:k.NC("editor.transformToUppercase","Transform to Uppercase"),alias:"Transform to Uppercase",precondition:m.u.writable})}_modifyText(e,t){return e.toLocaleUpperCase()}}),(0,o.Qr)(class extends F{constructor(){super({id:"editor.action.transformToLowercase",label:k.NC("editor.transformToLowercase","Transform to Lowercase"),alias:"Transform to Lowercase",precondition:m.u.writable})}_modifyText(e,t){return e.toLocaleLowerCase()}}),$.caseBoundary.isSupported()&&$.singleLetters.isSupported()&&(0,o.Qr)($),K.wordBoundary.isSupported()&&(0,o.Qr)(K),H.wordBoundary.isSupported()&&(0,o.Qr)(H),j.titleBoundary.isSupported()&&(0,o.Qr)(j),J.isSupported()&&(0,o.Qr)(J)},76:(e,t,n)=>{var i,r=n(9488),o=n(15393),s=n(71050),a=n(41264),u=n(17301),l=n(4669),d=n(5976),c=n(97295),g=n(70666),m=n(16830),h=n(11640),p=n(50187),L=n(24314),b=n(29102),C=n(54530),f=n(51381),N=n(63580),_=n(93983),w=n(71922),x=n(82992),S=n(88191),y=n(84013),T=function(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},k=function(e,t){return function(n,i){t(n,i,e)}};const R=new _.uy("LinkedEditingInputVisible",!1);let v=i=class extends d.JT{static get(e){return e.getContribution(i.ID)}constructor(e,t,n,i,r){super(),this.languageConfigurationService=i,this._syncRangesToken=0,this._localToDispose=this._register(new d.SL),this._editor=e,this._providers=n.linkedEditingRangeProvider,this._enabled=!1,this._visibleContextKey=R.bindTo(t),this._debounceInformation=r.for(this._providers,"Linked Editing",{max:200}),this._currentDecorations=this._editor.createDecorationsCollection(),this._languageWordPattern=null,this._currentWordPattern=null,this._ignoreChangeEvent=!1,this._localToDispose=this._register(new d.SL),this._rangeUpdateTriggerPromise=null,this._rangeSyncTriggerPromise=null,this._currentRequestCts=null,this._currentRequestPosition=null,this._currentRequestModelVersion=null,this._register(this._editor.onDidChangeModel((()=>this.reinitialize(!0)))),this._register(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(70)||e.hasChanged(93))&&this.reinitialize(!1)}))),this._register(this._providers.onDidChange((()=>this.reinitialize(!1)))),this._register(this._editor.onDidChangeModelLanguage((()=>this.reinitialize(!0)))),this.reinitialize(!0)}reinitialize(e){const t=this._editor.getModel(),n=null!==t&&(this._editor.getOption(70)||this._editor.getOption(93))&&this._providers.has(t);if(n===this._enabled&&!e)return;if(this._enabled=n,this.clearRanges(),this._localToDispose.clear(),!n||null===t)return;this._localToDispose.add(l.ju.runAndSubscribe(t.onDidChangeLanguageConfiguration,(()=>{this._languageWordPattern=this.languageConfigurationService.getLanguageConfiguration(t.getLanguageId()).getWordDefinition()})));const i=new o.vp(this._debounceInformation.get(t)),r=()=>{var e;this._rangeUpdateTriggerPromise=i.trigger((()=>this.updateRanges()),null!==(e=this._debounceDuration)&&void 0!==e?e:this._debounceInformation.get(t))},s=new o.vp(0),a=e=>{this._rangeSyncTriggerPromise=s.trigger((()=>this._syncRanges(e)))};this._localToDispose.add(this._editor.onDidChangeCursorPosition((()=>{r()}))),this._localToDispose.add(this._editor.onDidChangeModelContent((e=>{if(!this._ignoreChangeEvent&&this._currentDecorations.length>0){const t=this._currentDecorations.getRange(0);if(t&&e.changes.every((e=>t.intersectRanges(e.range))))return void a(this._syncRangesToken)}r()}))),this._localToDispose.add({dispose:()=>{i.dispose(),s.dispose()}}),this.updateRanges()}_syncRanges(e){if(!this._editor.hasModel()||e!==this._syncRangesToken||0===this._currentDecorations.length)return;const t=this._editor.getModel(),n=this._currentDecorations.getRange(0);if(!n||n.startLineNumber!==n.endLineNumber)return this.clearRanges();const i=t.getValueInRange(n);if(this._currentWordPattern){const e=i.match(this._currentWordPattern);if((e?e[0].length:0)!==i.length)return this.clearRanges()}const r=[];for(let e=1,n=this._currentDecorations.length;e<n;e++){const n=this._currentDecorations.getRange(e);if(n)if(n.startLineNumber!==n.endLineNumber)r.push({range:n,text:i});else{let e=t.getValueInRange(n),o=i,s=n.startColumn,a=n.endColumn;const u=c.Mh(e,o);s+=u,e=e.substr(u),o=o.substr(u);const l=c.P1(e,o);a-=l,e=e.substr(0,e.length-l),o=o.substr(0,o.length-l),s===a&&0===o.length||r.push({range:new L.e(n.startLineNumber,s,n.endLineNumber,a),text:o})}}if(0!==r.length)try{this._editor.popUndoStop(),this._ignoreChangeEvent=!0;const e=this._editor._getViewModel().getPrevEditOperationType();this._editor.executeEdits("linkedEditing",r),this._editor._getViewModel().setPrevEditOperationType(e)}finally{this._ignoreChangeEvent=!1}}dispose(){this.clearRanges(),super.dispose()}clearRanges(){this._visibleContextKey.set(!1),this._currentDecorations.clear(),this._currentRequestCts&&(this._currentRequestCts.cancel(),this._currentRequestCts=null,this._currentRequestPosition=null)}async updateRanges(e=!1){if(!this._editor.hasModel())return void this.clearRanges();const t=this._editor.getPosition();if(!this._enabled&&!e||this._editor.getSelections().length>1)return void this.clearRanges();const n=this._editor.getModel(),r=n.getVersionId();if(this._currentRequestPosition&&this._currentRequestModelVersion===r){if(t.equals(this._currentRequestPosition))return;if(this._currentDecorations.length>0){const e=this._currentDecorations.getRange(0);if(e&&e.containsPosition(t))return}}this.clearRanges(),this._currentRequestPosition=t,this._currentRequestModelVersion=r;const o=this._currentRequestCts=new s.AU;try{const e=new y.G(!1),s=await M(this._providers,n,t,o.token);if(this._debounceInformation.update(n,e.elapsed()),o!==this._currentRequestCts)return;if(this._currentRequestCts=null,r!==n.getVersionId())return;let a=[];(null==s?void 0:s.ranges)&&(a=s.ranges),this._currentWordPattern=(null==s?void 0:s.wordPattern)||this._languageWordPattern;let u=!1;for(let e=0,n=a.length;e<n;e++)if(L.e.containsPosition(a[e],t)){if(u=!0,0!==e){const t=a[e];a.splice(e,1),a.unshift(t)}break}if(!u)return void this.clearRanges();const l=a.map((e=>({range:e,options:i.DECORATION})));this._visibleContextKey.set(!0),this._currentDecorations.set(l),this._syncRangesToken++}catch(e){(0,u.n2)(e)||(0,u.dL)(e),this._currentRequestCts!==o&&this._currentRequestCts||this.clearRanges()}}};v.ID="editor.contrib.linkedEditing",v.DECORATION=C.qx.register({description:"linked-editing",stickiness:0,className:"linked-editing-decoration"}),v=i=T([k(1,_.i6),k(2,w.p),k(3,f.c_),k(4,S.A)],v);class D extends m.R6{constructor(){super({id:"editor.action.linkedEditing",label:N.NC("linkedEditing.label","Start Linked Editing"),alias:"Start Linked Editing",precondition:_.Ao.and(b.u.writable,b.u.hasRenameProvider),kbOpts:{kbExpr:b.u.editorTextFocus,primary:3132,weight:100}})}runCommand(e,t){const n=e.get(h.$),[i,r]=Array.isArray(t)&&t||[void 0,void 0];return g.o.isUri(i)&&p.L.isIPosition(r)?n.openCodeEditor({resource:i},n.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(r),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),u.dL):super.runCommand(e,t)}run(e,t){const n=v.get(t);return n?Promise.resolve(n.updateRanges(!0)):Promise.resolve()}}const E=m._l.bindToContribution(v.get);function M(e,t,n,i){const s=e.ordered(t);return(0,o.Ps)(s.map((e=>async()=>{try{return await e.provideLinkedEditingRanges(t,n,i)}catch(e){return void(0,u.Cp)(e)}})),(e=>!!e&&r.Of(null==e?void 0:e.ranges)))}(0,m.fK)(new E({id:"cancelLinkedEditingInput",precondition:R,handler:e=>e.clearRanges(),kbOpts:{kbExpr:b.u.editorTextFocus,weight:199,primary:9,secondary:[1033]}}));(0,x.P6G)("editor.linkedEditingBackground",{dark:a.Il.fromHex("#f00").transparent(.3),light:a.Il.fromHex("#f00").transparent(.3),hcDark:a.Il.fromHex("#f00").transparent(.3),hcLight:a.Il.white},N.NC("editorLinkedEditingBackground","Background color when the editor auto renames on type."));(0,m.sb)("_executeLinkedEditingProvider",((e,t,n)=>{const{linkedEditingRangeProvider:i}=e.get(w.p);return M(i,t,n,s.Ts.None)})),(0,m._K)(v.ID,v,1),(0,m.Qr)(D)}}]);