"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[4829],{72545:(e,t,i)=>{i.d(t,{$:()=>m,N:()=>f});var s,o=i(96250),r=i(77514),n=i(17301),l=i(4669),d=i(5976),h=i(52136),a=i(72042),c=i(68801),_=i(82963),u=i(50988),g=function(e,t,i,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},v=function(e,t){return function(i,s){t(i,s,e)}};let m=s=class{constructor(e,t,i){this._options=e,this._languageService=t,this._openerService=i,this._onDidRenderAsync=new l.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,i){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const s=new d.SL,r=s.add((0,o.ap)(e,{...this._getRenderOptions(e,s),...t},i));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>s.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(e,t)=>{var i,o,r;let n;e?n=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(n=null===(i=this._options.editor.getModel())||void 0===i?void 0:i.getLanguageId()),n||(n=c.bd);const l=await(0,_.C2)(this._languageService,t,n),d=document.createElement("span");if(d.innerHTML=null!==(r=null===(o=s._ttpTokenizer)||void 0===o?void 0:o.createHTML(l))&&void 0!==r?r:l,this._options.editor){const e=this._options.editor.getOption(50);(0,h.N)(d,e)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(d.style.fontSize=this._options.codeBlockFontSize),d},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:t=>f(this._openerService,t,e.isTrusted),disposables:t}}}};async function f(e,t,i){try{return await e.open(t,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:p(i)})}catch(e){return(0,n.dL)(e),!1}}function p(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}m._ttpTokenizer=(0,r.Z)("tokenizeToString",{createHTML:e=>e}),m=s=g([v(1,a.O),v(2,u.v)],m)},41543:(e,t,i)=>{i.d(t,{C:()=>U});var s=i(5976),o=i(21070),r=i(97488),n=i(65321),l=i(59538),d=i(9488),h=i(35534),a=i(17301),c=i(96512),_=i(76633),u=i(19247),g=i(3860),v=i(29102),m=i(93983),f=i(72065),p=i(60972),w=i(43416),b=i(32429),y=i(56652),S=i(59856),E=i(84144),D=i(33528),M=i(27628),k=function(e,t,i,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},C=function(e,t){return function(i,s){t(i,s,e)}};class L{constructor(e,t){this.viewModel=e,this.deltaScrollVertical=t}getId(){return this.viewModel}}let x=class extends s.JT{constructor(e,t,i,r){super(),this._container=e,this._overflowWidgetsDomNode=t,this._workbenchUIElementFactory=i,this._instantiationService=r,this._viewModel=(0,c.uh)(this,void 0),this._collapsed=(0,o.nK)(this,(e=>{var t;return null===(t=this._viewModel.read(e))||void 0===t?void 0:t.collapsed.read(e)})),this._editorContentHeight=(0,c.uh)(this,500),this.contentHeight=(0,o.nK)(this,(e=>(this._collapsed.read(e)?0:this._editorContentHeight.read(e))+this._outerEditorHeight)),this._modifiedContentWidth=(0,c.uh)(this,0),this._modifiedWidth=(0,c.uh)(this,0),this._originalContentWidth=(0,c.uh)(this,0),this._originalWidth=(0,c.uh)(this,0),this.maxScroll=(0,o.nK)(this,(e=>{const t=this._modifiedContentWidth.read(e)-this._modifiedWidth.read(e),i=this._originalContentWidth.read(e)-this._originalWidth.read(e);return t>i?{maxScroll:t,width:this._modifiedWidth.read(e)}:{maxScroll:i,width:this._originalWidth.read(e)}})),this._elements=(0,n.h)("div.multiDiffEntry",[(0,n.h)("div.header@header",[(0,n.h)("div.header-content",[(0,n.h)("div.collapse-button@collapseButton"),(0,n.h)("div.file-path",[(0,n.h)("div.title.modified.show-file-icons@primaryPath",[]),(0,n.h)("div.status.deleted@status",["R"]),(0,n.h)("div.title.original.show-file-icons@secondaryPath",[])]),(0,n.h)("div.actions@actions")])]),(0,n.h)("div.editorParent",[(0,n.h)("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(y.p,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=O(this.editor.getModifiedEditor()),this.isOriginalFocused=O(this.editor.getOriginalEditor()),this.isFocused=(0,o.nK)(this,(e=>this.isModifedFocused.read(e)||this.isOriginalFocused.read(e))),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new s.SL,this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const l=new w.z(this._elements.collapseButton,{});this._register((0,o.EH)((e=>{l.element.className="",l.icon=this._collapsed.read(e)?b.l.chevronRight:b.l.chevronDown}))),this._register(l.onDidClick((()=>{var e;null===(e=this._viewModel.get())||void 0===e||e.collapsed.set(!this._collapsed.get(),void 0)}))),this._register((0,o.EH)((e=>{this._elements.editor.style.display=this._collapsed.read(e)?"none":"block"}))),this._register(this.editor.getModifiedEditor().onDidLayoutChange((e=>{const t=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(t,void 0)}))),this._register(this.editor.getOriginalEditor().onDidLayoutChange((e=>{const t=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(t,void 0)}))),this._register(this.editor.onDidContentSizeChange((e=>{(0,c.Bl)((t=>{this._editorContentHeight.set(e.contentHeight,t),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),t),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),t)}))}))),this._register(this.editor.getOriginalEditor().onDidScrollChange((e=>{if(this._isSettingScrollTop)return;if(!e.scrollTopChanged||!this._data)return;const t=e.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(t)}))),this._register((0,o.EH)((e=>{var t;const i=null===(t=this._viewModel.read(e))||void 0===t?void 0:t.isActive.read(e);this._elements.root.classList.toggle("active",i)}))),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(S.r,this._elements.actions,E.eH.MultiDiffEditorFileToolbar,{actionRunner:this._register(new D.D((()=>{var e;return null===(e=this._viewModel.get())||void 0===e?void 0:e.modifiedUri}))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("navigation")},actionViewItemProvider:(e,t)=>(0,M.Id)(r,e,t)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){function t(e){return{...e,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}this._data=e;const i=e.viewModel.entry.value;i.onOptionsDidChange&&this._dataStore.add(i.onOptionsDidChange((()=>{var e;this.editor.updateOptions(t(null!==(e=i.options)&&void 0!==e?e:{}))}))),(0,c.Bl)((s=>{var o,r,n,l;null===(o=this._resourceLabel)||void 0===o||o.setUri(null!==(r=e.viewModel.modifiedUri)&&void 0!==r?r:e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});let d=!1,h=!1,a=!1,c="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(c="R",d=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(c="A",a=!0):(c="D",h=!0),this._elements.status.classList.toggle("renamed",d),this._elements.status.classList.toggle("deleted",h),this._elements.status.classList.toggle("added",a),this._elements.status.innerText=c,null===(n=this._resourceLabel2)||void 0===n||n.setUri(d?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,s),this.editor.setModel(e.viewModel.diffEditorViewModel,s),this.editor.updateOptions(t(null!==(l=i.options)&&void 0!==l?l:{}))}))}render(e,t,i,s){this._elements.root.style.visibility="visible",this._elements.root.style.top=`${e.start}px`,this._elements.root.style.height=`${e.length}px`,this._elements.root.style.width=`${t}px`,this._elements.root.style.position="absolute";const o=e.length-this._headerHeight,r=Math.max(0,Math.min(s.start-e.start,o));this._elements.header.style.transform=`translateY(${r}px)`,(0,c.Bl)((i=>{this.editor.layout({width:t-16-2,height:e.length-this._outerEditorHeight})}));try{this._isSettingScrollTop=!0,this._lastScrollTop=i,this.editor.getOriginalEditor().setScrollTop(i)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",r>0||i>0),this._elements.header.classList.toggle("collapsed",r===o)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};function O(e){return(0,o.rD)((t=>{const i=new s.SL;return i.add(e.onDidFocusEditorWidget((()=>t(!0)))),i.add(e.onDidBlurEditorWidget((()=>t(!1)))),i}),(()=>e.hasTextFocus()))}x=k([C(3,f.TG)],x);class R{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){var t;let i;if(0===this._unused.size)i=this._create(e),this._itemData.set(i,e);else{const s=[...this._unused.values()];i=null!==(t=s.find((t=>this._itemData.get(t).getId()===e.getId())))&&void 0!==t?t:s[0],this._unused.delete(i),this._itemData.set(i,e),i.setData(e)}return this._used.add(i),{object:i,dispose:()=>{this._used.delete(i),this._unused.size>5?i.dispose():this._unused.add(i)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var T=i(63580),H=function(e,t,i,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},I=function(e,t){return function(i,s){t(i,s,e)}};let W=class extends s.JT{constructor(e,t,i,u,g,f){super(),this._element=e,this._dimension=t,this._viewModel=i,this._workbenchUIElementFactory=u,this._parentContextKeyService=g,this._parentInstantiationService=f,this._scrollableElements=(0,n.h)("div.scrollContent",[(0,n.h)("div@content",{style:{overflow:"hidden"}}),(0,n.h)("div.monaco-editor@overflowWidgetsDomNode",{})]),this._scrollable=this._register(new _.Rm({forceIntegerValues:!1,scheduleAtNextAnimationFrame:e=>(0,n.jL)((0,n.Jj)(this._element),e),smoothScrollDuration:100})),this._scrollableElement=this._register(new l.$Z(this._scrollableElements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this._elements=(0,n.h)("div.monaco-component.multiDiffEditor",{},[(0,n.h)("div",{},[this._scrollableElement.getDomNode()]),(0,n.h)("div.placeholder@placeholder",{},[(0,n.h)("div",[(0,T.NC)("noChangedFiles","No Changed Files")])])]),this._sizeObserver=this._register(new r.DU(this._element,void 0)),this._objectPool=this._register(new R((e=>{const t=this._instantiationService.createInstance(x,this._scrollableElements.content,this._scrollableElements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return t.setData(e),t}))),this.scrollTop=(0,o.rD)(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollTop)),this.scrollLeft=(0,o.rD)(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollLeft)),this._viewItemsInfo=(0,o.Be)(this,((e,t)=>{const i=this._viewModel.read(e);if(!i)return{items:[],getItem:e=>{throw new a.he}};const s=i.items.read(e),o=new Map;return{items:s.map((e=>{var i;const s=t.add(new F(e,this._objectPool,this.scrollLeft,(e=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+e})}))),r=null===(i=this._lastDocStates)||void 0===i?void 0:i[s.getKey()];return r&&(0,c.PS)((e=>{s.setViewState(r,e)})),o.set(e,s),s})),getItem:e=>o.get(e)}})),this._viewItems=this._viewItemsInfo.map(this,(e=>e.items)),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,((e,t)=>e.reduce(((e,i)=>e+i.contentHeight.read(t)+this._spaceBetweenPx),0))),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._register(this._parentInstantiationService.createChild(new p.y([m.i6,this._contextKeyService]))),this._lastDocStates={},this._contextKeyService.createKey(v.u.inMultiDiffEditor.key,!0),this._register((0,o.gp)(((e,t)=>{const i=this._viewModel.read(e);if(i&&i.contextKeys)for(const[e,o]of Object.entries(i.contextKeys)){const i=this._contextKeyService.createKey(e,void 0);i.set(o),t.add((0,s.OF)((()=>i.reset())))}})));const w=this._parentContextKeyService.createKey(v.u.multiDiffEditorAllCollapsed.key,!1);this._register((0,o.EH)((e=>{const t=this._viewModel.read(e);if(t){const i=t.items.read(e).every((t=>t.collapsed.read(e)));w.set(i)}}))),this._register((0,o.EH)((e=>{const t=this._dimension.read(e);this._sizeObserver.observe(t)}))),this._register((0,o.EH)((e=>{const t=this._viewItems.read(e);this._elements.placeholder.classList.toggle("visible",0===t.length)}))),this._scrollableElements.content.style.position="relative",this._register((0,o.EH)((e=>{const t=this._sizeObserver.height.read(e);this._scrollableElements.root.style.height=`${t}px`;const i=this._totalHeight.read(e);this._scrollableElements.content.style.height=`${i}px`;const s=this._sizeObserver.width.read(e);let o=s;const r=this._viewItems.read(e),n=(0,h.hV)(r,(0,d.tT)((t=>t.maxScroll.read(e).maxScroll),d.fv));if(n){o=s+n.maxScroll.read(e).maxScroll}this._scrollableElement.setScrollDimensions({width:s,height:t,scrollHeight:i,scrollWidth:o})}))),e.replaceChildren(this._elements.root),this._register((0,s.OF)((()=>{e.replaceChildren()}))),this._register(this._register((0,o.EH)((e=>{(0,c.Bl)((t=>{this.render(e)}))}))))}render(e){const t=this.scrollTop.read(e);let i=0,s=0,o=0;const r=this._sizeObserver.height.read(e),n=u.q.ofStartAndLength(t,r),l=this._sizeObserver.width.read(e);for(const d of this._viewItems.read(e)){const h=d.contentHeight.read(e),a=Math.min(h,r),c=u.q.ofStartAndLength(s,a),_=u.q.ofStartAndLength(o,h);if(_.isBefore(n))i-=h-a,d.hide();else if(_.isAfter(n))d.hide();else{const e=Math.max(0,Math.min(n.start-_.start,h-a));i-=e;const s=u.q.ofStartAndLength(t+i,r);d.render(c,e,l,s)}s+=a+this._spaceBetweenPx,o+=h+this._spaceBetweenPx}this._scrollableElements.content.style.transform=`translateY(${-(t+i)}px)`}};W=H([I(4,m.i6),I(5,f.TG)],W);class F extends s.JT{constructor(e,t,i,s){super(),this.viewModel=e,this._objectPool=t,this._scrollLeft=i,this._deltaScrollVertical=s,this._templateRef=this._register((0,c.DN)(this,void 0)),this.contentHeight=(0,o.nK)(this,(e=>{var t,i,s;return null!==(s=null===(i=null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object.contentHeight)||void 0===i?void 0:i.read(e))&&void 0!==s?s:this.viewModel.lastTemplateData.read(e).contentHeight})),this.maxScroll=(0,o.nK)(this,(e=>{var t,i;return null!==(i=null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object.maxScroll.read(e))&&void 0!==i?i:{maxScroll:0,scrollWidth:0}})),this.template=(0,o.nK)(this,(e=>{var t;return null===(t=this._templateRef.read(e))||void 0===t?void 0:t.object})),this._isHidden=(0,o.uh)(this,!1),this._isFocused=(0,o.nK)(this,(e=>{var t,i;return null!==(i=null===(t=this.template.read(e))||void 0===t?void 0:t.isFocused.read(e))&&void 0!==i&&i})),this.viewModel.setIsFocused(this._isFocused,void 0),this._register((0,o.EH)((e=>{var t;const i=this._scrollLeft.read(e);null===(t=this._templateRef.read(e))||void 0===t||t.object.setScrollLeft(i)}))),this._register((0,o.EH)((e=>{const t=this._templateRef.read(e);if(!t)return;if(!this._isHidden.read(e))return;t.object.isFocused.read(e)||this._clear()})))}dispose(){this._clear(),super.dispose()}toString(){var e;return`VirtualViewItem(${null===(e=this.viewModel.entry.value.modified)||void 0===e?void 0:e.uri.toString()})`}getKey(){return this.viewModel.getKey()}setViewState(e,t){var i;this.viewModel.collapsed.set(e.collapsed,t),this._updateTemplateData(t);const s=this.viewModel.lastTemplateData.get(),o=null===(i=e.selections)||void 0===i?void 0:i.map(g.Y.liftSelection);this.viewModel.lastTemplateData.set({...s,selections:o},t);const r=this._templateRef.get();r&&o&&r.object.editor.setSelections(o)}_updateTemplateData(e){var t;const i=this._templateRef.get();i&&this.viewModel.lastTemplateData.set({contentHeight:i.object.contentHeight.get(),selections:null!==(t=i.object.editor.getSelections())&&void 0!==t?t:void 0},e)}_clear(){const e=this._templateRef.get();e&&(0,c.PS)((t=>{this._updateTemplateData(t),e.object.hide(),this._templateRef.set(void 0,t)}))}hide(){this._isHidden.set(!0,void 0)}render(e,t,i,s){this._isHidden.set(!1,void 0);let o=this._templateRef.get();if(!o){o=this._objectPool.getUnusedObj(new L(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(o,void 0);const e=this.viewModel.lastTemplateData.get().selections;e&&o.object.editor.setSelections(e)}o.object.render(e,i,t,s)}}var j=i(82992);(0,j.P6G)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,T.NC)("multiDiffEditor.headerBackground","The background color of the diff editor's header")),(0,j.P6G)("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},(0,T.NC)("multiDiffEditor.background","The background color of the multi file diff editor")),(0,j.P6G)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,T.NC)("multiDiffEditor.border","The border color of the multi file diff editor"));var B=function(e,t,i,s){var o,r=arguments.length,n=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,i,n):o(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},P=function(e,t){return function(i,s){t(i,s,e)}};let U=class extends s.JT{constructor(e,t,i){super(),this._element=e,this._workbenchUIElementFactory=t,this._instantiationService=i,this._dimension=(0,o.uh)(this,void 0),this._viewModel=(0,o.uh)(this,void 0),this._widgetImpl=(0,o.Be)(this,((e,t)=>((0,r.NW)(x,e),t.add(this._instantiationService.createInstance((0,r.NW)(W,e),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))))),this._register((0,o.jx)(this._widgetImpl))}};U=B([P(2,f.TG)],U)},33528:(e,t,i)=>{i.d(t,{D:()=>o});var s=i(74741);class o extends s.Wi{constructor(e){super(),this._getContext=e}runAction(e,t){const i=this._getContext();return super.runAction(e,i)}}}}]);