"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[6274],{28763:(e,t,n)=>{var o=n(15393),i=n(5976),s=n(16830),r=n(51381),c=n(54530),a=n(85215),u=function(e,t,n,o){var i,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(s<3?i(r):s>3?i(t,n,r):i(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},d=function(e,t){return function(n,o){t(n,o,e)}};let h=class extends i.JT{constructor(e,t,n){super(),this.editor=e,this.languageConfigurationService=t,this.editorWorkerService=n,this.decorations=this.editor.createDecorationsCollection(),this.options=this.createOptions(e.getOption(73)),this.computePromise=null,this.currentOccurrences={},this._register(e.onDidChangeModel((t=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)}))),this._register(e.onDidChangeModelLanguage((t=>{this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0)}))),this._register(t.onDidChange((t=>{var n;const o=null===(n=this.editor.getModel())||void 0===n?void 0:n.getLanguageId();o&&t.affects(o)&&(this.currentOccurrences={},this.options=this.createOptions(e.getOption(73)),this.stop(),this.computeSectionHeaders.schedule(0))}))),this._register(e.onDidChangeConfiguration((t=>{this.options&&!t.hasChanged(73)||(this.options=this.createOptions(e.getOption(73)),this.updateDecorations([]),this.stop(),this.computeSectionHeaders.schedule(0))}))),this._register(this.editor.onDidChangeModelContent((e=>{this.computeSectionHeaders.schedule()}))),this._register(e.onDidChangeModelTokens((e=>{this.computeSectionHeaders.isScheduled()||this.computeSectionHeaders.schedule(1e3)}))),this.computeSectionHeaders=this._register(new o.pY((()=>{this.findSectionHeaders()}),250)),this.computeSectionHeaders.schedule(0)}createOptions(e){if(!e||!this.editor.hasModel())return;const t=this.editor.getModel().getLanguageId();if(!t)return;const n=this.languageConfigurationService.getLanguageConfiguration(t).comments,o=this.languageConfigurationService.getLanguageConfiguration(t).foldingRules;return n||(null==o?void 0:o.markers)?{foldingRules:o,findMarkSectionHeaders:e.showMarkSectionHeaders,findRegionSectionHeaders:e.showRegionSectionHeaders}:void 0}findSectionHeaders(){var e,t;if(!this.editor.hasModel()||!(null===(e=this.options)||void 0===e?void 0:e.findMarkSectionHeaders)&&!(null===(t=this.options)||void 0===t?void 0:t.findRegionSectionHeaders))return;const n=this.editor.getModel();if(n.isDisposed()||n.isTooLargeForSyncing())return;const o=n.getVersionId();this.editorWorkerService.findSectionHeaders(n.uri,this.options).then((e=>{n.isDisposed()||n.getVersionId()!==o||this.updateDecorations(e)}))}updateDecorations(e){const t=this.editor.getModel();t&&(e=e.filter((e=>{if(!e.shouldBeInComments)return!0;const n=t.validateRange(e.range),o=t.tokenization.getLineTokens(n.startLineNumber),i=o.findTokenIndexAtOffset(n.startColumn-1),s=o.getStandardTokenType(i);return o.getLanguageId(i)===t.getLanguageId()&&1===s})));const n=Object.values(this.currentOccurrences).map((e=>e.decorationId)),o=e.map((e=>function(e){return{range:e.range,options:c.qx.createDynamic({description:"section-header",stickiness:3,collapseOnReplaceEdit:!0,minimap:{color:void 0,position:1,sectionHeaderStyle:e.hasSeparatorLine?2:1,sectionHeaderText:e.text}})}}(e)));this.editor.changeDecorations((t=>{const i=t.deltaDecorations(n,o);this.currentOccurrences={};for(let t=0,n=i.length;t<n;t++){const n={sectionHeader:e[t],decorationId:i[t]};this.currentOccurrences[n.decorationId]=n}}))}stop(){this.computeSectionHeaders.cancel(),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop(),this.decorations.clear()}};h.ID="editor.sectionHeaderDetector",h=u([d(1,r.c_),d(2,a.p)],h),(0,s._K)(h.ID,h,1)},61168:(e,t,n)=>{var o,i=n(5976),s=n(17301),r=n(73733),c=n(33108),a=n(15393),u=n(71050),d=n(97781),h=n(65072),l=n(33603),g=n(88191),m=n(84013),_=n(71922),p=n(73343),f=n(10637),S=n(44408),D=function(e,t,n,o){var i,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(s<3?i(r):s>3?i(t,n,r):i(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},k=function(e,t){return function(n,o){t(n,o,e)}};let v=class extends i.JT{constructor(e,t,n,o,i,s){super(),this._watchers=Object.create(null);const r=t=>{this._watchers[t.uri.toString()]=new T(t,e,n,i,s)},c=(e,t)=>{t.dispose(),delete this._watchers[e.uri.toString()]},a=()=>{for(const e of t.getModels()){const t=this._watchers[e.uri.toString()];(0,S.t)(e,n,o)?t||r(e):t&&c(e,t)}};t.getModels().forEach((e=>{(0,S.t)(e,n,o)&&r(e)})),this._register(t.onModelAdded((e=>{(0,S.t)(e,n,o)&&r(e)}))),this._register(t.onModelRemoved((e=>{const t=this._watchers[e.uri.toString()];t&&c(e,t)}))),this._register(o.onDidChangeConfiguration((e=>{e.affectsConfiguration(S.e)&&a()}))),this._register(n.onDidColorThemeChange(a))}dispose(){for(const e of Object.values(this._watchers))e.dispose();super.dispose()}};v=D([k(0,p.s),k(1,r.q),k(2,d.XE),k(3,c.Ui),k(4,g.A),k(5,_.p)],v);let T=o=class extends i.JT{constructor(e,t,n,s,r){super(),this._semanticTokensStylingService=t,this._isDisposed=!1,this._model=e,this._provider=r.documentSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentSemanticTokens",{min:o.REQUEST_MIN_DELAY,max:o.REQUEST_MAX_DELAY}),this._fetchDocumentSemanticTokens=this._register(new a.pY((()=>this._fetchDocumentSemanticTokensNow()),o.REQUEST_MIN_DELAY)),this._currentDocumentResponse=null,this._currentDocumentRequestCancellationTokenSource=null,this._documentProvidersChangeListeners=[],this._providersChangedDuringRequest=!1,this._register(this._model.onDidChangeContent((()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(this._model.onDidChangeAttached((()=>{this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(this._model.onDidChangeLanguage((()=>{this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(0)})));const c=()=>{(0,i.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[];for(const t of this._provider.all(e))"function"==typeof t.onDidChange&&this._documentProvidersChangeListeners.push(t.onDidChange((()=>{this._currentDocumentRequestCancellationTokenSource?this._providersChangedDuringRequest=!0:this._fetchDocumentSemanticTokens.schedule(0)})))};c(),this._register(this._provider.onDidChange((()=>{c(),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._register(n.onDidColorThemeChange((e=>{this._setDocumentSemanticTokens(null,null,null,[]),this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))}))),this._fetchDocumentSemanticTokens.schedule(0)}dispose(){this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._currentDocumentRequestCancellationTokenSource&&(this._currentDocumentRequestCancellationTokenSource.cancel(),this._currentDocumentRequestCancellationTokenSource=null),(0,i.B9)(this._documentProvidersChangeListeners),this._documentProvidersChangeListeners=[],this._setDocumentSemanticTokens(null,null,null,[]),this._isDisposed=!0,super.dispose()}_fetchDocumentSemanticTokensNow(){if(this._currentDocumentRequestCancellationTokenSource)return;if(!(0,l.Jc)(this._provider,this._model))return void(this._currentDocumentResponse&&this._model.tokenization.setSemanticTokens(null,!1));if(!this._model.isAttachedToEditor())return;const e=new u.AU,t=this._currentDocumentResponse?this._currentDocumentResponse.provider:null,n=this._currentDocumentResponse&&this._currentDocumentResponse.resultId||null,o=(0,l.ML)(this._provider,this._model,t,n,e.token);this._currentDocumentRequestCancellationTokenSource=e,this._providersChangedDuringRequest=!1;const i=[],r=this._model.onDidChangeContent((e=>{i.push(e)})),c=new m.G(!1);o.then((e=>{if(this._debounceInformation.update(this._model,c.elapsed()),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),e){const{provider:t,tokens:n}=e,o=this._semanticTokensStylingService.getStyling(t);this._setDocumentSemanticTokens(t,n||null,o,i)}else this._setDocumentSemanticTokens(null,null,null,i)}),(e=>{e&&(s.n2(e)||"string"==typeof e.message&&-1!==e.message.indexOf("busy"))||s.dL(e),this._currentDocumentRequestCancellationTokenSource=null,r.dispose(),(i.length>0||this._providersChangedDuringRequest)&&(this._fetchDocumentSemanticTokens.isScheduled()||this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model)))}))}static _copy(e,t,n,o,i){i=Math.min(i,n.length-o,e.length-t);for(let s=0;s<i;s++)n[o+s]=e[t+s]}_setDocumentSemanticTokens(e,t,n,i){const s=this._currentDocumentResponse,r=()=>{(i.length>0||this._providersChangedDuringRequest)&&!this._fetchDocumentSemanticTokens.isScheduled()&&this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model))};if(this._currentDocumentResponse&&(this._currentDocumentResponse.dispose(),this._currentDocumentResponse=null),this._isDisposed)e&&t&&e.releaseDocumentSemanticTokens(t.resultId);else if(e&&n){if(!t)return this._model.tokenization.setSemanticTokens(null,!0),void r();if((0,l.Vj)(t)){if(!s)return void this._model.tokenization.setSemanticTokens(null,!0);if(0===t.edits.length)t={resultId:t.resultId,data:s.data};else{let e=0;for(const n of t.edits)e+=(n.data?n.data.length:0)-n.deleteCount;const i=s.data,r=new Uint32Array(i.length+e);let c=i.length,a=r.length;for(let e=t.edits.length-1;e>=0;e--){const u=t.edits[e];if(u.start>i.length)return n.warnInvalidEditStart(s.resultId,t.resultId,e,u.start,i.length),void this._model.tokenization.setSemanticTokens(null,!0);const d=c-(u.start+u.deleteCount);d>0&&(o._copy(i,c-d,r,a-d,d),a-=d),u.data&&(o._copy(u.data,0,r,a-u.data.length,u.data.length),a-=u.data.length),c=u.start}c>0&&o._copy(i,0,r,0,c),t={resultId:t.resultId,data:r}}}if((0,l.Vl)(t)){this._currentDocumentResponse=new R(e,t.resultId,t.data);const o=(0,h.h)(t,n,this._model.getLanguageId());if(i.length>0)for(const e of i)for(const t of o)for(const n of e.changes)t.applyEdit(n.range,n.text);this._model.tokenization.setSemanticTokens(o,!0)}else this._model.tokenization.setSemanticTokens(null,!0);r()}else this._model.tokenization.setSemanticTokens(null,!1)}};T.REQUEST_MIN_DELAY=300,T.REQUEST_MAX_DELAY=2e3,T=o=D([k(1,p.s),k(2,d.XE),k(3,g.A),k(4,_.p)],T);class R{constructor(e,t,n){this.provider=e,this.resultId=t,this.data=n}dispose(){this.provider.releaseDocumentSemanticTokens(this.resultId)}}(0,f.y)(v)},89995:(e,t,n)=>{var o=n(15393),i=n(5976),s=n(16830),r=n(33603),c=n(44408),a=n(65072),u=n(33108),d=n(97781),h=n(88191),l=n(84013),g=n(71922),m=n(73343),_=function(e,t,n,o){var i,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(s<3?i(r):s>3?i(t,n,r):i(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},p=function(e,t){return function(n,o){t(n,o,e)}};let f=class extends i.JT{constructor(e,t,n,i,s,r){super(),this._semanticTokensStylingService=t,this._themeService=n,this._configurationService=i,this._editor=e,this._provider=r.documentRangeSemanticTokensProvider,this._debounceInformation=s.for(this._provider,"DocumentRangeSemanticTokens",{min:100,max:500}),this._tokenizeViewport=this._register(new o.pY((()=>this._tokenizeViewportNow()),100)),this._outstandingRequests=[];const a=()=>{this._editor.hasModel()&&this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()))};this._register(this._editor.onDidScrollChange((()=>{a()}))),this._register(this._editor.onDidChangeModel((()=>{this._cancelAll(),a()}))),this._register(this._editor.onDidChangeModelContent((e=>{this._cancelAll(),a()}))),this._register(this._provider.onDidChange((()=>{this._cancelAll(),a()}))),this._register(this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration(c.e)&&(this._cancelAll(),a())}))),this._register(this._themeService.onDidColorThemeChange((()=>{this._cancelAll(),a()}))),a()}_cancelAll(){for(const e of this._outstandingRequests)e.cancel();this._outstandingRequests=[]}_removeOutstandingRequest(e){for(let t=0,n=this._outstandingRequests.length;t<n;t++)if(this._outstandingRequests[t]===e)return void this._outstandingRequests.splice(t,1)}_tokenizeViewportNow(){if(!this._editor.hasModel())return;const e=this._editor.getModel();if(e.tokenization.hasCompleteSemanticTokens())return;if(!(0,c.t)(e,this._themeService,this._configurationService))return void(e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1));if(!(0,r.KO)(this._provider,e))return void(e.tokenization.hasSomeSemanticTokens()&&e.tokenization.setSemanticTokens(null,!1));const t=this._editor.getVisibleRangesPlusViewportAboveBelow();this._outstandingRequests=this._outstandingRequests.concat(t.map((t=>this._requestRange(e,t))))}_requestRange(e,t){const n=e.getVersionId(),i=(0,o.PG)((n=>Promise.resolve((0,r.OG)(this._provider,e,t,n)))),s=new l.G(!1);return i.then((o=>{if(this._debounceInformation.update(e,s.elapsed()),!o||!o.tokens||e.isDisposed()||e.getVersionId()!==n)return;const{provider:i,tokens:r}=o,c=this._semanticTokensStylingService.getStyling(i);e.tokenization.setPartialSemanticTokens(t,(0,a.h)(r,c,e.getLanguageId()))})).then((()=>this._removeOutstandingRequest(i)),(()=>this._removeOutstandingRequest(i))),i}};f.ID="editor.contrib.viewportSemanticTokens",f=_([p(1,m.s),p(2,d.XE),p(3,u.Ui),p(4,h.A),p(5,g.p)],f),(0,s._K)(f.ID,f,1)},33603:(e,t,n)=>{n.d(t,{Jc:()=>_,KO:()=>S,ML:()=>p,OG:()=>k,Vj:()=>g,Vl:()=>l});var o=n(71050),i=n(17301),s=n(70666),r=n(73733),c=n(94565),a=n(98401),u=n(14704),d=n(24314),h=n(71922);function l(e){return e&&!!e.data}function g(e){return e&&Array.isArray(e.edits)}class m{constructor(e,t,n){this.provider=e,this.tokens=t,this.error=n}}function _(e,t){return e.has(t)}async function p(e,t,n,o,i){const s=function(e,t){const n=e.orderedGroups(t);return n.length>0?n[0]:[]}(e,t),r=await Promise.all(s.map((async e=>{let s,r=null;try{s=await e.provideDocumentSemanticTokens(t,e===n?o:null,i)}catch(e){r=e,s=null}return s&&(l(s)||g(s))||(s=null),new m(e,s,r)})));for(const e of r){if(e.error)throw e.error;if(e.tokens)return e}return r.length>0?r[0]:null}class f{constructor(e,t){this.provider=e,this.tokens=t}}function S(e,t){return e.has(t)}function D(e,t){const n=e.orderedGroups(t);return n.length>0?n[0]:[]}async function k(e,t,n,o){const s=D(e,t),r=await Promise.all(s.map((async e=>{let s;try{s=await e.provideDocumentRangeSemanticTokens(t,n,o)}catch(e){(0,i.Cp)(e),s=null}return s&&l(s)||(s=null),new f(e,s)})));for(const e of r)if(e.tokens)return e;return r.length>0?r[0]:null}c.P.registerCommand("_provideDocumentSemanticTokensLegend",(async(e,...t)=>{const[n]=t;(0,a.p_)(n instanceof s.o);const o=e.get(r.q).getModel(n);if(!o)return;const{documentSemanticTokensProvider:i}=e.get(h.p),u=function(e,t){const n=e.orderedGroups(t);return n.length>0?n[0]:null}(i,o);return u?u[0].getLegend():e.get(c.H).executeCommand("_provideDocumentRangeSemanticTokensLegend",n)})),c.P.registerCommand("_provideDocumentSemanticTokens",(async(e,...t)=>{const[n]=t;(0,a.p_)(n instanceof s.o);const i=e.get(r.q).getModel(n);if(!i)return;const{documentSemanticTokensProvider:d}=e.get(h.p);if(!_(d,i))return e.get(c.H).executeCommand("_provideDocumentRangeSemanticTokens",n,i.getFullModelRange());const g=await p(d,i,null,null,o.Ts.None);if(!g)return;const{provider:m,tokens:f}=g;if(!f||!l(f))return;const S=(0,u.C)({id:0,type:"full",data:f.data});return f.resultId&&m.releaseDocumentSemanticTokens(f.resultId),S})),c.P.registerCommand("_provideDocumentRangeSemanticTokensLegend",(async(e,...t)=>{const[n,i]=t;(0,a.p_)(n instanceof s.o);const c=e.get(r.q).getModel(n);if(!c)return;const{documentRangeSemanticTokensProvider:u}=e.get(h.p),l=D(u,c);if(0===l.length)return;if(1===l.length)return l[0].getLegend();if(!i||!d.e.isIRange(i))return l[0].getLegend();const g=await k(u,c,d.e.lift(i),o.Ts.None);return g?g.provider.getLegend():void 0})),c.P.registerCommand("_provideDocumentRangeSemanticTokens",(async(e,...t)=>{const[n,i]=t;(0,a.p_)(n instanceof s.o),(0,a.p_)(d.e.isIRange(i));const c=e.get(r.q).getModel(n);if(!c)return;const{documentRangeSemanticTokensProvider:l}=e.get(h.p),g=await k(l,c,d.e.lift(i),o.Ts.None);return g&&g.tokens?(0,u.C)({id:0,type:"full",data:g.tokens.data}):void 0}))},44408:(e,t,n)=>{n.d(t,{e:()=>o,t:()=>i});const o="editor.semanticHighlighting";function i(e,t,n){var i;const s=null===(i=n.getValue(o,{overrideIdentifier:e.getLanguageId(),resource:e.uri}))||void 0===i?void 0:i.enabled;return"boolean"==typeof s?s:t.getColorTheme().semanticHighlighting}}}]);