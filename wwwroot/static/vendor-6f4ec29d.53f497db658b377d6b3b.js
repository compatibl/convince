"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[408],{57253:(e,t,i)=>{var n=i(15393),s=i(71050),o=i(17301),r=i(59365),c=i(5976),a=i(66663),l=i(1432),h=i(95935),u=i(84013),d=i(70666),p=i(16830),g=i(54530),k=i(88191),m=i(71922),f=i(82005),v=i(9488),L=i(98401),_=i(24314),O=i(73733),C=i(94565);class D{constructor(e,t){this._link=e,this._provider=t}toJSON(){return{range:this.range,url:this.url,tooltip:this.tooltip}}get range(){return this._link.range}get url(){return this._link.url}get tooltip(){return this._link.tooltip}async resolve(e){return this._link.url?this._link.url:"function"==typeof this._provider.resolveLink?Promise.resolve(this._provider.resolveLink(this._link,e)).then((t=>(this._link=t||this._link,this._link.url?this.resolve(e):Promise.reject(new Error("missing"))))):Promise.reject(new Error("missing"))}}class b{constructor(e){this._disposables=new c.SL;let t=[];for(const[i,n]of e){const e=i.links.map((e=>new D(e,n)));t=b._union(t,e),(0,c.Wf)(i)&&this._disposables.add(i)}this.links=t}dispose(){this._disposables.dispose(),this.links.length=0}static _union(e,t){const i=[];let n,s,o,r;for(n=0,o=0,s=e.length,r=t.length;n<s&&o<r;){const s=e[n],r=t[o];if(_.e.areIntersectingOrTouching(s.range,r.range)){n++;continue}_.e.compareRangesUsingStarts(s.range,r.range)<0?(i.push(s),n++):(i.push(r),o++)}for(;n<s;n++)i.push(e[n]);for(;o<r;o++)i.push(t[o]);return i}}function w(e,t,i){const n=[],s=e.ordered(t).reverse().map(((e,s)=>Promise.resolve(e.provideLinks(t,i)).then((t=>{t&&(n[s]=[t,e])}),o.Cp)));return Promise.all(s).then((()=>{const e=new b((0,v.kX)(n));return i.isCancellationRequested?(e.dispose(),new b([])):e}))}C.P.registerCommand("_executeLinkProvider",(async(e,...t)=>{let[i,n]=t;(0,L.p_)(i instanceof d.o),"number"!=typeof n&&(n=0);const{linkProvider:o}=e.get(m.p),r=e.get(O.q).getModel(i);if(!r)return[];const c=await w(o,r,s.Ts.None);if(!c)return[];for(let e=0;e<Math.min(n,c.links.length);e++)await c.links[e].resolve(s.Ts.None);const a=c.links.slice(0);return c.dispose(),a}));var M,y=i(63580),N=i(59422),I=i(50988),S=function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var c=e.length-1;c>=0;c--)(s=e[c])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},P=function(e,t){return function(i,n){t(i,n,e)}};let E=M=class extends c.JT{static get(e){return e.getContribution(M.ID)}constructor(e,t,i,s,o){super(),this.editor=e,this.openerService=t,this.notificationService=i,this.languageFeaturesService=s,this.providers=this.languageFeaturesService.linkProvider,this.debounceInformation=o.for(this.providers,"Links",{min:1e3,max:4e3}),this.computeLinks=this._register(new n.pY((()=>this.computeLinksNow()),1e3)),this.computePromise=null,this.activeLinksList=null,this.currentOccurrences={},this.activeLinkDecorationId=null;const r=this._register(new f.yN(e));this._register(r.onMouseMoveOrRelevantKeyDown((([e,t])=>{this._onEditorMouseMove(e,t)}))),this._register(r.onExecute((e=>{this.onEditorMouseUp(e)}))),this._register(r.onCancel((e=>{this.cleanUpActiveLinkDecoration()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(71)&&(this.updateDecorations([]),this.stop(),this.computeLinks.schedule(0))}))),this._register(e.onDidChangeModelContent((e=>{this.editor.hasModel()&&this.computeLinks.schedule(this.debounceInformation.get(this.editor.getModel()))}))),this._register(e.onDidChangeModel((e=>{this.currentOccurrences={},this.activeLinkDecorationId=null,this.stop(),this.computeLinks.schedule(0)}))),this._register(e.onDidChangeModelLanguage((e=>{this.stop(),this.computeLinks.schedule(0)}))),this._register(this.providers.onDidChange((e=>{this.stop(),this.computeLinks.schedule(0)}))),this.computeLinks.schedule(0)}async computeLinksNow(){if(!this.editor.hasModel()||!this.editor.getOption(71))return;const e=this.editor.getModel();if(!e.isTooLargeForSyncing()&&this.providers.has(e)){this.activeLinksList&&(this.activeLinksList.dispose(),this.activeLinksList=null),this.computePromise=(0,n.PG)((t=>w(this.providers,e,t)));try{const t=new u.G(!1);if(this.activeLinksList=await this.computePromise,this.debounceInformation.update(e,t.elapsed()),e.isDisposed())return;this.updateDecorations(this.activeLinksList.links)}catch(e){(0,o.dL)(e)}finally{this.computePromise=null}}}updateDecorations(e){const t="altKey"===this.editor.getOption(78),i=[],n=Object.keys(this.currentOccurrences);for(const e of n){const t=this.currentOccurrences[e];i.push(t.decorationId)}const s=[];if(e)for(const i of e)s.push(R.decoration(i,t));this.editor.changeDecorations((t=>{const n=t.deltaDecorations(i,s);this.currentOccurrences={},this.activeLinkDecorationId=null;for(let t=0,i=n.length;t<i;t++){const i=new R(e[t],n[t]);this.currentOccurrences[i.decorationId]=i}}))}_onEditorMouseMove(e,t){const i="altKey"===this.editor.getOption(78);if(this.isEnabled(e,t)){this.cleanUpActiveLinkDecoration();const t=this.getLinkOccurrence(e.target.position);t&&this.editor.changeDecorations((e=>{t.activate(e,i),this.activeLinkDecorationId=t.decorationId}))}else this.cleanUpActiveLinkDecoration()}cleanUpActiveLinkDecoration(){const e="altKey"===this.editor.getOption(78);if(this.activeLinkDecorationId){const t=this.currentOccurrences[this.activeLinkDecorationId];t&&this.editor.changeDecorations((i=>{t.deactivate(i,e)})),this.activeLinkDecorationId=null}}onEditorMouseUp(e){if(!this.isEnabled(e))return;const t=this.getLinkOccurrence(e.target.position);t&&this.openLinkOccurrence(t,e.hasSideBySideModifier,!0)}openLinkOccurrence(e,t,i=!1){if(!this.openerService)return;const{link:n}=e;n.resolve(s.Ts.None).then((e=>{if("string"==typeof e&&this.editor.hasModel()){const t=this.editor.getModel().uri;if(t.scheme===a.lg.file&&e.startsWith(`${a.lg.file}:`)){const i=d.o.parse(e);if(i.scheme===a.lg.file){const n=h.z_(i);let s=null;n.startsWith("/./")||n.startsWith("\\.\\")?s=`.${n.substr(1)}`:(n.startsWith("//./")||n.startsWith("\\\\.\\"))&&(s=`.${n.substr(2)}`),s&&(e=h.Vo(t,s))}}}return this.openerService.open(e,{openToSide:t,fromUserGesture:i,allowContributedOpeners:!0,allowCommands:!0,fromWorkspace:!0})}),(e=>{const t=e instanceof Error?e.message:e;"invalid"===t?this.notificationService.warn(y.NC("invalid.url","Failed to open this link because it is not well-formed: {0}",n.url.toString())):"missing"===t?this.notificationService.warn(y.NC("missing.url","Failed to open this link because its target is missing.")):(0,o.dL)(e)}))}getLinkOccurrence(e){if(!this.editor.hasModel()||!e)return null;const t=this.editor.getModel().getDecorationsInRange({startLineNumber:e.lineNumber,startColumn:e.column,endLineNumber:e.lineNumber,endColumn:e.column},0,!0);for(const e of t){const t=this.currentOccurrences[e.id];if(t)return t}return null}isEnabled(e,t){return Boolean(6===e.target.type&&(e.hasTriggerModifier||t&&t.keyCodeIsTriggerKey))}stop(){var e;this.computeLinks.cancel(),this.activeLinksList&&(null===(e=this.activeLinksList)||void 0===e||e.dispose(),this.activeLinksList=null),this.computePromise&&(this.computePromise.cancel(),this.computePromise=null)}dispose(){super.dispose(),this.stop()}};E.ID="editor.linkDetector",E=M=S([P(1,I.v),P(2,N.lT),P(3,m.p),P(4,k.A)],E);const x=g.qx.register({description:"detected-link",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link"}),T=g.qx.register({description:"detected-link-active",stickiness:1,collapseOnReplaceEdit:!0,inlineClassName:"detected-link-active"});class R{static decoration(e,t){return{range:e.range,options:R._getOptions(e,t,!1)}}static _getOptions(e,t,i){const n={...i?T:x};return n.hoverMessage=function(e,t){const i=e.url&&/^command:/i.test(e.url.toString()),n=e.tooltip?e.tooltip:i?y.NC("links.navigate.executeCmd","Execute command"):y.NC("links.navigate.follow","Follow link"),s=t?l.dz?y.NC("links.navigate.kb.meta.mac","cmd + click"):y.NC("links.navigate.kb.meta","ctrl + click"):l.dz?y.NC("links.navigate.kb.alt.mac","option + click"):y.NC("links.navigate.kb.alt","alt + click");if(e.url){let t="";if(/^command:/i.test(e.url.toString())){const i=e.url.toString().match(/^command:([^?#]+)/);if(i){const e=i[1];t=y.NC("tooltip.explanation","Execute command {0}",e)}}return new r.W5("",!0).appendLink(e.url.toString(!0).replace(/ /g,"%20"),n,t).appendMarkdown(` (${s})`)}return(new r.W5).appendText(`${n} (${s})`)}(e,t),n}constructor(e,t){this.link=e,this.decorationId=t}activate(e,t){e.changeDecorationOptions(this.decorationId,R._getOptions(this.link,t,!0))}deactivate(e,t){e.changeDecorationOptions(this.decorationId,R._getOptions(this.link,t,!1))}}class W extends p.R6{constructor(){super({id:"editor.action.openLink",label:y.NC("label","Open Link"),alias:"Open Link",precondition:void 0})}run(e,t){const i=E.get(t);if(!i)return;if(!t.hasModel())return;const n=t.getSelections();for(const e of n){const t=i.getLinkOccurrence(e.getEndPosition());t&&i.openLinkOccurrence(t,!1)}}}(0,p._K)(E.ID,E,1),(0,p.Qr)(W)}}]);