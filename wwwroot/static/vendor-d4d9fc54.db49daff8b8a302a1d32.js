"use strict";(self.webpackChunkui_react=self.webpackChunkui_react||[]).push([[1458],{56088:(e,t,i)=>{var n=i(16830),o=i(66520),r=i(29102);var s=i(5976),d=i(21070),a=i(69386),l=i(50187),c=i(24314),u=i(72042),h=i(84973),g=i(92550),p=i(50630),m=i(8396),v=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},f=function(e,t){return function(i,n){t(i,n,e)}};const b="inline-edit";let C=class extends s.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.languageService=i,this.isDisposed=(0,d.uh)(this,!1),this.currentTextModel=(0,d.rD)(this.editor.onDidChangeModel,(()=>this.editor.getModel())),this.uiState=(0,d.nK)(this,(e=>{var t;if(this.isDisposed.read(e))return;const i=this.currentTextModel.read(e);if(i!==this.model.targetTextModel.read(e))return;const n=this.model.ghostText.read(e);if(!n)return;let o=null===(t=this.model.range)||void 0===t?void 0:t.read(e);o&&o.startLineNumber===o.endLineNumber&&o.startColumn===o.endColumn&&(o=void 0);const r=(!o||o.startLineNumber===o.endLineNumber)&&1===n.parts.length&&1===n.parts[0].lines.length,s=1===n.parts.length&&n.parts[0].lines.every((e=>0===e.length)),d=[],a=[];function l(e,t){if(a.length>0){const i=a[a.length-1];t&&i.decorations.push(new g.Kp(i.content.length+1,i.content.length+1+e[0].length,t,0)),i.content+=e[0],e=e.slice(1)}for(const i of e)a.push({content:i,decorations:t?[new g.Kp(1,i.length+1,t,0)]:[]})}const c=i.getLineContent(n.lineNumber);let u,h=0;if(!s){for(const e of n.parts){let t=e.lines;o&&!r&&(l(t,b),t=[]),void 0===u?(d.push({column:e.column,text:t[0],preview:e.preview}),t=t.slice(1)):l([c.substring(h,e.column-1)],void 0),t.length>0&&(l(t,b),void 0===u&&e.column<=c.length&&(u=e.column)),h=e.column-1}void 0!==u&&l([c.substring(h)],void 0)}const p=void 0!==u?new m.rv(u,c.length+1):void 0,v=r||!o?n.lineNumber:o.endLineNumber-1;return{inlineTexts:d,additionalLines:a,hiddenRange:p,lineNumber:v,additionalReservedLineCount:this.model.minReservedLineCount.read(e),targetTextModel:i,range:o,isSingleLine:r,isPureRemove:s,backgroundColoring:this.model.backgroundColoring.read(e)}})),this.decorations=(0,d.nK)(this,(e=>{const t=this.uiState.read(e);if(!t)return[];const i=[];if(t.hiddenRange&&i.push({range:t.hiddenRange.toRange(t.lineNumber),options:{inlineClassName:"inline-edit-hidden",description:"inline-edit-hidden"}}),t.range){const e=[];if(t.isSingleLine)e.push(t.range);else if(t.isPureRemove){const i=t.range.endLineNumber-t.range.startLineNumber;for(let n=0;n<i;n++){const i=t.range.startLineNumber+n,o=t.targetTextModel.getLineFirstNonWhitespaceColumn(i),r=t.targetTextModel.getLineLastNonWhitespaceColumn(i),s=new c.e(i,o,i,r);e.push(s)}}else{const i=t.range.endLineNumber-t.range.startLineNumber;for(let n=0;n<i;n++){const i=t.range.startLineNumber+n,o=t.targetTextModel.getLineFirstNonWhitespaceColumn(i),r=t.targetTextModel.getLineLastNonWhitespaceColumn(i),s=new c.e(i,o,i,r);e.push(s)}}const n=t.backgroundColoring?"inline-edit-remove backgroundColoring":"inline-edit-remove";for(const t of e)i.push({range:t,options:{inlineClassName:n,description:"inline-edit-remove"}})}for(const e of t.inlineTexts)i.push({range:c.e.fromPositions(new l.L(t.lineNumber,e.column)),options:{description:b,after:{content:e.text,inlineClassName:e.preview?"inline-edit-decoration-preview":"inline-edit-decoration",cursorStops:h.RM.Left},showIfCollapsed:!0}});return i})),this.additionalLinesWidget=this._register(new p.rw(this.editor,this.languageService.languageIdCodec,(0,d.nK)((e=>{const t=this.uiState.read(e);return t&&!t.isPureRemove?{lineNumber:t.lineNumber,additionalLines:t.additionalLines,minReservedLineCount:t.additionalReservedLineCount,targetTextModel:t.targetTextModel}:void 0})))),this._register((0,s.OF)((()=>{this.isDisposed.set(!0,void 0)}))),this._register((0,m.RP)(this.editor,this.decorations))}ownsViewZone(e){return this.additionalLinesWidget.viewZoneId===e}};C=v([f(2,u.O)],C);var w,_=i(93983),E=i(72065),y=i(71204),x=i(71922),I=i(71050),S=i(20757),P=i(94565),A=i(65321),T=i(55496),L=i(74741),N=i(9488),D=i(1432),O=i(27628),R=i(59856),k=i(84144),M=i(5606),j=i(91847),V=i(10829),H=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},K=function(e,t){return function(i,n){t(i,n,e)}};let B=class extends s.JT{constructor(e,t,i){super(),this.editor=e,this.model=t,this.instantiationService=i,this.alwaysShowToolbar=(0,d.rD)(this.editor.onDidChangeConfiguration,(()=>"always"===this.editor.getOption(63).showToolbar)),this.sessionPosition=void 0,this.position=(0,d.nK)(this,(e=>{var t,i,n;const o=null===(t=this.model.read(e))||void 0===t?void 0:t.widget.model.ghostText.read(e);if(!this.alwaysShowToolbar.read(e)||!o||0===o.parts.length)return this.sessionPosition=void 0,null;const r=o.parts[0].column;this.sessionPosition&&this.sessionPosition.lineNumber!==o.lineNumber&&(this.sessionPosition=void 0);const s=new l.L(o.lineNumber,Math.min(r,null!==(n=null===(i=this.sessionPosition)||void 0===i?void 0:i.column)&&void 0!==n?n:Number.MAX_SAFE_INTEGER));return this.sessionPosition=s,s})),this._register((0,d.gp)(((t,i)=>{if(!this.model.read(t)||!this.alwaysShowToolbar.read(t))return;const n=i.add(this.instantiationService.createInstance(W,this.editor,!0,this.position));e.addContentWidget(n),i.add((0,s.OF)((()=>e.removeContentWidget(n))))})))}};B=H([K(2,E.TG)],B);let W=w=class extends s.JT{constructor(e,t,i,n,o,r){super(),this.editor=e,this.withBorder=t,this._position=i,this._contextKeyService=o,this._menuService=r,this.id="InlineEditHintsContentWidget"+w.id++,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this.nodes=(0,A.h)("div.inlineEditHints",{className:this.withBorder?".withBorder":""},[(0,A.h)("div@toolBar")]),this.inlineCompletionsActionsMenus=this._register(this._menuService.createMenu(k.eH.InlineEditActions,this._contextKeyService)),this.toolBar=this._register(n.createInstance(q,this.nodes.toolBar,this.editor,k.eH.InlineEditToolbar,{menuOptions:{renderShortTitle:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},actionViewItemProvider:(e,t)=>{if(e instanceof k.U8)return n.createInstance(F,e,void 0)},telemetrySource:"InlineEditToolbar"})),this._register(this.toolBar.onDidChangeDropdownVisibility((e=>{w._dropDownVisible=e}))),this._register((0,d.EH)((e=>{this._position.read(e),this.editor.layoutContentWidget(this)}))),this._register((0,d.EH)((e=>{const t=[];for(const[e,i]of this.inlineCompletionsActionsMenus.getActions())for(const e of i)e instanceof k.U8&&t.push(e);t.length>0&&t.unshift(new L.Z0),this.toolBar.setAdditionalSecondaryActions(t)})))}getId(){return this.id}getDomNode(){return this.nodes.root}getPosition(){return{position:this._position.get(),preference:[1,2],positionAffinity:3}}};W._dropDownVisible=!1,W.id=0,W=w=H([K(3,E.TG),K(4,_.i6),K(5,k.co)],W);class F extends O.Mm{updateLabel(){const e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){const t=(0,A.h)("div.keybinding").root;this._register(new T.e(t,D.OS,{disableTitle:!0,...T.F})).set(e),this.label.textContent=this._action.label,this.label.appendChild(t),this.label.classList.add("inlineEditStatusBarItemLabel")}}updateTooltip(){}}let q=class extends R.T{constructor(e,t,i,n,o,r,s,d,a,l){super(e,{resetMenu:i,...n},o,r,s,d,a,l),this.editor=t,this.menuId=i,this.options2=n,this.menuService=o,this.contextKeyService=r,this.menu=this._store.add(this.menuService.createMenu(this.menuId,this.contextKeyService,{emitEventsForSubmenuChanges:!0})),this.additionalActions=[],this.prependedPrimaryActions=[],this._store.add(this.menu.onDidChange((()=>this.updateToolbar()))),this._store.add(this.editor.onDidChangeCursorPosition((()=>this.updateToolbar()))),this.updateToolbar()}updateToolbar(){var e,t,i,n,o,r,s;const d=[],a=[];(0,O.vr)(this.menu,null===(e=this.options2)||void 0===e?void 0:e.menuOptions,{primary:d,secondary:a},null===(i=null===(t=this.options2)||void 0===t?void 0:t.toolbarOptions)||void 0===i?void 0:i.primaryGroup,null===(o=null===(n=this.options2)||void 0===n?void 0:n.toolbarOptions)||void 0===o?void 0:o.shouldInlineSubmenu,null===(s=null===(r=this.options2)||void 0===r?void 0:r.toolbarOptions)||void 0===s?void 0:s.useSeparatorsInPrimaryActions),a.push(...this.additionalActions),d.unshift(...this.prependedPrimaryActions),this.setActions(d,a)}setAdditionalSecondaryActions(e){(0,N.fS)(this.additionalActions,e,((e,t)=>e===t))||(this.additionalActions=e,this.updateToolbar())}};q=H([K(4,k.co),K(5,_.i6),K(6,M.i),K(7,j.d),K(8,P.H),K(9,V.b)],q);var J,G=i(33108),Z=i(17301),Q=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},U=function(e,t){return function(i,n){t(i,n,e)}};class z{constructor(e,t){this.widget=e,this.edit=t}dispose(){this.widget.dispose()}}let $=J=class extends s.JT{static get(e){return e.getContribution(J.ID)}constructor(e,t,i,n,o,r){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.languageFeaturesService=n,this._commandService=o,this._configurationService=r,this._isVisibleContext=J.inlineEditVisibleContext.bindTo(this.contextKeyService),this._isCursorAtInlineEditContext=J.cursorAtInlineEditContext.bindTo(this.contextKeyService),this._currentEdit=this._register((0,d.DN)(this,void 0)),this._isAccepting=(0,d.uh)(this,!1),this._enabled=(0,d.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).enabled)),this._fontFamily=(0,d.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).fontFamily)),this._backgroundColoring=(0,d.rD)(this.editor.onDidChangeConfiguration,(()=>this.editor.getOption(63).backgroundColoring));const s=(0,d.aq)("InlineEditController.modelContentChangedSignal",e.onDidChangeModelContent);this._register((0,d.EH)((t=>{this._enabled.read(t)&&(s.read(t),this._isAccepting.read(t)||this.getInlineEdit(e,!0))})));const a=(0,d.rD)(e.onDidChangeCursorPosition,(()=>e.getPosition()));this._register((0,d.EH)((e=>{if(!this._enabled.read(e))return;const t=a.read(e);t&&this.checkCursorPosition(t)}))),this._register((0,d.EH)((t=>{const i=this._currentEdit.read(t);if(this._isCursorAtInlineEditContext.set(!1),!i)return void this._isVisibleContext.set(!1);this._isVisibleContext.set(!0);const n=e.getPosition();n&&this.checkCursorPosition(n)})));const l=(0,d.aq)("InlineEditController.editorBlurSignal",e.onDidBlurEditorWidget);this._register((0,d.EH)((async t=>{var i;this._enabled.read(t)&&(l.read(t),this._configurationService.getValue("editor.experimentalInlineEdit.keepOnBlur")||e.getOption(63).keepOnBlur||(null===(i=this._currentRequestCts)||void 0===i||i.dispose(!0),this._currentRequestCts=void 0,await this.clear(!1)))})));const c=(0,d.aq)("InlineEditController.editorFocusSignal",e.onDidFocusEditorText);this._register((0,d.EH)((t=>{this._enabled.read(t)&&(c.read(t),this.getInlineEdit(e,!0))})));const u=this._register((0,A.aU)());this._register((0,d.EH)((e=>{const t=this._fontFamily.read(e);u.setStyle(""===t||"default"===t?"":`\n.monaco-editor .inline-edit-decoration,\n.monaco-editor .inline-edit-decoration-preview,\n.monaco-editor .inline-edit {\n\tfont-family: ${t};\n}`)}))),this._register(new B(this.editor,this._currentEdit,this.instantiationService))}checkCursorPosition(e){var t;if(!this._currentEdit)return void this._isCursorAtInlineEditContext.set(!1);const i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.edit;i?this._isCursorAtInlineEditContext.set(c.e.containsPosition(i.range,e)):this._isCursorAtInlineEditContext.set(!1)}validateInlineEdit(e,t){var i,n;if(t.text.includes("\n")&&t.range.startLineNumber!==t.range.endLineNumber&&t.range.startColumn!==t.range.endColumn){if(1!==t.range.startColumn)return!1;const o=t.range.endLineNumber;if(t.range.endColumn!==(null!==(n=null===(i=e.getModel())||void 0===i?void 0:i.getLineLength(o))&&void 0!==n?n:0)+1)return!1}return!0}async fetchInlineEdit(e,t){this._currentRequestCts&&this._currentRequestCts.dispose(!0);const i=e.getModel();if(!i)return;const n=i.getVersionId(),o=this.languageFeaturesService.inlineEditProvider.all(i);if(0===o.length)return;const r=o[0];this._currentRequestCts=new I.AU;const s=this._currentRequestCts.token,d=t?y.rn.Automatic:y.rn.Invoke;var a,l;if(t&&await(a=50,l=s,new Promise((e=>{let t;const i=setTimeout((()=>{t&&t.dispose(),e()}),a);l&&(t=l.onCancellationRequested((()=>{clearTimeout(i),t&&t.dispose(),e()})))}))),s.isCancellationRequested||i.isDisposed()||i.getVersionId()!==n)return;const c=await r.provideInlineEdit(i,{triggerKind:d},s);return c&&!s.isCancellationRequested&&!i.isDisposed()&&i.getVersionId()===n&&this.validateInlineEdit(e,c)?c:void 0}async getInlineEdit(e,t){var i;this._isCursorAtInlineEditContext.set(!1),await this.clear();const n=await this.fetchInlineEdit(e,t);if(!n)return;const o=n.range.endLineNumber,r=n.range.endColumn,s=!n.text.endsWith("\n")||n.range.startLineNumber===n.range.endLineNumber&&n.range.startColumn===n.range.endColumn?n.text:n.text.slice(0,-1),a=new S.Vb(o,[new S.NY(r,s,!1)]),l=this.instantiationService.createInstance(C,this.editor,{ghostText:(0,d.Dz)(a),minReservedLineCount:(0,d.Dz)(0),targetTextModel:(0,d.Dz)(null!==(i=this.editor.getModel())&&void 0!==i?i:void 0),range:(0,d.Dz)(n.range),backgroundColoring:this._backgroundColoring});this._currentEdit.set(new z(l,n),void 0)}async trigger(){await this.getInlineEdit(this.editor,!1)}async jumpBack(){this._jumpBackPosition&&(this.editor.setPosition(this._jumpBackPosition),this.editor.revealPositionInCenterIfOutsideViewport(this._jumpBackPosition))}async accept(){var e;this._isAccepting.set(!0,void 0);const t=null===(e=this._currentEdit.get())||void 0===e?void 0:e.edit;if(!t)return;let i=t.text;t.text.startsWith("\n")&&(i=t.text.substring(1)),this.editor.pushUndoStop(),this.editor.executeEdits("acceptCurrent",[a.h.replace(c.e.lift(t.range),i)]),t.accepted&&await this._commandService.executeCommand(t.accepted.id,...t.accepted.arguments||[]).then(void 0,Z.Cp),this.freeEdit(t),(0,d.PS)((e=>{this._currentEdit.set(void 0,e),this._isAccepting.set(!1,e)}))}jumpToCurrent(){var e,t;this._jumpBackPosition=null===(e=this.editor.getSelection())||void 0===e?void 0:e.getStartPosition();const i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.edit;if(!i)return;const n=l.L.lift({lineNumber:i.range.startLineNumber,column:i.range.startColumn});this.editor.setPosition(n),this.editor.revealPositionInCenterIfOutsideViewport(n)}async clear(e=!0){var t;const i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.edit;i&&(null==i?void 0:i.rejected)&&e&&await this._commandService.executeCommand(i.rejected.id,...i.rejected.arguments||[]).then(void 0,Z.Cp),i&&this.freeEdit(i),this._currentEdit.set(void 0,void 0)}freeEdit(e){const t=this.editor.getModel();if(!t)return;const i=this.languageFeaturesService.inlineEditProvider.all(t);0!==i.length&&i[0].freeInlineEdit(e)}shouldShowHoverAt(e){const t=this._currentEdit.get();if(!t)return!1;const i=t.edit,n=t.widget.model;if(c.e.containsPosition(i.range,e.getStartPosition())||c.e.containsPosition(i.range,e.getEndPosition()))return!0;const o=n.ghostText.get();return!!o&&o.parts.some((t=>e.containsPosition(new l.L(o.lineNumber,t.column))))}shouldShowHoverAtViewZone(e){var t,i;return null!==(i=null===(t=this._currentEdit.get())||void 0===t?void 0:t.widget.ownsViewZone(e))&&void 0!==i&&i}};$.ID="editor.contrib.inlineEditController",$.inlineEditVisibleKey="inlineEditVisible",$.inlineEditVisibleContext=new _.uy(J.inlineEditVisibleKey,!1),$.cursorAtInlineEditKey="cursorAtInlineEdit",$.cursorAtInlineEditContext=new _.uy(J.cursorAtInlineEditKey,!1),$=J=Q([U(1,E.TG),U(2,_.i6),U(3,x.p),U(4,P.H),U(5,G.Ui)],$);class Y extends n.R6{constructor(){super({id:"editor.action.inlineEdit.accept",label:"Accept Inline Edit",alias:"Accept Inline Edit",precondition:_.Ao.and(r.u.writable,$.inlineEditVisibleContext),kbOpts:[{weight:101,primary:2,kbExpr:_.Ao.and(r.u.writable,$.inlineEditVisibleContext,$.cursorAtInlineEditContext)}],menuOpts:[{menuId:k.eH.InlineEditToolbar,title:"Accept",group:"primary",order:1}]})}async run(e,t){const i=$.get(t);await(null==i?void 0:i.accept())}}class X extends n.R6{constructor(){const e=_.Ao.and(r.u.writable,_.Ao.not($.inlineEditVisibleKey));super({id:"editor.action.inlineEdit.trigger",label:"Trigger Inline Edit",alias:"Trigger Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e}})}async run(e,t){const i=$.get(t);null==i||i.trigger()}}class ee extends n.R6{constructor(){const e=_.Ao.and(r.u.writable,$.inlineEditVisibleContext,_.Ao.not($.cursorAtInlineEditKey));super({id:"editor.action.inlineEdit.jumpTo",label:"Jump to Inline Edit",alias:"Jump to Inline Edit",precondition:e,kbOpts:{weight:101,primary:2646,kbExpr:e},menuOpts:[{menuId:k.eH.InlineEditToolbar,title:"Jump To Edit",group:"primary",order:3,when:e}]})}async run(e,t){const i=$.get(t);null==i||i.jumpToCurrent()}}class te extends n.R6{constructor(){const e=_.Ao.and(r.u.writable,$.cursorAtInlineEditContext);super({id:"editor.action.inlineEdit.jumpBack",label:"Jump Back from Inline Edit",alias:"Jump Back from Inline Edit",precondition:e,kbOpts:{weight:110,primary:2646,kbExpr:e},menuOpts:[{menuId:k.eH.InlineEditToolbar,title:"Jump Back",group:"primary",order:3,when:e}]})}async run(e,t){const i=$.get(t);null==i||i.jumpBack()}}class ie extends n.R6{constructor(){const e=_.Ao.and(r.u.writable,$.inlineEditVisibleContext);super({id:"editor.action.inlineEdit.reject",label:"Reject Inline Edit",alias:"Reject Inline Edit",precondition:e,kbOpts:{weight:100,primary:9,kbExpr:e},menuOpts:[{menuId:k.eH.InlineEditToolbar,title:"Reject",group:"secondary",order:2}]})}async run(e,t){const i=$.get(t);await(null==i?void 0:i.clear())}}var ne=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},oe=function(e,t){return function(i,n){t(i,n,e)}};class re{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let se=class{constructor(e,t,i){this._editor=e,this._instantiationService=t,this._telemetryService=i,this.hoverOrdinal=5}suggestHoverAnchor(e){const t=$.get(this._editor);if(!t)return null;const i=e.target;if(8===i.type){const n=i.detail;if(t.shouldShowHoverAtViewZone(n.viewZoneId)){const t=i.range;return new o.YM(1e3,this,t,e.event.posx,e.event.posy,!1)}}if(7===i.type&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1);if(6===i.type){if(i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range))return new o.YM(1e3,this,i.range,e.event.posx,e.event.posy,!1)}return null}computeSync(e,t){if("onHover"!==this._editor.getOption(63).showToolbar)return[];const i=$.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new re(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new s.SL;this._telemetryService.publicLog2("inlineEditHover.shown");const n=this._instantiationService.createInstance(W,this._editor,!1,(0,d.Dz)(null));return e.fragment.appendChild(n.getDomNode()),i.add(n),i}};se=ne([oe(1,E.TG),oe(2,V.b)],se),(0,n.Qr)(Y),(0,n.Qr)(ie),(0,n.Qr)(ee),(0,n.Qr)(te),(0,n.Qr)(X),(0,n._K)($.ID,$,3),o.Ae.register(se)},4074:(e,t,i)=>{i.d(t,{r:()=>v});var n=i(65321),o=i(15393),r=i(32429),s=i(5976),d=i(97295),a=i(25670),l=i(24314),c=i(54530),u=i(72065),h=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},g=function(e,t){return function(i,n){t(i,n,e)}};const p=c.qx.register({description:"inline-progress-widget",stickiness:1,showIfCollapsed:!0,after:{content:d.B4,inlineClassName:"inline-editor-progress-decoration",inlineClassNameAffectsLetterSpacing:!0}});class m extends s.JT{constructor(e,t,i,n,o){super(),this.typeId=e,this.editor=t,this.range=i,this.delegate=o,this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this.create(n),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this)}create(e){this.domNode=n.$(".inline-progress-widget"),this.domNode.role="button",this.domNode.title=e;const t=n.$("span.icon");this.domNode.append(t),t.classList.add(...a.k.asClassNameArray(r.l.loading),"codicon-modifier-spin");const i=()=>{const e=this.editor.getOption(67);this.domNode.style.height=`${e}px`,this.domNode.style.width=`${Math.ceil(.8*e)}px`};i(),this._register(this.editor.onDidChangeConfiguration((e=>{(e.hasChanged(52)||e.hasChanged(67))&&i()}))),this._register(n.nm(this.domNode,n.tw.CLICK,(e=>{this.delegate.cancel()})))}getId(){return m.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:{lineNumber:this.range.startLineNumber,column:this.range.startColumn},preference:[0]}}dispose(){super.dispose(),this.editor.removeContentWidget(this)}}m.baseId="editor.widget.inlineProgressWidget";let v=class extends s.JT{constructor(e,t,i){super(),this.id=e,this._editor=t,this._instantiationService=i,this._showDelay=500,this._showPromise=this._register(new s.XK),this._currentWidget=new s.XK,this._operationIdPool=0,this._currentDecorations=t.createDecorationsCollection()}async showWhile(e,t,i){const n=this._operationIdPool++;this._currentOperation=n,this.clear(),this._showPromise.value=(0,o.Vg)((()=>{const n=l.e.fromPositions(e);this._currentDecorations.set([{range:n,options:p}]).length>0&&(this._currentWidget.value=this._instantiationService.createInstance(m,this.id,this._editor,n,t,i))}),this._showDelay);try{return await i}finally{this._currentOperation===n&&(this.clear(),this._currentOperation=void 0)}}clear(){this._showPromise.clear(),this._currentDecorations.clear(),this._currentWidget.clear()}};v=h([g(2,u.TG)],v)},97615:(e,t,i)=>{var n=i(16830),o=i(28108),r=i(29102),s=i(63580);class d extends n.R6{constructor(){super({id:"expandLineSelection",label:s.NC("expandLineSelection","Expand Line Selection"),alias:"Expand Line Selection",precondition:void 0,kbOpts:{weight:0,kbExpr:r.u.textInputFocus,primary:2090}})}run(e,t,i){if(i=i||{},!t.hasModel())return;const n=t._getViewModel();n.model.pushStackElement(),n.setCursorStates(i.source,3,o.P.expandLineSelection(n,n.getCursorStates())),n.revealAllCursors(i.source,!0)}}(0,n.Qr)(d)}}]);